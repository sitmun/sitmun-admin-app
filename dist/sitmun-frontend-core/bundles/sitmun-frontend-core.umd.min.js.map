{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/sitmun-frontend-core/src/lib/angular-hal/src/lib/resource-array.ts","../../../projects/sitmun-frontend-core/src/lib/angular-hal/src/lib/resource-helper.ts","../../../projects/sitmun-frontend-core/src/lib/angular-hal/src/lib/resource.ts","../../../projects/sitmun-frontend-core/src/lib/user/user.model.ts","../../../projects/sitmun-frontend-core/src/lib/angular-hal/src/lib/external.service.ts","../../../projects/sitmun-frontend-core/src/lib/angular-hal/src/lib/resource.service.ts","../../../projects/sitmun-frontend-core/src/lib/angular-hal/src/lib/rest.service.ts","../../../projects/sitmun-frontend-core/src/lib/account/account.service.ts","../../../projects/sitmun-frontend-core/src/lib/auth/auth.service.ts","../../../projects/sitmun-frontend-core/src/lib/auth/auth.interceptor.ts","../../../projects/sitmun-frontend-core/src/lib/auth/principal.service.ts","../../../projects/sitmun-frontend-core/src/lib/auth/auth-expired.interceptor.ts","../../../projects/sitmun-frontend-core/src/lib/auth/login.service.ts","../../../projects/sitmun-frontend-core/src/lib/dashboard/dashboard.service.ts","../../../projects/sitmun-frontend-core/src/lib/user/user.service.ts","../../../projects/sitmun-frontend-core/src/lib/user/user-position.model.ts","../../../projects/sitmun-frontend-core/src/lib/user/user-position.service.ts","../../../projects/sitmun-frontend-core/src/lib/user/user-configuration.model.ts","../../../projects/sitmun-frontend-core/src/lib/user/user-configuration.service.ts","../../../projects/sitmun-frontend-core/src/lib/territory/territory.model.ts","../../../projects/sitmun-frontend-core/src/lib/territory/territory.service.ts","../../../projects/sitmun-frontend-core/src/lib/territory/territory-type.model.ts","../../../projects/sitmun-frontend-core/src/lib/territory/territory-type.service.ts","../../../projects/sitmun-frontend-core/src/lib/territory/territory-group-type.model.ts","../../../projects/sitmun-frontend-core/src/lib/territory/territory-group-type.service.ts","../../../projects/sitmun-frontend-core/src/lib/role/role.model.ts","../../../projects/sitmun-frontend-core/src/lib/role/role.service.ts","../../../projects/sitmun-frontend-core/src/lib/connection/connection.model.ts","../../../projects/sitmun-frontend-core/src/lib/connection/connection.service.ts","../../../projects/sitmun-frontend-core/src/lib/task/task.model.ts","../../../projects/sitmun-frontend-core/src/lib/task/task.service.ts","../../../projects/sitmun-frontend-core/src/lib/task/task-type.model.ts","../../../projects/sitmun-frontend-core/src/lib/task/task-type.service.ts","../../../projects/sitmun-frontend-core/src/lib/task/task-group.model.ts","../../../projects/sitmun-frontend-core/src/lib/task/task-group.service.ts","../../../projects/sitmun-frontend-core/src/lib/task/task-parameter.model.ts","../../../projects/sitmun-frontend-core/src/lib/task/task-parameter.service.ts","../../../projects/sitmun-frontend-core/src/lib/task/task-availability.model.ts","../../../projects/sitmun-frontend-core/src/lib/task/task-availability.service.ts","../../../projects/sitmun-frontend-core/src/lib/task/task-ui.model.ts","../../../projects/sitmun-frontend-core/src/lib/task/task-ui.service.ts","../../../projects/sitmun-frontend-core/src/lib/translation/translation.model.ts","../../../projects/sitmun-frontend-core/src/lib/translation/translation.service.ts","../../../projects/sitmun-frontend-core/src/lib/translation/language.model.ts","../../../projects/sitmun-frontend-core/src/lib/translation/language.service.ts","../../../projects/sitmun-frontend-core/src/lib/service/service.model.ts","../../../projects/sitmun-frontend-core/src/lib/service/service.service.ts","../../../projects/sitmun-frontend-core/src/lib/configuration/configuration-parameters.model.ts","../../../projects/sitmun-frontend-core/src/lib/configuration/configuration-parameters.service.ts","../../../projects/sitmun-frontend-core/src/lib/service/service-parameter.model.ts","../../../projects/sitmun-frontend-core/src/lib/service/service-parameter.service.ts","../../../projects/sitmun-frontend-core/src/lib/capabilities/capabilitie.model.ts","../../../projects/sitmun-frontend-core/src/lib/capabilities/capabilities.service.ts","../../../projects/sitmun-frontend-core/src/lib/getInfo/info.model.ts","../../../projects/sitmun-frontend-core/src/lib/getInfo/getInfo.service.ts","../../../projects/sitmun-frontend-core/src/lib/cartography/cartography.model.ts","../../../projects/sitmun-frontend-core/src/lib/cartography/cartography.service.ts","../../../projects/sitmun-frontend-core/src/lib/cartography/cartography-group.model.ts","../../../projects/sitmun-frontend-core/src/lib/cartography/cartography-group.service.ts","../../../projects/sitmun-frontend-core/src/lib/cartography/cartography-availability.model.ts","../../../projects/sitmun-frontend-core/src/lib/cartography/cartography-availability.service.ts","../../../projects/sitmun-frontend-core/src/lib/cartography/cartography-filter.model.ts","../../../projects/sitmun-frontend-core/src/lib/cartography/cartography-filter.service.ts","../../../projects/sitmun-frontend-core/src/lib/cartography/cartography-parameter.model.ts","../../../projects/sitmun-frontend-core/src/lib/cartography/cartography-parameter.service.ts","../../../projects/sitmun-frontend-core/src/lib/cartography/cartography-spatial-selection-parameter.service.ts","../../../projects/sitmun-frontend-core/src/lib/cartography/cartography-style.model.ts","../../../projects/sitmun-frontend-core/src/lib/cartography/cartography-style.service.ts","../../../projects/sitmun-frontend-core/src/lib/cartography/background.model.ts","../../../projects/sitmun-frontend-core/src/lib/cartography/background.service.ts","../../../projects/sitmun-frontend-core/src/lib/tree/tree.model.ts","../../../projects/sitmun-frontend-core/src/lib/tree/tree.service.ts","../../../projects/sitmun-frontend-core/src/lib/tree/tree-node.model.ts","../../../projects/sitmun-frontend-core/src/lib/tree/tree-node.service.ts","../../../projects/sitmun-frontend-core/src/lib/application/application.model.ts","../../../projects/sitmun-frontend-core/src/lib/application/application.service.ts","../../../projects/sitmun-frontend-core/src/lib/application/application-background.model.ts","../../../projects/sitmun-frontend-core/src/lib/application/application-background.service.ts","../../../projects/sitmun-frontend-core/src/lib/application/application-parameter.model.ts","../../../projects/sitmun-frontend-core/src/lib/application/application-parameter.service.ts","../../../projects/sitmun-frontend-core/src/lib/codelist/codelist.model.ts","../../../projects/sitmun-frontend-core/src/lib/codelist/codelist.service.ts","../../../projects/sitmun-frontend-core/src/lib/map/map-configuration-manager.service.ts","../../../projects/sitmun-frontend-core/src/lib/auth/has-any-authority.directive.ts","../../../projects/sitmun-frontend-core/src/lib/auth/has-any-authority-on-territory.directive.ts","../../../projects/sitmun-frontend-core/src/lib/sitmun-frontend-core.module.ts","../../../projects/sitmun-frontend-core/src/lib/angular-hal/src/lib/angular-hal.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","this","constructor","create","__values","o","s","Symbol","iterator","m","i","length","next","value","done","__read","n","r","e","ar","push","error","__spread","arguments","concat","SuppressedError","ResourceArray","_this","totalElements","totalPages","pageNumber","result","el","init","type","response","sortInfo","ResourceHelper","createEmptyResult","_embedded","instantiateResourceCollection","next_uri","getHttp","get","getProxy","headers","pipe","map","catchError","observableThrowError","prev","prev_uri","first","first_uri","last","last_uri","page","self_uri","replace","urlParsed","url.parse","query","replaceOrAdd","pageSize","toString","uri","addSortInfo","sortElements","sort","_i","size","_b","_c","item","path","order","field","idx","indexOf","idxNextAmp","seachValue","substring","optionParams","params","options","_d","param","append","key","_e","_f","sortString","resolveRelations","resource","isNullOrUndefined","className","find","isArray","array","forEach","element","isPrimitive","resourceArray","getClassName","obj","results","exec","objProto","classNames","getPrototypeOf","payload","builder","embeddedName","keys","embeddedClassName","items","items_1","e_4","items_1_1","instance","searchSubtypes","instantiateResource","number","_links","self","href","undefined","subtypes","from","subtypeKey","toLowerCase","startsWith","subtype","entity","setProxyUri","proxy_uri","setRootUri","root_uri","getURL","addSlash","uriParsed","search","url","setHttp","http","getRootUri","HttpHeaders","Resource","defineProperty","_subtypes","getRelationArray","relation","HttpParams","observableOf","getRelation","data","lastIndexOf","realClassName","addRelation","header","post","updateRelation","patch","substituteRelation","put","substituteAllRelation","resources","deleteRelation","link","relationId","delete","deleteAllRelation","factory","ɵfac","User","_super","ExternalService","externalConfigurationService","getProxyUri","updateExternalConfigurationHandlerInterface","getExternalConfiguration","i0","ɵɵinject","ResourceService","externalService","getAll","subType","ignoreProjection","getResourceUrl","setUrls","id","setUrlsResource","getBySelfLink","resourceLink","searchSingle","customQuery","getByRelation","getByRelationArray","count","observe","Number","body","selfResource","status","update","updateCollection","headersReq","set","hasNext","hasPrev","hasFirst","hasLast","apply","endsWith","proxyUrl","rootUrl","RestService","injector","resourceService","handleError","mergeMap","notPaged","selfLink","totalElement","AccountService","ACCOUNT_API","save","changePassword","Injector","i1","HttpClient","AuthService","AUTH_API","getToken","sessionStorage","getItem","login","credentials","username","password","resp","ok","jwt","id_token","storeAuthenticationToken","bind","loginWithToken","Promise","resolve","reject","setItem","isLoggedIn","isLoggedOut","logout","Observable","observer","removeItem","complete","AuthInterceptor","intercept","request","token","clone","setHeaders","Authorization","handle","Principal","account","authenticated","authenticationState","Subject","authenticate","identity","userIdentity","hasAnyAuthority","authorities","hasAnyAuthorityDirect","hasAnyAuthorityOnTerritory","territory","hasAnyAuthorityDirectOnTerritory","includes","authoritiesPerTerritory","hasAuthority","authority","then","hasAuthorityOnTerritory","force","toPromise","catch","err","isAuthenticated","isIdentityResolved","getAuthenticationState","asObservable","AuthExpiredInterceptor","router","authService","principal","do","event","HttpErrorResponse","subscribe","navigate","i1$1","Router","LoginService","authServerProvider","callback","cb","DashboardService","DASHBOARD_API","DASHBOARD_EMBEDDED","providedIn","UserService","USER_API","remove","UserPosition","UserPositionService","USER_POSITION_API","user","console","UserConfiguration","UserConfigurationService","USER_CONFIGURATION_API","role","roleChildren","Territory","TerritoryService","TERRITORY_API","territoryGroupType","territoryType","groupType","TerritoryType","TerritoryTypeService","TERRITORYTYPE_API","TerritoryGroupType","TerritoryGroupTypeService","TERRITORYGROUPTYPE_API","Role","RoleService","ROLE_API","Connection","ConnectionService","CONNECTION_API","testConnection","Task","TaskService","service","split","cartography","connection","ui","group","roles","TaskType","TaskTypeService","TaskGroup","TaskGroupService","TaskParameter","TaskParameterService","TASK_PARAMETER_API","task","TaskAvailability","TaskAvailabilityService","TASK_AVAILABILITY_API","TaskUI","TaskUIService","Translation","TranslationService","TRANSLATION_API","language","Language","LanguageService","LANGUAGES_API","Service","ServiceService","SERVICE_API","serviceConnection","ConfigurationParameter","ConfigurationParametersService","CONFIGURATION_PARAMETERS_API","ServiceParameter","ServiceParameterService","SERVICE_PARAMETER_API","Capabilitie","CapabilitiesService","CAPABILITIES_API","getInfo","requestOptions","Charset","finalUrl","log","Info","GetInfoService","INFO_API","Cartography","CartographyService","CARTOGRAPHY_API","cartographyConnection","cartographyService","cartographySelectionService","selectionService","CartographyGroup","CartographyGroupService","CARTOGRAPHY_GROUP_API","CartographyAvailability","CartographyAvailabilityService","CARTOGRAPHY_AVAILABILITY_API","CartographyFilter","CartographyFilterService","CARTOGRAPHY_FILTER_API","territorialLevel","CartographyParameter","CartographyParameterService","CARTOGRAPHY_PARAMETER_API","CartographySpatialSelectionParameterService","CARTOGRAPHY_SPATIAL_SELECTION_PARAMETER_API","CartographyStyle","CartographyStyleService","CARTOGRAPHY_STYLES_API","Background","BackgroundService","BACKGROUND_API","backgroundCartographyGroup","cartographyGroup","Tree","TreeService","TREE_API","TreeNode","TreeNodeService","TREE_NODE_API","itemTree","tree","itemCartography","itemParent","parent","treeNodeParent","Application","ApplicationService","APPLICATION_API","applicationSituationMap","situationMap","ApplicationBackground","ApplicationBackgroundService","APPLICATION_BACKGROUND_API","application","background","ApplicationParameter","ApplicationParameterService","APPLICATION_PARAMETER_API","CodeList","CodeListService","CODELIST_API","visibility","opacity","attributions","desc","url_transparent","url_bgcolor","extent","queryable","loaded","MapConfigurationManagerService","layersSubject","BehaviorSubject","layers","baseLayerGroupsSubject","baseLayerGroups","layerConfigurationSubject","addLayersSubject","removeLayersSubject","situationMapConfigurationSubject","mapOptionsConfigurationSubject","mapComponentStatusSubject","loadLayersConfiguration","configuration","clearLayers","setLayers","loadBaseLayersConfiguration","setBaseLayerGroups","getBaseLayerGroups","groups","refreshBaseLayerGroups","getLayers","refresh","pop","refreshLayers","addLayer","layer","refreshAddLayers","addLayerAt","index","slice","refreshLayerConfiguration","removeLayer","removeLayerIndex","removeLayerId","iLen","splice","refreshRemoveLayers","getLayersAdded","getLayersRemoved","getLayerConfigurationListener","getLayerIndexById","moveLayer","layerIndex","changeLayerVisibility","changeLayerOpacity","position","LayerConfiguration","getSituationMapConfigurationListener","loadSituationMapConfiguration","getMapOptionsConfigurationListener","loadMapOptionsConfiguration","getMapComponentStatusListener","setMapComponentStatus","HasAnyAuthorityDirective","templateRef","viewContainerRef","updateView","clear","createEmbeddedView","ɵɵdirectiveInject","TemplateRef","ViewContainerRef","selectors","inputs","sitmunHasAnyAuthority","HasAnyAuthorityOnTerritoryDirective","opts","createTranslateLoader","TranslateHttpLoader","sitmunHasAnyAuthorityOnTerritory","SitmunFrontendCoreModule","forRoot","ngModule","providers","provide","HTTP_INTERCEPTORS","useClass","multi","imports","TranslateModule","loader","TranslateLoader","useFactory","deps","declarations","i1$2","exports","AngularHalModule","HttpClientModule"],"mappings":"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","sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    function next() {\r\n        while (env.stack.length) {\r\n            var rec = env.stack.pop();\r\n            try {\r\n                var result = rec.dispose && rec.dispose.call(rec.value);\r\n                if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n};\r\n","\r\nimport {throwError as observableThrowError} from 'rxjs';\r\n\r\nimport {catchError, map} from 'rxjs/operators';\r\nimport {Sort} from './sort';\r\nimport {ArrayInterface} from './array-interface';\r\nimport {ResourceHelper} from './resource-helper';\r\nimport {Resource} from './resource';\r\nimport * as url from 'url';\r\nimport {Observable} from 'rxjs';\r\n\r\n/** REST array of resource implementation */\r\nexport class ResourceArray<T extends Resource> implements ArrayInterface<T> {\r\n    /** sorting info */\r\n    public sortInfo: Sort[];\r\n    /** proxy url */\r\n    public proxyUrl: string;\r\n    /** root url */\r\n    public rootUrl: string;\r\n\r\n    /** self url */\r\n    public self_uri: string;\r\n    /** next resource url */\r\n    public next_uri: string;\r\n    /** previous resource url */\r\n    public prev_uri: string;\r\n    /** first resource url */\r\n    public first_uri: string;\r\n    /** last resource url */\r\n    public last_uri: string;\r\n\r\n    /** embedded array list */\r\n    public _embedded;\r\n\r\n    /** total number of elements in this array */\r\n    public totalElements = 0;\r\n    /** total number of pages in the response */\r\n    public totalPages = 1;\r\n    \r\n    /** page number in the response */\r\n    public pageNumber = 1;\r\n    \r\n    /** page size */\r\n    public pageSize: number;\r\n\r\n    /** array components */\r\n    public result: T[] = [];\r\n\r\n    /** push a new resource to the array */\r\n    push = (el: T) => {\r\n        this.result.push(el);\r\n    };\r\n\r\n    /** length of the array */\r\n    length = (): number => {\r\n        return this.result.length;\r\n    };\r\n\r\n    /** load array data from REST request */\r\n    private init = (type: { new(): T }, response: any, sortInfo: Sort[]): ResourceArray<T> => {\r\n        const result: ResourceArray<T> = ResourceHelper.createEmptyResult<T>(this._embedded);\r\n        result.sortInfo = sortInfo;\r\n        ResourceHelper.instantiateResourceCollection(type, response, result);\r\n        return result;\r\n    };\r\n\r\n    /** Load next page */\r\n    next = (type: { new(): T }): Observable<ResourceArray<T>> => {\r\n        if (this.next_uri) {\r\n            return ResourceHelper.getHttp().get(ResourceHelper.getProxy(this.next_uri), {headers: ResourceHelper.headers}).pipe(\r\n                map(response => this.init(type, response, this.sortInfo)),\r\n                catchError(error => observableThrowError(error)),);\r\n        }\r\n        return observableThrowError('no next defined');\r\n    };\r\n\r\n    /** Load previous page */\r\n    prev = (type: { new(): T }): Observable<ResourceArray<T>> => {\r\n        if (this.prev_uri) {\r\n            return ResourceHelper.getHttp().get(ResourceHelper.getProxy(this.prev_uri), {headers: ResourceHelper.headers}).pipe(\r\n                map(response => this.init(type, response, this.sortInfo)),\r\n                catchError(error => observableThrowError(error)),);\r\n        }\r\n        return observableThrowError('no prev defined');\r\n    };\r\n\r\n    /** Load first page */\r\n    first = (type: { new(): T }): Observable<ResourceArray<T>> => {\r\n        if (this.first_uri) {\r\n            return ResourceHelper.getHttp().get(ResourceHelper.getProxy(this.first_uri), {headers: ResourceHelper.headers}).pipe(\r\n                map(response => this.init(type, response, this.sortInfo)),\r\n                catchError(error => observableThrowError(error)),);\r\n        }\r\n        return observableThrowError('no first defined');\r\n    };\r\n\r\n    /** Load last page */\r\n    last = (type: { new(): T }): Observable<ResourceArray<T>> => {\r\n        if (this.last_uri) {\r\n            return ResourceHelper.getHttp().get(ResourceHelper.getProxy(this.last_uri), {headers: ResourceHelper.headers}).pipe(\r\n                map(response => this.init(type, response, this.sortInfo)),\r\n                catchError(error => observableThrowError(error)),);\r\n        }\r\n        return observableThrowError('no last defined');\r\n    };\r\n\r\n    /** Load page with given pageNumber*/\r\n    page = (type: { new(): T }, pageNumber: number): Observable<ResourceArray<T>> => {\r\n        this.self_uri = this.self_uri.replace('{?page,size,sort}', '');\r\n        this.self_uri = this.self_uri.replace('{&sort}', '');\r\n        let urlParsed = url.parse(ResourceHelper.getProxy(this.self_uri));\r\n        let query: string = ResourceArray.replaceOrAdd(urlParsed.query, 'size', this.pageSize.toString());\r\n        query = ResourceArray.replaceOrAdd(query, 'page', pageNumber.toString());\r\n\r\n\r\n        let uri = urlParsed.query ?\r\n            ResourceHelper.getProxy(this.self_uri).replace(urlParsed.query, query) : ResourceHelper.getProxy(this.self_uri).concat(query);\r\n        uri = this.addSortInfo(uri);\r\n        return ResourceHelper.getHttp().get(uri, {headers: ResourceHelper.headers}).pipe(\r\n            map(response => this.init(type, response, this.sortInfo)),\r\n            catchError(error => observableThrowError(error)),);\r\n    };\r\n\r\n    /** Sort collection based on given sort attribute */\r\n    sortElements = (type: { new(): T }, ...sort: Sort[]): Observable<ResourceArray<T>> => {\r\n        this.self_uri = this.self_uri.replace('{?page,size,sort}', '');\r\n        this.self_uri = this.self_uri.replace('{&sort}', '');\r\n        let uri = ResourceHelper.getProxy(this.self_uri).concat('?', 'size=', this.pageSize.toString(), '&page=', this.pageNumber.toString());\r\n        uri = this.addSortInfo(uri);\r\n        return ResourceHelper.getHttp().get(uri, {headers: ResourceHelper.headers}).pipe(\r\n            map(response => this.init(type, response, sort)),\r\n            catchError(error => observableThrowError(error)),);\r\n    };\r\n\r\n    /** Load page with given size */\r\n    size = (type: { new(): T }, size: number): Observable<ResourceArray<T>> => {\r\n        let uri = ResourceHelper.getProxy(this.self_uri).concat('?', 'size=', size.toString());\r\n        uri = this.addSortInfo(uri);\r\n        return ResourceHelper.getHttp().get(uri, {headers: ResourceHelper.headers}).pipe(\r\n            map(response => this.init(type, response, this.sortInfo)),\r\n            catchError(error => observableThrowError(error)),);\r\n    };\r\n\r\n    /** Add sort info to given URI */\r\n    private addSortInfo(uri: string) {\r\n        if (this.sortInfo) {\r\n            for (const item of this.sortInfo) {\r\n                uri = uri.concat('&sort=', item.path, ',', item.order);\r\n            }\r\n        }\r\n        return uri;\r\n    }\r\n\r\n    /** Add replace or add param value to query string */\r\n    private static replaceOrAdd(query: string, field: string, value: string): string {\r\n        if (query) {\r\n            let idx: number = query.indexOf(field);\r\n            let idxNextAmp: number = query.indexOf('&', idx) == -1 ? query.indexOf('/', idx) : query.indexOf('&', idx);\r\n\r\n            if (idx != -1) {\r\n                let seachValue = query.substring(idx, idxNextAmp);\r\n                query = query.replace(seachValue, field + '=' + value);\r\n            } else {\r\n                query = query.concat(\"&\" + field + '=' + value);\r\n            }\r\n        } else {\r\n            query = \"?\" + field + '=' + value;\r\n        }\r\n        return query;\r\n    }\r\n}\r\n","import {HttpClient, HttpHeaders, HttpParams} from '@angular/common/http';\r\nimport {Resource} from './resource';\r\nimport {ResourceArray} from './resource-array';\r\nimport {HalOptions} from './rest.service';\r\nimport {SubTypeBuilder} from './subtype-builder';\r\nimport {isNullOrUndefined, isPrimitive} from 'util';\r\nimport * as url from 'url';\r\n\r\n/** REST API access helper */\r\nexport class ResourceHelper {\r\n\r\n    /** HttpHeaders */\r\n    public static headers: HttpHeaders = new HttpHeaders();\r\n    /** Proxy URL */\r\n    private static proxy_uri: string = null;\r\n    /** Root URL */\r\n    private static root_uri: string = null;\r\n    /** HttpClient */\r\n    private static http: HttpClient = null;\r\n\r\n    /** get request headers */\r\n    /*public static get headers(): HttpHeaders {\r\n        if (isNullOrUndefined(this._headers))\r\n          ResourceHelper._headers = new HttpHeaders();\r\n        return ResourceHelper._headers;\r\n    }*/\r\n\r\n    /** set request headers */\r\n    /*public static set headers(headers: HttpHeaders) {\r\n      ResourceHelper._headers = headers;\r\n    }*/\r\n\r\n    /** get request option params */\r\n    static optionParams(params: HttpParams, options?: HalOptions): HttpParams {\r\n        if (options) {\r\n\r\n            if (options.params) {\r\n                for (const param of options.params) {\r\n                    params = params.append(param.key, param.value.toString());\r\n                }\r\n            }\r\n\r\n            if (options.size) {\r\n                params = params.append('size', options.size.toString());\r\n            }\r\n\r\n            if (options.sort) {\r\n                for (const s of options.sort) {\r\n                    let sortString = '';\r\n                    sortString = s.path ? sortString.concat(s.path) : sortString;\r\n                    sortString = s.order ? sortString.concat(',').concat(s.order) : sortString;\r\n                    params = params.append('sort', sortString);\r\n                }\r\n            }\r\n\r\n        }\r\n        return params;\r\n    }\r\n\r\n    /** resolve resource relations */\r\n    static resolveRelations(resource: Resource): Object {\r\n        const result: any = {};\r\n        for (const key in resource) {\r\n            if (!isNullOrUndefined(resource[key])) {\r\n                if (ResourceHelper.className(resource[key])\r\n                    .find((className: string) => className == 'Resource')) {\r\n                    if (resource[key]['_links'])\r\n                        result[key] = resource[key]['_links']['self']['href'];\r\n                } else if (Array.isArray(resource[key])) {\r\n                    let array: any[] = resource[key];\r\n                    if (array) {\r\n                        result[key] = new Array();\r\n                        array.forEach((element) => {\r\n                            if (isPrimitive(element)) {\r\n                                result[key].push(element);\r\n                            }\r\n                            else {\r\n                                result[key].push(this.resolveRelations(element));\r\n                            }\r\n                        });\r\n                    }\r\n                } else {\r\n                    result[key] = resource[key];\r\n                }\r\n            }\r\n        }\r\n        return result as Object;\r\n    }\r\n\r\n    /** create an empty resource from embedded data*/\r\n    static createEmptyResult<T extends Resource>(_embedded: string): ResourceArray<T> {\r\n        let resourceArray: ResourceArray<T> = new ResourceArray<T>();\r\n        resourceArray._embedded = _embedded;\r\n        return resourceArray;\r\n    }\r\n\r\n    /** get resource class name*/\r\n    static getClassName(obj: any): string {\r\n        var funcNameRegex = /function (.+?)\\(/;\r\n        var results = (funcNameRegex).exec(obj.constructor.toString());\r\n        return (results && results.length > 1) ? results[1] : '';\r\n    }\r\n\r\n    \r\n    /** get resource class name from a prototype object*/\r\n    static className(objProto: any): string[] {\r\n        let classNames = [];\r\n        let obj = Object.getPrototypeOf(objProto);\r\n        let className: string;\r\n\r\n        while ((className = ResourceHelper.getClassName(obj)) !== 'Object') {\r\n            classNames.push(className);\r\n            obj = Object.getPrototypeOf(obj);\r\n        }\r\n\r\n        return classNames;\r\n    }\r\n\r\n    /** instantiate a ResourceCollection from response embedded data*/\r\n    static instantiateResourceCollection<T extends Resource>(type: { new(): T }, payload: any,\r\n                                                             result: ResourceArray<T>, builder?: SubTypeBuilder,embeddedName?:String): ResourceArray<T> {\r\n        for (const embeddedClassName of Object.keys(payload[result._embedded])) {\r\n            if(!embeddedName || (embeddedName && embeddedClassName==embeddedName)){\r\n                let embedded: any = payload[result._embedded];\r\n                const items = embedded[embeddedClassName];\r\n                for (let item of items) {\r\n                    let instance: T = new type();\r\n                    instance = this.searchSubtypes(builder, embeddedClassName, instance);\r\n\r\n                    this.instantiateResource(instance, item);\r\n                    result.push(instance);\r\n                }\r\n            }\r\n        }\r\n\r\n        result.totalElements = payload.page ? payload.page.totalElements : result.length;\r\n        result.totalPages = payload.page ? payload.page.totalPages : 1;\r\n        result.pageNumber = payload.page ? payload.page.number : 1;\r\n        result.pageSize = payload.page ? payload.page.size : 20;\r\n\r\n        result.self_uri = payload._links && payload._links.self ? payload._links.self.href : undefined;\r\n        result.next_uri = payload._links && payload._links.next ? payload._links.next.href : undefined;\r\n        result.prev_uri = payload._links && payload._links.prev ? payload._links.prev.href : undefined;\r\n        result.first_uri = payload._links && payload._links.first ? payload._links.first.href : undefined;\r\n        result.last_uri = payload._links && payload._links.last ? payload._links.last.href : undefined;\r\n        return result;\r\n    }\r\n\r\n    /** search subtypes*/\r\n    static searchSubtypes<T extends Resource>(builder: SubTypeBuilder, embeddedClassName: string, instance: T) {\r\n        if (builder && builder.subtypes) {\r\n            let keys = builder.subtypes.keys();\r\n            Array.from(keys).forEach((subtypeKey: string) => {\r\n                if (embeddedClassName.toLowerCase().startsWith(subtypeKey.toLowerCase())) {\r\n                    let subtype: { new(): any } = builder.subtypes.get(subtypeKey);\r\n                    instance = new subtype();\r\n                }\r\n            });\r\n        }\r\n        return instance;\r\n    }\r\n\r\n    /** instantiate a Resource from response */\r\n    static instantiateResource<T extends Resource>(entity: T, payload: Object): T {\r\n        for (const p in payload) {\r\n            //TODO array init\r\n            /* if(entity[p].constructor === Array && isNullOrUndefined(payload[p]))\r\n                 entity[p] = [];\r\n             else*/\r\n            entity[p] = payload[p];\r\n        }\r\n        return entity;\r\n    }\r\n\r\n    /** set proxy URL */\r\n    static setProxyUri(proxy_uri: string) {\r\n        ResourceHelper.proxy_uri = proxy_uri;\r\n    }\r\n\r\n    /** set Root URI */\r\n    static setRootUri(root_uri: string) {\r\n        ResourceHelper.root_uri = root_uri;\r\n    }\r\n\r\n    /** get proxy URL */\r\n    public static getURL(): string {\r\n        return ResourceHelper.proxy_uri && ResourceHelper.proxy_uri != '' ?\r\n            ResourceHelper.addSlash(ResourceHelper.proxy_uri) :\r\n            ResourceHelper.addSlash(ResourceHelper.root_uri);\r\n    }\r\n\r\n    /** add slash to URI */\r\n    private static addSlash(uri: string): string {\r\n        let uriParsed = url.parse(uri);\r\n        if (isNullOrUndefined(uriParsed.search) && uri && uri[uri.length - 1] != '/')\r\n            return uri + '/';\r\n        return uri;\r\n    }\r\n\r\n    /** get proxy from URL */\r\n    public static getProxy(url: string): string {\r\n        if (!ResourceHelper.proxy_uri || ResourceHelper.proxy_uri == '')\r\n            return url;\r\n        return ResourceHelper.addSlash(url.replace(ResourceHelper.root_uri, ResourceHelper.proxy_uri));\r\n    }\r\n\r\n    /** set HttpClient*/\r\n    public static setHttp(http: HttpClient) {\r\n        ResourceHelper.http = http;\r\n    }\r\n\r\n    /** get HttpClient*/\r\n    public static getHttp(): HttpClient {\r\n        return ResourceHelper.http;\r\n    }\r\n\r\n    /** get root URI*/\r\n    static getRootUri() {\r\n        return ResourceHelper.root_uri;\r\n    }\r\n}\r\n","\r\nimport {throwError as observableThrowError, of as observableOf} from 'rxjs';\r\n\r\nimport {map} from 'rxjs/operators';\r\n\r\n\r\nimport {HttpParams} from '@angular/common/http';\r\nimport {ResourceHelper} from './resource-helper';\r\nimport {ResourceArray} from './resource-array';\r\nimport {isNullOrUndefined} from 'util';\r\n\r\nimport {HalOptions} from './rest.service';\r\nimport {SubTypeBuilder} from './subtype-builder';\r\nimport {Injectable} from '@angular/core';\r\nimport {Observable} from 'rxjs';\r\n\r\n/** Abstract resource class*/\r\n@Injectable()\r\nexport abstract class Resource {\r\n\r\n    /** proxy URL */\r\n    public proxyUrl: string;\r\n    /** root URL */\r\n    public rootUrl: string;\r\n\r\n    /** links */\r\n    public _links: any;\r\n    /** subtypes */\r\n    public _subtypes: Map<string, any>;\r\n\r\n    \r\n    /** get subtypes */    \r\n    public get subtypes(): Map<string, any> {\r\n        return this._subtypes;\r\n    }\r\n\r\n    /** set subtypes */\r\n    public set subtypes(_subtypes: Map<string, any>) {\r\n        this._subtypes = _subtypes;\r\n    }\r\n\r\n    /** constructor*/\r\n    constructor() {\r\n    }\r\n\r\n    /** Get collection of related resources */\r\n    public getRelationArray<T extends Resource>(type: { new(): T }, relation: string, _embedded?: string, options?: HalOptions, builder?: SubTypeBuilder): Observable<T[]> {\r\n\r\n        const params = ResourceHelper.optionParams(new HttpParams(), options);\r\n        const result: ResourceArray<T> = ResourceHelper.createEmptyResult<T>(isNullOrUndefined(_embedded) ? \"_embedded\" : _embedded);\r\n        if (!isNullOrUndefined(this._links) && !isNullOrUndefined(this._links[relation])) {\r\n            let observable = ResourceHelper.getHttp().get(ResourceHelper.getProxy(this._links[relation].href), {\r\n                headers: ResourceHelper.headers,\r\n                params: params\r\n            });\r\n            return observable.pipe(map(response => ResourceHelper.instantiateResourceCollection<T>(type, response, result, builder)),\r\n                map((array: ResourceArray<T>) => array.result),);\r\n        } else {\r\n            return observableOf([]);\r\n        }\r\n    }\r\n\r\n    /** Get related resource */\r\n    public getRelation<T extends Resource>(type: { new(): T }, relation: string, builder?: SubTypeBuilder): Observable<T> {\r\n        let result: T = new type();\r\n        if (!isNullOrUndefined(this._links) && !isNullOrUndefined(this._links[relation])) {\r\n            let observable = ResourceHelper.getHttp().get(ResourceHelper.getProxy(this._links[relation].href), {headers: ResourceHelper.headers});\r\n            return observable.pipe(map((data: any) => {\r\n                if (builder) {\r\n                    for (const embeddedClassName of Object.keys(data['_links'])) {\r\n                        if (embeddedClassName == 'self') {\r\n                            let href: string = data._links[embeddedClassName].href;\r\n                            let idx: number = href.lastIndexOf('/');\r\n                            let realClassName = href.replace(ResourceHelper.getRootUri(), \"\").substring(0, idx);\r\n                            result = ResourceHelper.searchSubtypes(builder, realClassName, result);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                return ResourceHelper.instantiateResource(result, data);\r\n            }));\r\n        } else {\r\n            return observableOf(null);\r\n        }\r\n    }\r\n\r\n    /** Adds the given resource to the bound collection by the relation */\r\n    public addRelation<T extends Resource>(relation: string, resource: T): Observable<any> {\r\n        if (!isNullOrUndefined(this._links) && !isNullOrUndefined(this._links[relation])) {\r\n            let header = ResourceHelper.headers.append('Content-Type', 'text/uri-list');\r\n            return ResourceHelper.getHttp().post(ResourceHelper.getProxy(this._links[relation].href), resource._links.self.href, {headers: header});\r\n        } else {\r\n            return observableThrowError('no relation found');\r\n        }\r\n    }\r\n\r\n    /** Bind the given resource to this resource by the given relation*/\r\n    public updateRelation<T extends Resource>(relation: string, resource: T): Observable<any> {\r\n        if (!isNullOrUndefined(this._links) && !isNullOrUndefined(this._links[relation])) {\r\n            let header = ResourceHelper.headers.append('Content-Type', 'text/uri-list');\r\n            return ResourceHelper.getHttp().patch(ResourceHelper.getProxy(this._links[relation].href), resource._links.self.href, {headers: header});\r\n        } else {\r\n            return observableThrowError('no relation found');\r\n        }\r\n    }\r\n\r\n    /** Bind the given resource to this resource by the given relation*/\r\n    public substituteRelation<T extends Resource>(relation: string, resource: T): Observable<any> {\r\n        if (!isNullOrUndefined(this._links) && !isNullOrUndefined(this._links[relation])) {\r\n            let header = ResourceHelper.headers.append('Content-Type', 'text/uri-list');\r\n            return ResourceHelper.getHttp().put(ResourceHelper.getProxy(this._links[relation].href), resource._links.self.href, {headers: header});\r\n        } else {\r\n            return observableThrowError('no relation found');\r\n        }\r\n    }\r\n    \r\n    \r\n    /** Bind the given resource to this resource by the given relation*/\r\n    public substituteAllRelation<T extends Resource>(relation: string, resources: Resource[]): Observable<any> {\r\n        if (!isNullOrUndefined(this._links) && !isNullOrUndefined(this._links[relation])) {\r\n            let header = ResourceHelper.headers.append('Content-Type', 'text/uri-list');\r\n            return ResourceHelper.getHttp().put(ResourceHelper.getProxy(this._links[relation].href), resources.map((resource) => resource._links.self.href), {headers: header});\r\n        } else {\r\n            return observableThrowError('no relation found');\r\n        }\r\n    }\r\n\r\n\r\n\r\n    /** Unbind the resource with the given relation from this resource*/\r\n    public deleteRelation<T extends Resource>(relation: string, resource: T): Observable<any> {\r\n        if (!isNullOrUndefined(this._links) && !isNullOrUndefined(resource._links)) {\r\n            let link: string = resource._links['self'].href;\r\n            let idx: number = link.lastIndexOf('/') + 1;\r\n\r\n            if (idx == -1)\r\n                return observableThrowError('no relation found');\r\n\r\n            let relationId: string = link.substring(idx);\r\n            return ResourceHelper.getHttp().delete(ResourceHelper.getProxy(this._links[relation].href + '/' + relationId), {headers: ResourceHelper.headers});\r\n        } else {\r\n            return observableThrowError('no relation found');\r\n        }\r\n    }\r\n    \r\n    /** Unbind the resource with the given relation from this resource*/\r\n    public deleteAllRelation<T extends Resource>(relation: string): Observable<any> {\r\n        return ResourceHelper.getHttp().delete(ResourceHelper.getProxy(this._links[relation].href ), {headers: ResourceHelper.headers});\r\n        \r\n    }\r\n\r\n}","import {Resource} from '../angular-hal/src/lib/resource';\r\nimport { UserConfiguration } from './user-configuration.model';\r\nimport { UserPosition } from './user-position.model';\r\n\r\n/**\r\n * User model\r\n */\r\nexport class User extends Resource {\r\n  /** id */\r\n  public id: number;  \r\n  /** username */\r\n  public username: string;\r\n  /** password */\r\n  public password: string;\r\n  /** first name */\r\n  public firstName: string;\r\n  /** last name */\r\n  public lastName: string;\r\n  /** whether user is blocked */\r\n  public blocked: boolean;\r\n  /** whether user is administrator */\r\n  public administrator: boolean;\r\n  /** Is passwordSet */\r\n  public passwordSet: boolean;\r\n  /** user positions */\r\n  public positions: UserPosition[];\r\n  /** user permissions */\r\n  public permissions: UserConfiguration[];\r\n}\r\n","import {HttpClient} from '@angular/common/http';\r\nimport {Inject, Injectable} from '@angular/core';\r\nimport {ResourceHelper} from './resource-helper';\r\nimport {ExternalConfigurationHandlerInterface} from './external-configuration.handler';\r\nimport {ExternalConfiguration} from './ExternalConfiguration';\r\n\r\n\r\n/** ExternalService */\r\n@Injectable()\r\nexport class ExternalService {\r\n\r\n    /** constructor */\r\n    constructor(@Inject('ExternalConfigurationService') private externalConfigurationService: ExternalConfigurationHandlerInterface) {\r\n        ResourceHelper.setProxyUri(externalConfigurationService.getProxyUri());\r\n        ResourceHelper.setRootUri(externalConfigurationService.getRootUri());\r\n        ResourceHelper.setHttp(externalConfigurationService.getHttp());\r\n    }\r\n\r\n    /** update ExternalConfigurationHandler */\r\n    public updateExternalConfigurationHandlerInterface(externalConfigurationService: ExternalConfigurationHandlerInterface) {\r\n\tthis.externalConfigurationService = externalConfigurationService;\r\n\r\n        ResourceHelper.setProxyUri(externalConfigurationService.getProxyUri());\r\n        ResourceHelper.setRootUri(externalConfigurationService.getRootUri());\r\n        ResourceHelper.setHttp(externalConfigurationService.getHttp());\r\n    }\r\n\r\n    /** get ExternalConfiguration */\r\n    public getExternalConfiguration(): ExternalConfiguration {\r\n        return this.externalConfigurationService.getExternalConfiguration();\r\n    }\r\n\r\n    /** get proxy URL */\r\n    public getProxyUri(): string {\r\n        return this.externalConfigurationService.getProxyUri();\r\n    }\r\n\r\n    /** get Root URI */\r\n    public getRootUri(): string {\r\n        return this.externalConfigurationService.getRootUri();\r\n    }\r\n\r\n    /** get URL */\r\n    public getURL(): string {\r\n        return ResourceHelper.getURL();\r\n    }\r\n\r\n    /** get HttpClient */\r\n    public getHttp(): HttpClient {\r\n        return ResourceHelper.getHttp();\r\n    }\r\n}\r\n","\r\nimport { throwError as observableThrowError } from 'rxjs';\r\n\r\nimport { catchError, map } from 'rxjs/operators';\r\nimport { Resource } from './resource';\r\nimport { ResourceHelper } from './resource-helper';\r\nimport { Injectable } from '@angular/core';\r\nimport { HttpParams, HttpResponse } from '@angular/common/http';\r\nimport { Sort } from './sort';\r\nimport { ResourceArray } from './resource-array';\r\nimport { ExternalService } from './external.service';\r\nimport { HalOptions } from './rest.service';\r\nimport { SubTypeBuilder } from './subtype-builder';\r\nimport { Observable } from 'rxjs';\r\n\r\n/** ResourceService */\r\n@Injectable()\r\nexport class ResourceService {\r\n\r\n\r\n    /** constructor */\r\n    constructor(private externalService: ExternalService) { }\r\n\r\n\r\n    /** get URL */\r\n    private static getURL(): string {\r\n        return ResourceHelper.getURL();\r\n    }\r\n\r\n    /** get all resources from a base URI of a given type */\r\n    public getAll<T extends Resource>(type: { new(): T }, resource: string, _embedded: string, options?: HalOptions, subType?: SubTypeBuilder, embeddedName?:String, ignoreProjection?:boolean): Observable<ResourceArray<T>> {\r\n        let uri = this.getResourceUrl(resource);\r\n        if(!ignoreProjection){\r\n            uri = uri.concat('?projection=view');\r\n        }\r\n        const params = ResourceHelper.optionParams(new HttpParams(), options);\r\n        const result: ResourceArray<T> = ResourceHelper.createEmptyResult<T>(_embedded);\r\n\r\n        this.setUrls(result);\r\n        result.sortInfo = options ? options.sort : undefined;\r\n        let observable = ResourceHelper.getHttp().get(uri, { headers: ResourceHelper.headers, params: params });\r\n        return observable.pipe(map(response => ResourceHelper.instantiateResourceCollection(type, response, result, subType,embeddedName)),\r\n            catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** get resource from a base URI and a given id */\r\n    public get<T extends Resource>(type: { new(): T }, resource: string, id: any): Observable<T> {\r\n        const uri = this.getResourceUrl(resource).concat('/', id, '?projection=view');\r\n        const result: T = new type();\r\n\r\n        this.setUrlsResource(result);\r\n        let observable = ResourceHelper.getHttp().get(uri, { headers: ResourceHelper.headers });\r\n        return observable.pipe(map(data => ResourceHelper.instantiateResource(result, data)),\r\n            catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** get resource from its selflink */\r\n    public getBySelfLink<T extends Resource>(type: { new(): T }, resourceLink: string): Observable<T> {\r\n        const result: T = new type();\r\n\r\n        this.setUrlsResource(result);\r\n        let observable = ResourceHelper.getHttp().get(ResourceHelper.getProxy(resourceLink), { headers: ResourceHelper.headers });\r\n        return observable.pipe(map(data => ResourceHelper.instantiateResource(result, data)),\r\n            catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** search resources from a given base path, query and options */\r\n    public search<T extends Resource>(type: { new(): T }, query: string, resource: string, _embedded: string, options?: HalOptions): Observable<ResourceArray<T>> {\r\n        const uri = this.getResourceUrl(resource).concat('/search/', query);\r\n        const params = ResourceHelper.optionParams(new HttpParams(), options);\r\n        const result: ResourceArray<T> = ResourceHelper.createEmptyResult<T>(_embedded);\r\n\r\n        this.setUrls(result);\r\n        let observable = ResourceHelper.getHttp().get(uri, { headers: ResourceHelper.headers, params: params });\r\n        return observable.pipe(map(response => ResourceHelper.instantiateResourceCollection(type, response, result)),\r\n            catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** search a single resource from a given base path, query and options */\r\n    public searchSingle<T extends Resource>(type: { new(): T }, query: string, resource: string, options?: HalOptions): Observable<T> {\r\n        const uri = this.getResourceUrl(resource).concat('/search/', query);\r\n        const params = ResourceHelper.optionParams(new HttpParams(), options);\r\n        const result: T = new type();\r\n\r\n        this.setUrlsResource(result);\r\n        let observable = ResourceHelper.getHttp().get(uri, { headers: ResourceHelper.headers, params: params });\r\n        return observable.pipe(map(response => ResourceHelper.instantiateResource(result, response)),\r\n            catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** search resources from a given base path, custom query and options */\r\n    public customQuery<T extends Resource>(type: { new(): T }, query: string, resource: string, _embedded: string, options?: HalOptions): Observable<ResourceArray<T>> {\r\n        const uri = this.getResourceUrl(resource + query);\r\n        const params = ResourceHelper.optionParams(new HttpParams(), options);\r\n        const result: ResourceArray<T> = ResourceHelper.createEmptyResult<T>(_embedded);\r\n\r\n        this.setUrls(result);\r\n        let observable = ResourceHelper.getHttp().get(uri, { headers: ResourceHelper.headers, params: params });\r\n        return observable.pipe(map(response => ResourceHelper.instantiateResourceCollection(type, response, result)),\r\n            catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** get resource given a relation link */\r\n    public getByRelation<T extends Resource>(type: { new(): T }, resourceLink: string): Observable<T> {\r\n        let result: T = new type();\r\n\r\n        this.setUrlsResource(result);\r\n        let observable = ResourceHelper.getHttp().get(resourceLink, { headers: ResourceHelper.headers });\r\n        return observable.pipe(map(data => ResourceHelper.instantiateResource(result, data)),\r\n            catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** get resource array given a relation link */\r\n    public getByRelationArray<T extends Resource>(type: { new(): T }, resourceLink: string, _embedded: string, builder?: SubTypeBuilder): Observable<ResourceArray<T>> {\r\n        const result: ResourceArray<T> = ResourceHelper.createEmptyResult<T>(_embedded);\r\n\r\n        this.setUrls(result);\r\n        let observable = ResourceHelper.getHttp().get(resourceLink, { headers: ResourceHelper.headers });\r\n        return observable.pipe(map(response => ResourceHelper.instantiateResourceCollection(type, response, result, builder)),\r\n            catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** count resources given a path */\r\n    public count(resource: string): Observable<number> {\r\n        const uri = this.getResourceUrl(resource).concat('/search/countAll');\r\n\r\n        return ResourceHelper.getHttp().get(uri, { headers: ResourceHelper.headers, observe: 'body' }).pipe(\r\n            map((response: Response) => Number(response.body)),\r\n            catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** create resource from self link and entity data*/\r\n    public create<T extends Resource>(selfResource: string, entity: T) {\r\n        const uri = ResourceHelper.getURL() + selfResource;\r\n        const payload = ResourceHelper.resolveRelations(entity);\r\n\r\n        this.setUrlsResource(entity);\r\n        let observable = ResourceHelper.getHttp().post(uri, payload, { headers: ResourceHelper.headers, observe: 'response' });\r\n        return observable.pipe(map((response: HttpResponse<string>) => {\r\n            if (response.status >= 200 && response.status <= 207)\r\n                return ResourceHelper.instantiateResource(entity, response.body);\r\n            else if (response.status == 500) {\r\n                let body: any = response.body;\r\n                return observableThrowError(body.error);\r\n            }\r\n        }), catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** update resource from a given entity data*/\r\n    public update<T extends Resource>(entity: T) {\r\n        const uri = ResourceHelper.getProxy(entity._links.self.href);\r\n        const payload = ResourceHelper.resolveRelations(entity);\r\n        this.setUrlsResource(entity);\r\n        let observable = ResourceHelper.getHttp().put(uri, payload, { headers: ResourceHelper.headers, observe: 'response' });\r\n        return observable.pipe(map((response: HttpResponse<string>) => {\r\n            if (response.status >= 200 && response.status <= 207)\r\n                return ResourceHelper.instantiateResource(entity, response.body);\r\n            else if (response.status == 500) {\r\n                let body: any = response.body;\r\n                return observableThrowError(body.error);\r\n            }\r\n        }), catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** update resource from a given entity data*/\r\n    public updateCollection<T extends Resource>(resourceArray: ResourceArray<T>, resourceLink: string) {\r\n        const uri = ResourceHelper.getProxy(resourceLink);\r\n        //const payload = ResourceHelper.resolveRelations(entity);\r\n        //this.setUrlsResource(entity);\r\n        var headersReq = ResourceHelper.headers;\r\n        headersReq.set(\"Content-Type\", \"text/uri-list\");\r\n        let observable = ResourceHelper.getHttp().put(uri, resourceArray, { headers: headersReq, observe: 'response' });\r\n        return observable.pipe(map((response: HttpResponse<string>) => {\r\n            if (response.status >= 200 && response.status <= 207)\r\n                return \"\";\r\n            else if (response.status == 500) {\r\n                let body: any = response.body;\r\n                return observableThrowError(body.error);\r\n            }\r\n        }), catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** patch resource from a given entity data*/\r\n    public patch<T extends Resource>(entity: T) {\r\n        const uri = ResourceHelper.getProxy(entity._links.self.href);\r\n        const payload = ResourceHelper.resolveRelations(entity);\r\n        this.setUrlsResource(entity);\r\n        let observable = ResourceHelper.getHttp().patch(uri, payload, { headers: ResourceHelper.headers, observe: 'response' });\r\n        return observable.pipe(map((response: HttpResponse<string>) => {\r\n            if (response.status >= 200 && response.status <= 207)\r\n                return ResourceHelper.instantiateResource(entity, response.body);\r\n            else if (response.status == 500) {\r\n                let body: any = response.body;\r\n                return observableThrowError(body.error);\r\n            }\r\n        }), catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** delete resource from a given entity data*/\r\n    public delete<T extends Resource>(entity: T): Observable<Object> {\r\n        const uri = ResourceHelper.getProxy(entity._links.self.href);\r\n        return ResourceHelper.getHttp().delete(uri, { headers: ResourceHelper.headers }).pipe(catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** whether a resource array has next page of results*/\r\n    public hasNext<T extends Resource>(resourceArray: ResourceArray<T>): boolean {\r\n        return resourceArray.next_uri != undefined;\r\n    }\r\n\r\n    /** whether a resource array has previous page of results*/\r\n    public hasPrev<T extends Resource>(resourceArray: ResourceArray<T>): boolean {\r\n        return resourceArray.prev_uri != undefined;\r\n    }\r\n\r\n    /** whether a resource array has first page of results*/\r\n    public hasFirst<T extends Resource>(resourceArray: ResourceArray<T>): boolean {\r\n        return resourceArray.first_uri != undefined;\r\n    }\r\n\r\n    /** whether a resource array has last page of results*/\r\n    public hasLast<T extends Resource>(resourceArray: ResourceArray<T>): boolean {\r\n        return resourceArray.last_uri != undefined;\r\n    }\r\n\r\n    /** get resource array next page of results*/\r\n    public next<T extends Resource>(resourceArray: ResourceArray<T>, type: { new(): T }): Observable<ResourceArray<T>> {\r\n        return resourceArray.next(type);\r\n    }\r\n\r\n    /** get resource array previous page of results*/\r\n    public prev<T extends Resource>(resourceArray: ResourceArray<T>, type: { new(): T }): Observable<ResourceArray<T>> {\r\n        return resourceArray.prev(type);\r\n    }\r\n\r\n    /** get resource array first page of results*/\r\n    public first<T extends Resource>(resourceArray: ResourceArray<T>, type: { new(): T }): Observable<ResourceArray<T>> {\r\n        return resourceArray.first(type);\r\n    }\r\n\r\n    /** get resource array last page of results*/\r\n    public last<T extends Resource>(resourceArray: ResourceArray<T>, type: { new(): T }): Observable<ResourceArray<T>> {\r\n        return resourceArray.last(type);\r\n    }\r\n\r\n    /** get resource array page of results given a page number*/\r\n    public page<T extends Resource>(resourceArray: ResourceArray<T>, type: { new(): T }, id: number): Observable<ResourceArray<T>> {\r\n        return resourceArray.page(type, id);\r\n    }\r\n\r\n    /** sort resource array with a given sorting params */\r\n    public sortElements<T extends Resource>(resourceArray: ResourceArray<T>, type: { new(): T }, ...sort: Sort[]): Observable<ResourceArray<T>> {\r\n        return resourceArray.sortElements(type, ...sort);\r\n    }\r\n\r\n    /** get resource array size*/\r\n    public size<T extends Resource>(resourceArray: ResourceArray<T>, type: { new(): T }, size: number): Observable<ResourceArray<T>> {\r\n        return resourceArray.size(type, size);\r\n    }\r\n\r\n    /** get resource URL from a given path*/\r\n    public getResourceUrl(resource?: string): string {\r\n        let url = ResourceService.getURL();\r\n        if (!url.endsWith('/')) {\r\n            url = url.concat('/');\r\n        }\r\n        if (resource) {\r\n            return url.concat(resource);\r\n        }\r\n        return url;\r\n    }\r\n\r\n    /** set proxy and root urls of given resource array */\r\n    private setUrls<T extends Resource>(result: ResourceArray<T>) {\r\n        result.proxyUrl = this.externalService.getProxyUri();\r\n        result.rootUrl = this.externalService.getRootUri();\r\n    }\r\n\r\n    /** set proxy and root urls of given resource */\r\n    private setUrlsResource<T extends Resource>(result: T) {\r\n        result.proxyUrl = this.externalService.getProxyUri();\r\n        result.rootUrl = this.externalService.getRootUri();\r\n    }\r\n}","import {of as observableOf, throwError as observableThrowError} from 'rxjs';\r\nimport {map, mergeMap} from 'rxjs/operators';\r\nimport {Resource} from './resource';\r\nimport {ResourceArray} from './resource-array';\r\nimport {Sort} from './sort';\r\nimport {ResourceService} from './resource.service';\r\nimport {SubTypeBuilder} from './subtype-builder';\r\nimport {isNullOrUndefined} from 'util';\r\nimport {Observable} from 'rxjs';\r\nimport {Injector} from \"@angular/core\";\r\n\r\n/** HAL param data model */\r\nexport type HalParam = { key: string, value: string | number | boolean };\r\n/** HAL option data model */\r\nexport type HalOptions = { notPaged?: boolean, size?: number, sort?: Sort[], params?: HalParam[] };\r\n\r\n/** REST API access interface */\r\nexport class RestService<T extends Resource> {\r\n    /** resource type */\r\n    private type: any;\r\n    /** resource path */\r\n    private resource: string;\r\n    /** resource array */\r\n    public resourceArray: ResourceArray<T>;\r\n    /** resource service */\r\n    public resourceService: ResourceService;\r\n    /** _embedded field name */\r\n    private _embedded: string = '_embedded';\r\n\r\n    /** constructor */\r\n    constructor(type: { new(): T },\r\n                resource: string,\r\n                private injector: Injector,\r\n                _embedded?: string) {\r\n        this.type = type;\r\n        this.resource = resource;\r\n        this.resourceService = injector.get(ResourceService);\r\n        if (!isNullOrUndefined(_embedded))\r\n            this._embedded = _embedded;\r\n    }\r\n\r\n    /** error handler */\r\n    protected handleError(error: any):Observable<never> {\r\n        return RestService.handleError(error);\r\n    }\r\n\r\n    /** error handler */\r\n    protected static handleError(error: any):Observable<never> {\r\n        return observableThrowError(error);\r\n    }\r\n\r\n    /** get all resources with optional options an subType params */\r\n    public getAll(options?: HalOptions, subType?: SubTypeBuilder, embeddedName?:String, ignoreProjection?:boolean): Observable<T[]> {\r\n        return this.resourceService.getAll(this.type, this.resource, this._embedded, options, subType,embeddedName, ignoreProjection).pipe(\r\n            mergeMap((resourceArray: ResourceArray<T>) => {\r\n                if (options && options.notPaged && !isNullOrUndefined(resourceArray.first_uri)) {\r\n                    options.notPaged = false;\r\n                    options.size = resourceArray.totalElements;\r\n                    return this.getAll(options);\r\n                } else {\r\n                    this.resourceArray = resourceArray;\r\n                    return observableOf(resourceArray.result);\r\n                }\r\n            }));\r\n    }\r\n\r\n    /** get resource from a given id */\r\n    public get(id: any): Observable<T> {\r\n        return this.resourceService.get(this.type, this.resource, id);\r\n    }\r\n\r\n    /** get resource from self link */\r\n    public getBySelfLink(selfLink: string): Observable<T> {\r\n        return this.resourceService.getBySelfLink(this.type, selfLink);\r\n    }\r\n\r\n    /** search resources from a given query string and optional options params */\r\n    public search(query: string, options?: HalOptions): Observable<T[]> {\r\n        return this.resourceService.search(this.type, query, this.resource, this._embedded, options).pipe(\r\n            mergeMap((resourceArray: ResourceArray<T>) => {\r\n                if (options && options.notPaged && !isNullOrUndefined(resourceArray.first_uri)) {\r\n                    options.notPaged = false;\r\n                    options.size = resourceArray.totalElements;\r\n                    return this.search(query, options);\r\n                } else {\r\n                    this.resourceArray = resourceArray;\r\n                    return observableOf(resourceArray.result);\r\n                }\r\n            }));\r\n    }\r\n\r\n    /** search resource from a given query string and optional options params */\r\n    public searchSingle(query: string, options?: HalOptions): Observable<T> {\r\n        return this.resourceService.searchSingle(this.type, query, this.resource, options);\r\n    }\r\n\r\n    /** search resources from a given custom query string and optional options params */\r\n    public customQuery(query: string, options?: HalOptions): Observable<T[]> {\r\n        return this.resourceService.customQuery(this.type, query, this.resource, this._embedded, options).pipe(\r\n            mergeMap((resourceArray: ResourceArray<T>) => {\r\n                if (options && options.notPaged && !isNullOrUndefined(resourceArray.first_uri)) {\r\n                    options.notPaged = false;\r\n                    options.size = resourceArray.totalElements;\r\n                    return this.customQuery(query, options);\r\n                } else {\r\n                    this.resourceArray = resourceArray;\r\n                    return observableOf(resourceArray.result);\r\n                }\r\n            }));\r\n    }\r\n\r\n\r\n    /** get resource array given a relation link */\r\n    public getByRelationArray(relation: string, builder?: SubTypeBuilder): Observable<T[]> {\r\n        return this.resourceService.getByRelationArray(this.type, relation, this._embedded, builder).pipe(\r\n            map((resourceArray: ResourceArray<T>) => {\r\n                this.resourceArray = resourceArray;\r\n                return resourceArray.result;\r\n            }));\r\n    }\r\n\r\n    /** get resource given a relation link */\r\n    public getByRelation(relation: string): Observable<T> {\r\n        return this.resourceService.getByRelation(this.type, relation);\r\n    }\r\n\r\n    /** count resources given a path */\r\n    public count(): Observable<number> {\r\n        return this.resourceService.count(this.resource);\r\n    }\r\n\r\n    /** create resource from self link and entity data*/\r\n    public create(entity: T) {\r\n        return this.resourceService.create(this.resource, entity);\r\n    }\r\n\r\n    /** update resource from a given entity data*/\r\n    public update(entity: T) {\r\n        return this.resourceService.update(entity);\r\n    }\r\n\r\n    /** patch resource from a given entity data*/\r\n    public patch(entity: T) {\r\n        return this.resourceService.patch(entity);\r\n    }\r\n\r\n    /** delete resource from a given entity data*/\r\n    public delete(entity: T): Observable<Object> {\r\n        return this.resourceService.delete(entity);\r\n    }\r\n\r\n    /** get total number of elements of resource array */\r\n    public totalElement(): number {\r\n        if (this.resourceArray && this.resourceArray.totalElements)\r\n            return this.resourceArray.totalElements;\r\n        return 0;\r\n    }\r\n\r\n    /** whether a resource array has first page of results*/\r\n    public hasFirst(): boolean {\r\n        if (this.resourceArray)\r\n            return this.resourceService.hasFirst(this.resourceArray);\r\n        return false;\r\n    }\r\n\r\n    /** whether a resource array has next page of results*/\r\n    public hasNext(): boolean {\r\n        if (this.resourceArray)\r\n            return this.resourceService.hasNext(this.resourceArray);\r\n        return false;\r\n    }\r\n\r\n    /** whether a resource array has previous page of results*/\r\n    public hasPrev(): boolean {\r\n        if (this.resourceArray)\r\n            return this.resourceService.hasPrev(this.resourceArray);\r\n        return false;\r\n    }\r\n\r\n    /** whether a resource array has last page of results*/\r\n    public hasLast(): boolean {\r\n        if (this.resourceArray)\r\n            return this.resourceService.hasLast(this.resourceArray);\r\n        return false;\r\n    }\r\n\r\n    /** get resource array next page of results*/\r\n    public next(): Observable<T[]> {\r\n        if (this.resourceArray)\r\n            return this.resourceService.next(this.resourceArray, this.type).pipe(\r\n                map((resourceArray: ResourceArray<T>) => {\r\n                    this.resourceArray = resourceArray;\r\n                    return resourceArray.result;\r\n                }));\r\n        else\r\n            observableThrowError('no resourceArray found');\r\n    }\r\n\r\n    /** get resource array previous page of results*/\r\n    public prev(): Observable<T[]> {\r\n        if (this.resourceArray)\r\n            return this.resourceService.prev(this.resourceArray, this.type).pipe(\r\n                map((resourceArray: ResourceArray<T>) => {\r\n                    this.resourceArray = resourceArray;\r\n                    return resourceArray.result;\r\n                }));\r\n        else\r\n            observableThrowError('no resourceArray found');\r\n    }\r\n\r\n    /** get resource array first page of results*/\r\n    public first(): Observable<T[]> {\r\n        if (this.resourceArray)\r\n            return this.resourceService.first(this.resourceArray, this.type)\r\n                .pipe(\r\n                    map((resourceArray: ResourceArray<T>) => {\r\n                        this.resourceArray = resourceArray;\r\n                        return resourceArray.result;\r\n                    })\r\n                );\r\n        else\r\n            observableThrowError('no resourceArray found');\r\n    }\r\n\r\n    /** get resource array last page of results*/\r\n    public last(): Observable<T[]> {\r\n        if (this.resourceArray)\r\n            return this.resourceService.last(this.resourceArray, this.type)\r\n                .pipe(\r\n                    map((resourceArray: ResourceArray<T>) => {\r\n                        this.resourceArray = resourceArray;\r\n                        return resourceArray.result;\r\n                    })\r\n                );\r\n        else\r\n            observableThrowError('no resourceArray found');\r\n    }\r\n\r\n    /** get resource array page of results given a page number*/\r\n    public page(pageNumber: number): Observable<T[]> {\r\n        if (this.resourceArray)\r\n            return this.resourceService.page(this.resourceArray, this.type, pageNumber).pipe(\r\n                map((resourceArray: ResourceArray<T>) => {\r\n                    this.resourceArray = resourceArray;\r\n                    return resourceArray.result;\r\n                }));\r\n        else\r\n            observableThrowError('no resourceArray found');\r\n    }\r\n}\r\n","import { User } from '../user/user.model';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n\r\n/** Account manager service */\r\n@Injectable()\r\nexport class AccountService extends RestService<User> {\r\n  \r\n\r\n  /** API resource path */\r\n  public ACCOUNT_API = 'account';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(User, \"account\", injector);\r\n  }\r\n\r\n  /** get logged in user account*/\r\n  get(): Observable<any> {\r\n    let result: Observable<Object>;\r\n    result = this.http.get(this.resourceService.getResourceUrl(this.ACCOUNT_API));\r\n    return result;\r\n  }\r\n  \r\n  /** save account*/\r\n  save(item: any): Observable<any> {\r\n    let result: Observable<Object>;\r\n    result = this.http.post(this.resourceService.getResourceUrl(this.ACCOUNT_API) , item);\r\n\r\n    return result;\r\n  }\r\n\r\n  /** change logged in user account*/  \r\n  changePassword(item: any): Observable<any> {\r\n    let result: Observable<Object>;\r\n    result = this.http.post(this.resourceService.getResourceUrl(this.ACCOUNT_API+\"/change-password\") , item);\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable} from 'rxjs-compat';\r\nimport {ResourceService} from '../angular-hal/src/lib/resource.service';\r\n//import * as moment from 'moment';\r\n\r\n/** Authentication service*/\r\n@Injectable()\r\nexport class AuthService {\r\n    \r\n  /** API resource path */\r\n  public AUTH_API = 'authenticate';\r\n\r\n    /** constructor*/\r\n    constructor(\r\n        private http: HttpClient,\r\n        private resourceService: ResourceService\r\n    ) {}\r\n    \r\n    /** get current user jwt token from session storage*/\r\n    getToken() {\r\n        return  sessionStorage.getItem('authenticationToken');\r\n    }\r\n\r\n    /** login operation */\r\n    login(credentials): Observable<any> {\r\n\r\n        const data = {\r\n            username: credentials.username,\r\n            password: credentials.password\r\n        };\r\n        return this.http.post(this.resourceService.getResourceUrl(this.AUTH_API), data, {observe : 'response'}).map(authenticateSuccess.bind(this));\r\n\r\n        function authenticateSuccess(resp) {\r\n            if (resp.ok) {\r\n                const jwt = resp.body.id_token;\r\n                this.storeAuthenticationToken(jwt);\r\n                //const expiresAt = moment().add( resp.headers.get('Token-Validity'),'milisecond');\r\n                //sessionStorage.setItem('expires_at', JSON.stringify(expiresAt.valueOf()));\r\n                return jwt;\r\n            }                    \r\n        }\r\n    }\r\n    \r\n    /** login operation with jwt token */\r\n    loginWithToken(jwt) {\r\n        if (jwt) {\r\n            this.storeAuthenticationToken(jwt);\r\n            return Promise.resolve(jwt);\r\n        } else {\r\n            return Promise.reject('auth-jwt-service Promise reject'); // Put appropriate error message here\r\n        }\r\n    }\r\n\r\n    /** store jwt token in session storage*/\r\n    storeAuthenticationToken(jwt) {\r\n       sessionStorage.setItem('authenticationToken', jwt);\r\n        \r\n    }\r\n    \r\n    /** check whether current user is logged in*/\r\n    public isLoggedIn() {\r\n        //return moment().isBefore(this.getExpiration());\r\n        return this.getToken();\r\n    }\r\n    \r\n    /** check whether current user is logged out*/\r\n    isLoggedOut() {\r\n        return !this.isLoggedIn();\r\n    }\r\n\r\n    /** logout operation */\r\n    logout(): Observable<any> {\r\n\r\n        return new Observable((observer) => {\r\n            //localStorage.removeItem('authenticationToken');\r\n            sessionStorage.removeItem('authenticationToken');\r\n            //sessionStorage.removeItem('expires_at');\r\n            observer.complete();\r\n        });\r\n    }\r\n\r\n\r\n    \r\n}\r\n","import { Observable } from 'rxjs';\r\nimport { HttpInterceptor, HttpRequest, HttpHandler, HttpEvent } from '@angular/common/http';\r\n\r\n/** Interceptor for authentication token in API requests */\r\nexport class AuthInterceptor implements HttpInterceptor {\r\n\r\n    /** constructor*/\r\n    constructor(\r\n    ) {\r\n    }\r\n    \r\n    /** request handler */\r\n    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n\r\n        const token = sessionStorage.getItem('authenticationToken');\r\n        if (!!token) {\r\n            request = request.clone({\r\n                setHeaders: {\r\n                    Authorization: 'Bearer ' + token\r\n                }\r\n            });\r\n        }\r\n        return next.handle(request);\r\n    }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Subject, Observable } from 'rxjs';\r\nimport { AccountService } from '../account/account.service';\r\n\r\n/** Principal service*/\r\n@Injectable()\r\nexport class Principal {\r\n    private userIdentity: any;\r\n    private authenticated = false;\r\n    private authenticationState = new Subject<any>();\r\n\r\n    /** constructor */\r\n    constructor(\r\n        private account: AccountService\r\n    ) {}\r\n\r\n    /** authenticate with given identity*/\r\n    authenticate(identity) {\r\n        this.userIdentity = identity;\r\n        this.authenticated = identity !== null;\r\n        this.authenticationState.next(this.userIdentity);\r\n    }\r\n\r\n    /** check whether current user has any of the given authorities */\r\n    hasAnyAuthority(authorities: string[]): Promise<boolean> {\r\n        return Promise.resolve(this.hasAnyAuthorityDirect(authorities));\r\n    }\r\n\r\n    /** check whether current user has any of the given authorities on the given territory */\r\n    hasAnyAuthorityOnTerritory(authorities: string[],territory: string ): Promise<boolean> {\r\n        return Promise.resolve(this.hasAnyAuthorityDirectOnTerritory(authorities,territory));\r\n    }\r\n\r\n    /** check whether current user has any of the given authorities without resolving promises*/\r\n    hasAnyAuthorityDirect(authorities: string[]): boolean {\r\n        if (!this.authenticated || !this.userIdentity || !this.userIdentity.authorities) {\r\n            return false;\r\n        }\r\n\r\n        for (let i = 0; i < authorities.length; i++) {\r\n            if (this.userIdentity.authorities.includes(authorities[i])) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /** check whether current user has any of the given authorities on the given territory without resolving promises */\r\n    hasAnyAuthorityDirectOnTerritory(authorities: string[],territory: string): boolean {\r\n        if (!this.authenticated || !this.userIdentity || !this.userIdentity.authorities) {\r\n            return false;\r\n        }\r\n\r\n        for (let i = 0; i < authorities.length; i++) {\r\n\r\n            if (this.userIdentity.authoritiesPerTerritory[territory] && this.userIdentity.authoritiesPerTerritory[territory].includes(authorities[i])) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /** check whether current user has the given authority */\r\n    hasAuthority(authority: string): Promise<boolean> {\r\n        if (!this.authenticated) {\r\n           return Promise.resolve(false);\r\n        }\r\n\r\n        return this.identity().then((id) => {\r\n            return Promise.resolve(id.authorities && id.authorities.includes(authority));\r\n        }, () => {\r\n            return Promise.resolve(false);\r\n        });\r\n    }\r\n\r\n    /** check whether current user has the given authority on the given territory*/\r\n    hasAuthorityOnTerritory(authority: string,territory: string): Promise<boolean> {\r\n        if (!this.authenticated) {\r\n           return Promise.resolve(false);\r\n        }\r\n\r\n        return this.identity().then((id) => {\r\n            return Promise.resolve(id.authoritiesPerTerritory && id.authoritiesPerTerritory[territory] && id.authoritiesPerTerritory[territory].includes(authority));\r\n        }, () => {\r\n            return Promise.resolve(false);\r\n        });\r\n    }\r\n\r\n    /** check user identity*/\r\n    identity(force?: boolean): Promise<any> {\r\n        if (force === true) {\r\n            this.userIdentity = undefined;\r\n        }\r\n\r\n        // check and see if we have retrieved the userIdentity data from the server.\r\n        // if we have, reuse it by immediately resolving\r\n        if (this.userIdentity) {\r\n            return Promise.resolve(this.userIdentity);\r\n        }\r\n\r\n        // retrieve the userIdentity data from the server, update the identity object, and then resolve.\r\n        return this.account.get().toPromise().then((response) => {\r\n            const account = response;\r\n            if (account) {\r\n                this.userIdentity = account;\r\n                this.authenticated = true;\r\n            } else {\r\n                this.userIdentity = null;\r\n                this.authenticated = false;\r\n            }\r\n            this.authenticationState.next(this.userIdentity);\r\n            return this.userIdentity;\r\n        }).catch((err) => {\r\n            this.userIdentity = null;\r\n            this.authenticated = false;\r\n            this.authenticationState.next(this.userIdentity);\r\n            return null;\r\n        });\r\n    }\r\n\r\n    /** check whether current user is authenticated */\r\n    isAuthenticated(): boolean {\r\n        return this.authenticated;\r\n    }\r\n\r\n    /** check whether current user identity is resolved */\r\n    isIdentityResolved(): boolean {\r\n        return this.userIdentity !== undefined;\r\n    }\r\n\r\n    /** get current user authentication state */\r\n    getAuthenticationState(): Observable<any> {\r\n        return this.authenticationState.asObservable();\r\n    }\r\n\r\n\r\n}\r\n","import { Injector, Injectable } from '@angular/core';\r\nimport { HttpInterceptor, HttpRequest, HttpHandler, HttpEvent, HttpErrorResponse } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { AuthService } from './auth.service';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Principal } from './principal.service';\r\n\r\n/** Interceptor for authentication expired response in API requests */\r\n@Injectable()\r\nexport class AuthExpiredInterceptor implements HttpInterceptor {\r\n\r\n    /** constructor */\r\n    constructor(\r\n        private router: Router,     \r\n        private authService: AuthService, \r\n        private principal: Principal\r\n    ) {}\r\n\r\n    /** request handler */\r\n    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n        return next.handle(request).do((event: HttpEvent<any>) => {}, (err: any) => {\r\n            const intercept: boolean = request.url.indexOf(\"/api/\") != -1;\r\n            //tractem request\r\n            if (intercept) {\r\n                if (err instanceof HttpErrorResponse) {\r\n                    if (err.status === 401) {                    \r\n                        this.authService.logout().subscribe();\r\n                        this.principal.authenticate(null);\r\n                        this.router.navigate(['/']);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AuthService } from './auth.service';\r\nimport { Principal } from './principal.service';\r\n\r\n/** Login service*/\r\n@Injectable()\r\nexport class LoginService {\r\n    \r\n    /** constructor */\r\n    constructor(\r\n        private authServerProvider: AuthService, \r\n        private principal: Principal\r\n    ) {}\r\n\r\n    /**Login operation*/\r\n    login(credentials, callback?) {\r\n        const cb = callback || function() {};\r\n\r\n        return new Promise((resolve, reject) => {\r\n            this.authServerProvider.login(credentials).subscribe((data) => {\r\n                this.principal.identity(true).then((account) => {\r\n                    // After the login the language will be changed to\r\n                    // the language selected by the user during his registration\r\n                    resolve(data);\r\n                });\r\n                \r\n                \r\n                return cb();\r\n            }, (err) => {\r\n                this.logout();\r\n                reject(err);\r\n                return cb(err);\r\n            });\r\n        });\r\n    }\r\n    /**login with jwt token */\r\n    loginWithToken(jwt) {\r\n        return this.authServerProvider.loginWithToken(jwt);\r\n    }\r\n\r\n    /** logout operation */\r\n    logout() {\r\n       this.authServerProvider.logout().subscribe();\r\n       this.principal.authenticate(null);\r\n    }\r\n}\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {ResourceService} from '../angular-hal/src/lib/resource.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DashboardService{\r\n\r\n    /** API resource path */\r\n    public DASHBOARD_API = 'dashboard/info';\r\n    public DASHBOARD_EMBEDDED= 'dashboard';\r\n    /** constructor */\r\n    constructor(       \r\n      private http: HttpClient,\r\n      private resourceService: ResourceService) {\r\n    }\r\n  \r\n    /** get all kpi */\r\n    getAll(): Observable<any> {\r\n      return this.http.get(this.resourceService.getResourceUrl(this.DASHBOARD_API)).map(response => response[this.DASHBOARD_EMBEDDED]);\r\n    }\r\n}\r\n","import {RestService} from '../angular-hal/src/lib/rest.service';\r\nimport { User } from './user.model';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\n\r\n/** User manager service */\r\n@Injectable()\r\nexport class UserService extends RestService<User> {\r\n  \r\n  /** API resource path */\r\n  public USER_API ='users';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(User, \"users\", injector);\r\n  }\r\n  \r\n  /** remove user*/\r\n  remove(item: User) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save user*/\r\n  save(item: any): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      result = this.http.put(item._links.self.href, item);\r\n    } else {\r\n      result = this.http.post(this.resourceService.getResourceUrl(this.USER_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n    \r\n  /** change password o given user id */\r\n  changePassword(id,item: any): Observable<any> {\r\n    let result: Observable<Object>;\r\n    result = this.http.post(this.resourceService.getResourceUrl(this.USER_API+\"/\"+id+\"/change-password\") , item);\r\n    return result;\r\n  }\r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\nimport { Territory } from '../territory/territory.model';\r\nimport { User } from './user.model';\r\n/**\r\n * User position model\r\n */\r\nexport class UserPosition extends Resource {\r\n  /** name */\r\n  public name: string;\r\n  /** email */\r\n  public email: string;\r\n  /** organization name*/\r\n  public organization: string;\r\n  /** system created date*/\r\n  public createdDate: any;\r\n  /** system dated date*/\r\n  public datedDate: any;\r\n  /** position territory*/\r\n  public territory: Territory;\r\n  /** user*/\r\n  public user: User;\r\n}\r\n","import {RestService} from '../angular-hal/src/lib/rest.service';\r\nimport { UserPosition } from './user-position.model';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\n\r\n/** User position manager service */\r\n@Injectable()\r\nexport class UserPositionService  extends RestService<UserPosition> {\r\n  \r\n\r\n  /** API resource path */\r\n  public USER_POSITION_API = 'user-positions';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(UserPosition, \"user-positions\", injector);\r\n  }\r\n  \r\n  /** remove user position*/\r\n  remove(item: UserPosition) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save user position*/\r\n  save(item: any): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      result = this.http.put(item._links.self.href, item);\r\n      if (item.user !=null){\r\n          item.substituteRelation('user',item.user).subscribe(result => {\r\n      \r\n      }, error => console.error(error));\r\n      }\r\n      if (item.territory !=null){\r\n          item.substituteRelation('territory',item.territory).subscribe(result => {\r\n      \r\n      }, error => console.error(error));\r\n      }\r\n    } else {\r\n      item.territory = item.territory._links.self.href;\r\n      item.user = item.user._links.self.href;\r\n  \r\n      result = this.http.post(this.resourceService.getResourceUrl(this.USER_POSITION_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\nimport { Role } from '../role/role.model';\r\nimport { Territory } from '../territory/territory.model';\r\nimport { User } from './user.model';\r\n\r\n/**\r\n * User permission model\r\n */\r\nexport class UserConfiguration extends Resource {\r\n  /** role */  \r\n  public role: Role;\r\n\r\n  /** role Children */  \r\n  public roleChildren: Role;\r\n  \r\n  /** territory */ \r\n  public territory: Territory;\r\n  /** user */\r\n  public user: User;\r\n}\r\n","import { RestService } from '../angular-hal/src/lib/rest.service';\r\nimport { UserConfiguration } from './user-configuration.model';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\n\r\n/** User configuration manager service */\r\n@Injectable()\r\nexport class UserConfigurationService extends RestService<UserConfiguration> {\r\n\r\n  /** API resource path */\r\n  public USER_CONFIGURATION_API = 'user-configurations';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector, private http: HttpClient) {\r\n    super(UserConfiguration, \"user-configurations\", injector);\r\n  }\r\n\r\n  /** remove user configuration*/\r\n  remove(item: UserConfiguration) {\r\n    return this.http.delete(item._links.self.href);\r\n\r\n  }\r\n\r\n  /** save user configuration*/\r\n  save(item: any): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links != null) {\r\n      result = this.http.put(item._links.self.href, item);\r\n    } else {\r\n      item.territory = item.territory._links.self.href;\r\n      item.role = item.role!=null?item.role._links.self.href:null;\r\n      item.user = item.user._links.self.href;\r\n      item.roleChildren = item.roleChildren!=null?item.roleChildren._links.self.href:null;\r\n      result = this.http.post(this.resourceService.getResourceUrl(this.USER_CONFIGURATION_API), item);\r\n    }\r\n    return result;\r\n  }\r\n\r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\nimport { TerritoryGroupType } from './territory-group-type.model';\r\nimport { TerritoryType } from './territory-type.model';\r\n\r\n/**\r\n * Territory model\r\n */\r\nexport class Territory extends Resource {\r\n  /** id */\r\n  public id: number;  \r\n  /** code */\r\n  public code: string;\r\n  /** name */\r\n  public name: string;\r\n  /** address*/\r\n  public territorialAuthorityAddress: string;\r\n  /** admin */\r\n  public territorialAuthorityName: string;\r\n  /** whether territory is blocked*/\r\n  public blocked: boolean;\r\n  /** comments*/\r\n  public note: string;\r\n  /** system created date*/\r\n  public createdDate: any;\r\n  /** contact email */  \r\n  public territorialAuthorityEmail: string;\r\n  /** extension */\r\n  public extent: string;\r\n  /** logo image URL */\r\n  public territorialAuthorityLogo: string;\r\n  /** contact organization name */\r\n  // public organizationName: string;\r\n  /** scope*/\r\n  public scope: string;\r\n  /** type */  \r\n  public type: TerritoryType;\r\n  /** group type */\r\n  public groupType: TerritoryGroupType;\r\n  /** territory members*/\r\n  public members: Territory[];\r\n\r\n}\r\n","import { Territory } from './territory.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { RestService } from '../angular-hal/src/lib/rest.service';\r\n\r\n/** Territory manager service */\r\n@Injectable()\r\nexport class TerritoryService extends RestService<Territory> {\r\n\r\n  /** API resource path */\r\n  public TERRITORY_API = 'territories';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector, private http: HttpClient) {\r\n    super(Territory, \"territories\", injector);\r\n  }\r\n\r\n  /** remove territory*/\r\n  remove(item: Territory) {\r\n    return this.http.delete(item._links.self.href);\r\n\r\n  }\r\n\r\n  /** save territory*/\r\n  save(item: Territory): Observable<any> {\r\n    let result: Observable<Object>;\r\n\r\n    let territoryGroupType:any = {}\r\n    territoryGroupType._links = {};\r\n    territoryGroupType._links.self = {};\r\n    territoryGroupType._links.self.href = \"\";\r\n\r\n    let territoryType:any = {}\r\n    territoryType._links = {};\r\n    territoryType._links.self = {};\r\n    territoryType._links.self.href = \"\";\r\n\r\n    if (item.type != null) {\r\n      territoryType = item.type;\r\n      if (typeof item.type._links != 'undefined') {\r\n        item.type = item.type._links.self.href;\r\n      } \r\n    }\r\n\r\n    if (item._links != null) {\r\n      //update relations\r\n      delete item.groupType;\r\n\r\n\r\n      // if (territoryGroupType._links.self.href == '') {\r\n      //   item.deleteRelation('groupType', territoryGroupType).subscribe(result => {\r\n      //   }, error => console.error(error));\r\n\r\n      // } else {\r\n      //   item.substituteRelation('groupType', territoryGroupType).subscribe(result => {\r\n      //   }, error => console.error(error));\r\n      // }\r\n\r\n      if (territoryType._links.self.href == '') {\r\n        item.deleteRelation('type', territoryType).subscribe(result => {\r\n        }, error => console.error(error));\r\n\r\n      } else {\r\n        item.substituteRelation('type', territoryType).subscribe(result => {\r\n        }, error => console.error(error));\r\n      }\r\n\r\n      delete item.type;\r\n      // if (item.type != null)\r\n      //   item.type = item.type._links.self.href;\r\n\r\n      result = this.http.put(item._links.self.href, item);\r\n    } else {\r\n      result = this.http.post(this.resourceService.getResourceUrl(this.TERRITORY_API), item);\r\n    }\r\n    return result;\r\n  }\r\n\r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\n\r\n/**\r\n * Territory type model\r\n */\r\nexport class TerritoryType extends Resource {\r\n   /** id */\r\n   public id: number;  \r\n  /** name */\r\n  public name: string;\r\n}\r\n","import { Territory } from './territory.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\nimport { TerritoryType } from './territory-type.model';\r\n\r\n/** TerritoryType manager service */\r\n@Injectable()\r\nexport class TerritoryTypeService extends RestService<TerritoryType> {\r\n  \r\n\r\n  /** API resource path */\r\n  public TERRITORYTYPE_API = 'territory-types';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(TerritoryType, \"territory-types\", injector);\r\n  }\r\n  \r\n  /** remove territory type*/\r\n  remove(item: TerritoryType) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save territory type*/\r\n  save(item: any): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      result = this.http.put(item._links.self.href, item);\r\n    } else {\r\n      result = this.http.post(this.resourceService.getResourceUrl(this.TERRITORYTYPE_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\n\r\n/**\r\n * Territory type model\r\n */\r\nexport class TerritoryGroupType extends Resource {\r\n  /** id */\r\n  public id: number;  \r\n  /** name */\r\n  public name: string;\r\n}\r\n","import { TerritoryGroupType } from './territory-group-type.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TerritoryGroupTypeService extends RestService<TerritoryGroupType> {\r\n  \r\n  /** API resource path */\r\n  public TERRITORYGROUPTYPE_API = 'territory-group-types';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(TerritoryGroupType, \"territory-group-types\", injector);\r\n  }\r\n  \r\n  /** remove territory*/\r\n  remove(item: TerritoryGroupType) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save territory*/\r\n  save(item: any): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      result = this.http.put(item._links.self.href, item);\r\n    } else {\r\n      result = this.http.post(this.resourceService.getResourceUrl(this.TERRITORYGROUPTYPE_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}","import {Resource} from '../angular-hal/src/lib/resource';\r\n\r\n/**\r\n * Role model\r\n */\r\nexport class Role extends Resource {\r\n  /** id */\r\n  public id: number;\r\n  /** name*/\r\n  public name: string;\r\n  /** comments*/\r\n  public description: string;\r\n\r\n}\r\n","import { Role } from './role.model';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n/** Role manager service */\r\n@Injectable()\r\nexport class RoleService extends RestService<Role> {\r\n  \r\n  /** API resource path */\r\n  public ROLE_API = 'roles';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(Role, \"roles\", injector);\r\n  }\r\n  \r\n  /** remove role*/\r\n  remove(item: Role) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save role*/\r\n  save(item: any): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      result = this.http.put(item._links.self.href, item);\r\n    } else {\r\n      result = this.http.post(this.resourceService.getResourceUrl(this.ROLE_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\n/**\r\n * Connection model\r\n */\r\nexport class Connection extends Resource {\r\n  /** id */\r\n  public id: number;\r\n  /** name*/\r\n  public name: string;\r\n  /** type*/\r\n  public type: string;\r\n  /** user*/\r\n  public user: string;\r\n  /** password*/\r\n  public password: string;\r\n  /** connection string*/\r\n  public connectionString: string;\r\n\r\n}\r\n","import { Connection } from './connection.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n/** Connection manager service */\r\n@Injectable()\r\nexport class ConnectionService extends RestService<Connection> {\r\n  \r\n\r\n  /** API resource path */\r\n  public CONNECTION_API = 'connections';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(Connection, \"connections\", injector);\r\n  }\r\n  \r\n  /** remove connection*/\r\n  remove(item: Connection) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save connection*/\r\n  save(item: Connection): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      \r\n      result = this.http.put(item._links.self.href, item);\r\n    } else {\r\n      result = this.http.post(this.resourceService.getResourceUrl(this.CONNECTION_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  testConnection(item:any): Observable<any> {\r\n    let result: Observable<Object>;\r\n    result=this.http.post(this.resourceService.getResourceUrl(this.CONNECTION_API)+\"/test\" , item);\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\n\r\nimport { Connection } from '../connection/connection.model';\r\nimport { Role } from '../role/role.model';\r\nimport { TaskType } from './task-type.model';\r\nimport { TaskGroup } from './task-group.model';\r\nimport { TaskAvailability } from './task-availability.model';\r\nimport { TaskParameter } from './task-parameter.model';\r\n\r\n//FIXME ensure task creation in admin app upon initialization (as it is done with Roles and default Users)\r\n/** GEOADMIN_task id */\r\nexport const GEOADMIN_TREE_TASK_ID:string  = \"geoadmin\";\r\n\r\nimport { TaskUI } from './task-ui.model';\r\nimport { Cartography } from '../cartography/cartography.model';\r\nimport { Service } from '../service/service.model';\r\n/** Task model */\r\nexport class Task extends Resource {\r\n  /** id */\r\n  public id?: number;\r\n  /** name */  \r\n  public name?: string;\r\n  /** order*/\r\n  public order?: Number;\r\n  /** system created date*/\r\n  public createdDate?: any;\r\n  /** task group*/\r\n  public group?: TaskGroup;\r\n  /** task type*/\r\n  public type?: TaskType;\r\n  /** task UI*/\r\n  public ui?: TaskUI;\r\n  /** parameters*/\r\n  public parameters?: TaskParameter[];\r\n  /** connection*/\r\n  public connection?: Connection;\r\n  /** roles*/\r\n  public roles?: Role[];\r\n  /** availabilities*/\r\n  public availabilities?: TaskAvailability[];\r\n\r\n  public cartography?: Cartography;\r\n\r\n  public service?: Service;\r\n\r\n  public properties?;\r\n}\r\n","import { Task } from './task.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n/** Task manager service */\r\n@Injectable()\r\nexport class TaskService extends RestService<Task> {\r\n\r\n    /** API resource path */\r\n    public CONNECTION_API = 'tasks';\r\n\r\n    /** constructor */\r\n    constructor(injector: Injector, private http: HttpClient) {\r\n        super(Task, \"tasks\", injector);\r\n    }\r\n\r\n    /** remove task*/\r\n    remove(item: Task) {\r\n        return this.http.delete(item._links.self.href);\r\n    }\r\n    \r\n    /** save task*/\r\n    save(item: Task): Observable<any> {\r\n        let result: Observable<Object>;\r\n\r\n        if (item._links != null) {\r\n\r\n            if (!item.service) {\r\n                let service:any = {}\r\n                service._links = {};\r\n                service._links.self = {};\r\n                service._links.self.href = \"\";\r\n                item.deleteRelation('service', service).subscribe(result => {\r\n                }, error => console.error(error)); \r\n            }else {\r\n                item.service._links.self.href=item.service._links.self.href.split(\"{\")[0]\r\n                item.substituteRelation('service', item.service).subscribe(result => {\r\n                }, error => console.error(error));\r\n                item.service = item.service._links.self.href\r\n            }\r\n            if (!item.cartography) {\r\n                let cartography:any = {}\r\n                cartography._links = {};\r\n                cartography._links.self = {};\r\n                cartography._links.self.href = \"\";\r\n                item.deleteRelation('cartography', cartography).subscribe(result => {\r\n                }, error => console.error(error)); \r\n            }else {\r\n                item.cartography._links.self.href=item.cartography._links.self.href.split(\"{\")[0]\r\n                item.substituteRelation('cartography', item.cartography).subscribe(result => {\r\n                }, error => console.error(error));\r\n                item.cartography = item.cartography._links.self.href\r\n            }\r\n\r\n            if (!item.connection) {\r\n                let connection:any = {}\r\n                connection._links = {};\r\n                connection._links.self = {};\r\n                connection._links.self.href = \"\";\r\n                item.deleteRelation('connection', connection).subscribe(result => {\r\n                }, error => console.error(error)); \r\n            }else {\r\n                item.connection._links.self.href=item.connection._links.self.href.split(\"{\")[0]\r\n                item.substituteRelation('connection', item.connection).subscribe(result => {\r\n                }, error => console.error(error));\r\n                item.connection = item.connection._links.self.href\r\n            }\r\n\r\n            if (!item.ui) {\r\n                // item.deleteRelation('ui', item.ui).subscribe(result => {\r\n                // }, error => console.error(error)); \r\n            }else {\r\n                item.ui._links.self.href=item.ui._links.self.href.split(\"{\")[0]\r\n                item.substituteRelation('ui', item.ui).subscribe(result => {\r\n                }, error => console.error(error));\r\n                item.ui = item.ui._links.self.href\r\n            }\r\n\r\n            if (!item.group) {\r\n                // item.deleteRelation('group', item.group).subscribe(result => {\r\n                // }, error => console.error(error)); \r\n            }else {\r\n                item.group._links.self.href=item.group._links.self.href.split(\"{\")[0]\r\n                item.substituteRelation('group', item.group).subscribe(result => {\r\n                }, error => console.error(error));\r\n                item.group = item.group._links.self.href\r\n            }\r\n\r\n            if (!item.type) {\r\n                // item.deleteRelation('type', item.type).subscribe(result => {\r\n                // }, error => console.error(error)); \r\n            }else {\r\n                item.type._links.self.href=item.type._links.self.href.split(\"{\")[0]\r\n                item.substituteRelation('type', item.type).subscribe(result => {\r\n                }, error => console.error(error));\r\n                item.type = item.type._links.self.href\r\n            }\r\n\r\n            if(item.roles){\r\n                let roles = [...item.roles];\r\n                delete item.roles;\r\n                item.substituteAllRelation('roles',roles).subscribe(result => {\r\n                }, error => console.error(error));\r\n            }\r\n\r\n            result = this.http.put(item._links.self.href, item);            \r\n        } else {\r\n            if(item.cartography){\r\n                item.cartography = item.cartography._links.self.href\r\n            }\r\n            if(item.connection){\r\n                item.connection = item.connection._links.self.href\r\n            }\r\n            if(item.service){\r\n                item.service = item.service._links.self.href\r\n            }\r\n            if(item.ui){\r\n                item.ui = item.ui._links.self.href\r\n            }\r\n            if(item.group){\r\n                item.group = item.group._links.self.href\r\n            }\r\n            if(item.type){\r\n                item.type = item.type._links.self.href\r\n            }\r\n            result = this.http.post(this.resourceService.getResourceUrl(this.CONNECTION_API), item);\r\n        }\r\n        return result;\r\n    }\r\n\r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\n/**\r\n * Task type model\r\n */\r\nexport class TaskType extends Resource {\r\n  /** name*/  \r\n  public name: string;\r\n\r\n}\r\n","import { TaskType } from './task-type.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n/** TaskType manager service */\r\n@Injectable()\r\nexport class TaskTypeService extends RestService<TaskType> {\r\n  \r\n\r\n  /** API resource path */\r\n  public CONNECTION_API = 'task-types';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(TaskType, \"task-types\", injector);\r\n  }\r\n  \r\n  /** remove task type*/\r\n  remove(item: TaskType) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save task type*/\r\n  save(item: TaskType): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      \r\n      result = this.http.put(item._links.self.href, item);\r\n    } else {\r\n      result = this.http.post(this.resourceService.getResourceUrl(this.CONNECTION_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\n/**\r\n * Task group model\r\n */\r\nexport class TaskGroup extends Resource {\r\n  /** id */\r\n  public id: number;  \r\n  /** name*/  \r\n  public name: string;\r\n\r\n}\r\n","import { TaskGroup } from './task-group.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n/** Task group manager service */\r\n@Injectable()\r\nexport class TaskGroupService extends RestService<TaskGroup> {\r\n  \r\n\r\n  /** API resource path */\r\n  public CONNECTION_API = 'task-groups';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(TaskGroup, \"task-groups\", injector);\r\n  }\r\n  \r\n  /** remove task group*/\r\n  remove(item: TaskGroup) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save task group*/\r\n  save(item: TaskGroup): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      \r\n      result = this.http.put(item._links.self.href, item);\r\n    } else {\r\n      result = this.http.post(this.resourceService.getResourceUrl(this.CONNECTION_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\nimport {Task} from './task.model';  \r\n/**\r\n * Task parameter model\r\n */\r\nexport class TaskParameter extends Resource {\r\n  /** name*/  \r\n  public name: string;\r\n  \r\n  /** type*/\r\n  public type: string;\r\n    \r\n  /** value*/\r\n  public value: string;\r\n  \r\n  /** order*/  \r\n  public order: Number;\r\n  \r\n  /** task*/  \r\n  public task:Task;\r\n\r\n}\r\n","import { TaskParameter } from './task-parameter.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n/** Task parameter manager service */\r\n@Injectable() \r\nexport class TaskParameterService extends RestService<TaskParameter> {\r\n  \r\n\r\n  /** API resource path */\r\n  public TASK_PARAMETER_API = 'task-parameters';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(TaskParameter, \"task-parameters\", injector);\r\n  }\r\n  \r\n  /** remove task parameter*/\r\n  remove(item: TaskParameter) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save task parameter*/\r\n  save(item: TaskParameter): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      result = this.http.put(item._links.self.href, item);\r\n      if (item.task !=null){\r\n          item.substituteRelation('task',item.task).subscribe(result => {\r\n      \r\n      }, error => console.error(error));\r\n      }\r\n      \r\n    } else {\r\n      item.task = item.task._links.self.href;\r\n  \r\n      result = this.http.post(this.resourceService.getResourceUrl(this.TASK_PARAMETER_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\nimport { Territory } from '../territory/territory.model';\r\nimport { Task } from './task.model';\r\n/**\r\n * Task availability model\r\n */\r\nexport class TaskAvailability extends Resource {\r\n  /** territory*/\r\n  public territory: Territory;\r\n  /** task*/\r\n  public task: Task;\r\n}\r\n","import { TaskAvailability } from './task-availability.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n/** Task availability manager service */\r\n@Injectable() \r\nexport class TaskAvailabilityService extends RestService<TaskAvailability> {\r\n  \r\n\r\n  /** API resource path */\r\n  public TASK_AVAILABILITY_API = 'task-availabilities';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(TaskAvailability, \"task-availabilities\", injector);\r\n  }\r\n  \r\n  /** remove task availability*/\r\n  remove(item: TaskAvailability) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save task availability*/\r\n  save(item: TaskAvailability): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      result = this.http.put(item._links.self.href, item);\r\n      if (item.task !=null){\r\n          item.substituteRelation('task',item.task).subscribe(result => {\r\n      \r\n      }, error => console.error(error));\r\n      }\r\n      if (item.territory !=null){\r\n          item.substituteRelation('territory',item.territory).subscribe(result => {\r\n      \r\n      }, error => console.error(error));\r\n      }\r\n    } else {\r\n      item.territory = item.territory._links.self.href;\r\n      item.task = item.task._links.self.href;\r\n  \r\n      result = this.http.post(this.resourceService.getResourceUrl(this.TASK_AVAILABILITY_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\n/**\r\n * Task UI model\r\n */\r\nexport class TaskUI extends Resource {\r\n  /** name*/\r\n  public name: string;\r\n  \r\n  /** tooltip*/  \r\n  public tooltip: string;\r\n    \r\n  /** order*/ \r\n  public order: number;\r\n\r\n}\r\n","import { TaskUI } from './task-ui.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n/** Task UI manager service */\r\n@Injectable()\r\nexport class TaskUIService extends RestService<TaskUI> {\r\n  \r\n\r\n  /** API resource path */\r\n  public CONNECTION_API = 'task-uis';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(TaskUI, \"task-uis\", injector);\r\n  }\r\n  \r\n  /** remove task UI*/\r\n  remove(item: TaskUI) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save task UI*/\r\n  save(item: TaskUI): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {      \r\n      result = this.http.put(item._links.self.href, item);\r\n    } else {\r\n      result = this.http.post(this.resourceService.getResourceUrl(this.CONNECTION_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\nimport { Language } from './language.model';\r\n\r\n\r\n/** Task model */\r\nexport class Translation extends Resource {\r\n  /** id */\r\n  public id: number;\r\n  /** id */\r\n  public element: number;\r\n  /** name */\r\n  public translation: string;\r\n  /** column */\r\n  public column: string;\r\n  /** name */\r\n  public language: Language;\r\n  /** name */\r\n  public languageName?: string;\r\n  /** name */\r\n  public languageShortname?: string;\r\n\r\n\r\n\r\n}\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\nimport { Translation } from './translation.model';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TranslationService extends RestService<Translation> {\r\n\r\n  /** API resource path */\r\n  public TRANSLATION_API = 'translations';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(Translation, \"translations\", injector);\r\n  }\r\n  \r\n  /** remove translation*/\r\n  remove(item: Translation) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save translation*/\r\n  save(item: Translation): Observable<any> {\r\n    let result: Observable<Object>;\r\n\r\n    let language:any = {}\r\n    language._links = {};\r\n    language._links.self = {};\r\n    language._links.self.href = \"\";\r\n\r\n    if (item.language != null) {\r\n      language = item.language;\r\n      if (typeof item.language._links != 'undefined') {\r\n        item.language = item.language._links.self.href;\r\n      } \r\n    }\r\n\r\n    if (item._links!=null) {\r\n      delete item.language;\r\n      // if (language._links.self.href == '') {\r\n      //   item.deleteRelation('language', language).subscribe(result => {\r\n      //   }, error => console.error(error));\r\n\r\n      // } else {\r\n      //   item.substituteRelation('language', language).subscribe(result => {\r\n      //   }, error => console.error(error));\r\n      // }\r\n      result = this.http.put(item._links.self.href, item);\r\n    } else {\r\n      result = this.http.post(this.resourceService.getResourceUrl(this.TRANSLATION_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\n\r\n\r\n/** Task model */\r\nexport class Language extends Resource {\r\n  /** id */\r\n  public id: number;\r\n  /** name */\r\n  public shortname: string;\r\n  /** name */\r\n  public name: string;\r\n}\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\nimport { Language } from './language.model';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class LanguageService extends RestService<Language> {\r\n\r\n  /** API resource path */\r\n  public LANGUAGES_API = 'languages';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(Language, \"languages\", injector);\r\n  }\r\n  \r\n  /** remove translation*/\r\n  remove(item: Language) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save translation*/\r\n  save(item: Language): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      result = this.http.put(item._links.self.href, item);\r\n    } else {\r\n      result = this.http.post(this.resourceService.getResourceUrl(this.LANGUAGES_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\nimport {Connection} from '../connection/connection.model';\r\nimport {ServiceParameter} from './service-parameter.model';\r\n/**\r\n * Service model\r\n */\r\nexport class Service extends Resource {\r\n  /** id */\r\n  public id: number;\r\n  /** name*/\r\n  public name: string;\r\n    \r\n  /** type*/\r\n  public type: string;\r\n\r\n  /** url*/  \r\n  public serviceURL: string;\r\n\r\n  /** projections*/  \r\n  public supportedSRS: string;\r\n  \r\n  /** legend*/\r\n  public legend: string;\r\n\r\n  /** infoUrl*/  \r\n  public infoUrl: string;\r\n  \r\n  /** system created date*/\r\n  public createdDate: any;\r\n\r\n  /** connection*/\r\n  public connection: Connection;\r\n  \r\n  /** parameters*/  \r\n  public parameters: ServiceParameter[];\r\n\r\n  /** whether service is blocked*/\r\n  public blocked: boolean;\r\n}\r\n","import { Service } from './service.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n/** Service manager service */\r\n@Injectable()\r\nexport class ServiceService extends RestService<Service> {\r\n\r\n  /** API resource path */\r\n  public SERVICE_API = 'services';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(Service, \"services\", injector);\r\n  }\r\n  \r\n  /** remove service*/\r\n  remove(item: Service) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save service*/\r\n  save(item: Service): Observable<any> {\r\n    let result: Observable<Object>;\r\n    let serviceConnection = item.connection;\r\n\r\n    if (item.connection!=null){\r\n        if (typeof item.connection._links!= 'undefined') { \r\n            item.connection = item.connection._links.self.href;\r\n        } else {\r\n            serviceConnection._links= {};\r\n            serviceConnection._links.self = {};\r\n            serviceConnection._links.self.href=\"\";\r\n        }        \r\n     }\r\n\r\n    if (item._links!=null) {     \r\n      result = this.http.put(item._links.self.href, item);       \r\n    } else {\r\n      result = this.http.post(this.resourceService.getResourceUrl(this.SERVICE_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\n\r\n/**\r\n * Service model\r\n */\r\nexport class ConfigurationParameter extends Resource {\r\n  /** id */\r\n  public id: number;\r\n  /** name*/\r\n  public name: string;\r\n    \r\n  /** value*/\r\n  public value: string;\r\n\r\n}\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport { ConfigurationParameter } from './configuration-parameters.model';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ConfigurationParametersService extends RestService<ConfigurationParameter> {\r\n\r\n  /** API resource path */\r\n  public CONFIGURATION_PARAMETERS_API = 'configuration-parameters';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(ConfigurationParameter, \"configuration-parameters\", injector);\r\n  }\r\n  \r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\nimport {Service} from './service.model'; \r\n/**\r\n * Service parameter model\r\n */\r\nexport class ServiceParameter extends Resource {\r\n  /** name*/\r\n  public name: string;\r\n  \r\n  /** type*/\r\n  public type: string;\r\n    \r\n  /** value*/  \r\n  public value: string;\r\n  \r\n  /** service*/\r\n  public service: Service;\r\n\r\n}\r\n","import { ServiceParameter } from './service-parameter.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n/** Service parameter manager service */\r\n@Injectable() \r\nexport class ServiceParameterService extends RestService<ServiceParameter> {\r\n\r\n  /** API resource path */\r\n  public SERVICE_PARAMETER_API = 'service-parameters';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(ServiceParameter, \"service-parameters\", injector);\r\n  }\r\n  \r\n  /** remove service parameter*/\r\n  remove(item: ServiceParameter) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save service parameter*/\r\n  save(item: ServiceParameter): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      \r\n      \r\n      if (item.service !=null){\r\n          let service =  item.service;\r\n          delete item.service;\r\n          item.substituteRelation('service',service).subscribe(result => {            \r\n          \r\n      }, error => console.error(error));\r\n      }\r\n      result = this.http.put(item._links.self.href, item);\r\n      \r\n      \r\n    } else {\r\n      item.service = item.service._links.self.href;\r\n  \r\n      result = this.http.post(this.resourceService.getResourceUrl(this.SERVICE_PARAMETER_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\n/**\r\n * Capabilitie model\r\n */\r\nexport class Capabilitie extends Resource {\r\n  /** url */\r\n  public url: string;\r\n}\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\nimport { Capabilitie } from './capabilitie.model';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CapabilitiesService extends RestService<Capabilitie>  {\r\n\r\n  /** API resource path */\r\n  public CAPABILITIES_API = 'helpers/capabilities?url=';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(Capabilitie, \"helpers/capabilities?url=\", injector);\r\n  }\r\n\r\n    /** save service*/\r\n    getInfo(url: string): Observable<any> {\r\n      let result: Observable<Object>;\r\n      if(url){\r\n        const headerDict = {\r\n          'Charset': 'UTF-8'\r\n        }\r\n        \r\n        const requestOptions = {                                                                                                                                                                                 \r\n          headers: new HttpHeaders(headerDict), \r\n        };\r\n        let finalUrl = this.resourceService.getResourceUrl(this.CAPABILITIES_API);\r\n        finalUrl = finalUrl.concat(url);\r\n        console.log(finalUrl);\r\n        result = this.http.get(finalUrl, requestOptions);\r\n      }\r\n      return result;\r\n \r\n    }\r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\n/**\r\n * Info model\r\n */\r\nexport class Info extends Resource {\r\n  /** url */\r\n  public url: string;\r\n}","import { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\nimport { Info } from './info.model';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class GetInfoService extends RestService<Info>  {\r\n\r\n  /** API resource path */\r\n  public INFO_API = 'helpers/feature-type?url=';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(Info, \"helpers/feature-type?url=\", injector);\r\n  }\r\n\r\n    /** save service*/\r\n    getInfo(url: string): Observable<any> {\r\n      let result: Observable<Object>;\r\n      if(url){\r\n        const headerDict = {\r\n          'Charset': 'UTF-8'\r\n        }\r\n        \r\n        const requestOptions = {                                                                                                                                                                                 \r\n          headers: new HttpHeaders(headerDict), \r\n        };\r\n        let finalUrl = this.resourceService.getResourceUrl(this.INFO_API);\r\n        finalUrl = finalUrl.concat(url);\r\n        console.log(finalUrl);\r\n        result = this.http.get(finalUrl, requestOptions);\r\n      }\r\n      return result;\r\n \r\n    }\r\n  \r\n}","import {Resource} from '../angular-hal/src/lib/resource';\r\nimport {Service} from '../service/service.model';\r\nimport {Connection} from '../connection/connection.model';\r\nimport {CartographyAvailability} from './cartography-availability.model';\r\nimport { CartographyStyle } from './cartography-style.model';\r\n/**\r\n * Cartography\r\n */\r\nexport class Cartography extends Resource {\r\n  /** id */\r\n  public id: number;  \r\n  /** name*/\r\n  public name: string;\r\n  \r\n  /** type*/\r\n  public type : string;\r\n\r\n  /** service*/\r\n  public service : Service;\r\n\r\n  /** order*/  \r\n  public order: Number; \r\n\r\n  /** description*/  \r\n  public description: String;\r\n\r\n  /** source*/  \r\n  public source: String;\r\n\r\n  /** whether cartography is blocked*/\r\n  public blocked: boolean;  \r\n\r\n  /** apply filter to get map*/\r\n  public applyFilterToGetMap: boolean;  \r\n\r\n  /** apply filter to get feature information*/\r\n  public applyFilterToGetFeatureInfo: boolean;  \r\n\r\n  /** apply filter to spatial selection*/\r\n  public applyFilterToSpatialSelection: boolean;  \r\n\r\n  /** selectable layers*/\r\n  public selectableLayers: string[];\r\n\r\n  /** transparency*/ \r\n  public transparency: Number;\r\n\r\n  /** whether layer is queryable*/  \r\n  public queryable: Boolean;\r\n\r\n  /** whether layer is queryable*/ \r\n  public queryAct: Boolean;\r\n\r\n  /** query layer*/\r\n  public queryLay: string;\r\n\r\n  /** system created date*/\r\n  public createdDate: any;\r\n\r\n  /** minimum scale*/\r\n  public minimumScale: Number;\r\n\r\n  /** maximum scale*/\r\n  public maximumScale: Number;\r\n\r\n  /** layers*/  \r\n  public layers: string;\r\n  \r\n  /** connection*/\r\n  public connection: Connection;\r\n\r\n  /** queryableFeatureEnabled */\r\n  public queryableFeatureEnabled: Boolean;\r\n\r\n    /** queryableLayers */\r\n  public queryableFeatureAvailable: Boolean;\r\n\r\n    /** queryableLayers */\r\n  public queryableLayers: string[];\r\n\r\n  /** availabilities*/\r\n  public availabilities : CartographyAvailability[];\r\n\r\n  /** whether layer is queryable*/ \r\n  public selectableFeatureEnabled: Boolean;\r\n\r\n  /** selection layer*/\r\n  public selectionLayer: string;\r\n\r\n  /** selection service*/  \r\n  public selectionService: Service;\r\n\r\n  /** legend tip*/  \r\n  public legendType: string;\r\n  \r\n  /** legend url*/\r\n  public legendURL: string;\r\n\r\n  /** whether layer is editable*/\r\n  public editable: Boolean;\r\n\r\n  /** metadata URL*/\r\n  public metadataURL: string;\r\n\r\n  /** metadata URL*/\r\n  public datasetURL: string;\r\n\r\n  /** whether layer is themable*/\r\n  public thematic: Boolean;\r\n  \r\n  /** geometry type*/\r\n  public geometryType: string;\r\n\r\n  public styles?: CartographyStyle[]\r\n\r\n  public useAllStyles: boolean;\r\n  \r\n\r\n}\r\n","import { Cartography } from './cartography.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { RestService } from '../angular-hal/src/lib/rest.service';\r\nimport { Connection } from '../connection/connection.model';\r\nimport { Service } from '../service/service.model';\r\n\r\n/** Cartography manager service */\r\n@Injectable()\r\nexport class CartographyService extends RestService<Cartography> {\r\n\r\n  /** API resource path */\r\n  public CARTOGRAPHY_API = 'cartographies';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector, private http: HttpClient) {\r\n    super(Cartography, \"cartographies\", injector);\r\n  }\r\n\r\n  /** remove cartography*/\r\n  remove(item: Cartography) {\r\n    return this.http.delete(item._links.self.href);\r\n\r\n  }\r\n\r\n  /** save cartography*/\r\n  save(item: Cartography): Observable<any> {\r\n    let result: Observable<Object>;\r\n\r\n    let cartographyConnection:any={};\r\n    cartographyConnection._links = {};\r\n    cartographyConnection._links.self = {};\r\n    cartographyConnection._links.self.href = \"\";\r\n     \r\n    let cartographyService:any={};\r\n    cartographyService._links = {};\r\n    cartographyService._links.self = {};\r\n    cartographyService._links.self.href = \"\";\r\n    \r\n    let cartographySelectionService:any = {};\r\n    cartographySelectionService._links = {};\r\n    cartographySelectionService._links.self = {};\r\n    cartographySelectionService._links.self.href = \"\";\r\n\r\n    if (item.service != null) {\r\n      cartographyService=  item.service;\r\n      if (typeof item.service._links != 'undefined') {\r\n        item.service = item.service._links.self.href;\r\n      }\r\n    }\r\n\r\n    if (item.selectionService != null) {\r\n      cartographySelectionService = item.selectionService\r\n      if (typeof item.selectionService._links != 'undefined') {\r\n        item.selectionService = item.selectionService._links.self.href;\r\n      }\r\n    }\r\n\r\n    if (item.connection != null) {\r\n      cartographyConnection=  item.connection;\r\n      if (typeof item.connection._links != 'undefined') {\r\n        item.connection = item.connection._links.self.href;\r\n      }\r\n    }\r\n\r\n    if (item._links != null) {\r\n\r\n      //update relations\r\n      delete item.connection;\r\n      delete item.service;\r\n      delete item.selectionService;\r\n\r\n      // if (cartographyConnection._links.self.href == '' && cartographyConnection) {\r\n      //   item.deleteRelation('spatialSelectionConnection', cartographyConnection).subscribe(result => {\r\n      //   }, error => console.error(error));\r\n      // } else {\r\n      //   item.substituteRelation('spatialSelectionConnection', cartographyConnection).subscribe(result => {\r\n      //   }, error => console.error(error));\r\n      // }\r\n\r\n      if (cartographyService._links.self.href == '') {\r\n        item.deleteRelation('service', cartographyService).subscribe(result => {\r\n        }, error => console.error(error));\r\n      } else {\r\n        item.substituteRelation('service', cartographyService).subscribe(result => {\r\n        }, error => console.error(error));\r\n      }\r\n\r\n      if (cartographySelectionService._links.self.href == '' && cartographySelectionService) {\r\n        item.deleteRelation('spatialSelectionService', cartographySelectionService).subscribe(result => {\r\n        }, error => console.error(error));\r\n      } else {\r\n        item.substituteRelation('spatialSelectionService', cartographySelectionService).subscribe(result => {\r\n        }, error => console.error(error));\r\n      }\r\n\r\n      result = this.http.put(item._links.self.href, item);\r\n\r\n    } else {\r\n      result = this.http.post(this.resourceService.getResourceUrl(this.CARTOGRAPHY_API), item);\r\n    }\r\n    return result;\r\n  }\r\n\r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\nimport {Cartography} from './cartography.model';\r\nimport {Role} from '../role/role.model';\r\n/**\r\n * Cartography group\r\n */\r\nexport class CartographyGroup extends Resource {\r\n  /** id */\r\n  public id: number;  \r\n  /** name*/\r\n  public name: string;\r\n  /** type*/\r\n  public type: string;\r\n  /** members*/\r\n  public members: Cartography[];\r\n  /** roles*/\r\n  public roles: Role[];\r\n\r\n}\r\n","import { CartographyGroup } from './cartography-group.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n/** CartographyGroup manager service */\r\n@Injectable()\r\nexport class CartographyGroupService extends RestService<CartographyGroup> {\r\n  \r\n\r\n  /** API resource path */\r\n  public CARTOGRAPHY_GROUP_API ='cartography-groups';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(CartographyGroup, \"cartography-groups\", injector);\r\n  }\r\n  \r\n  /** remove cartography group*/\r\n  remove(item: CartographyGroup) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save cartography group*/\r\n  save(item: CartographyGroup): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      result = this.http.put(item._links.self.href, item);\r\n    } else {\r\n      result = this.http.post(this.resourceService.getResourceUrl(this.CARTOGRAPHY_GROUP_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\nimport { Territory } from '../territory/territory.model';\r\nimport { Cartography } from './cartography.model';\r\n/**\r\n * Cartography availability model\r\n */\r\nexport class CartographyAvailability extends Resource {\r\n  /** territory*/\r\n  public territory: Territory;\r\n  \r\n  /** system created date*/\r\n  public createdDate: any;\r\n  \r\n  /** cartography*/\r\n  public cartography: Cartography;\r\n}\r\n","import { CartographyAvailability } from './cartography-availability.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n/** CartographyAvailability manager service */\r\n@Injectable() \r\nexport class CartographyAvailabilityService extends RestService<CartographyAvailability> {\r\n  \r\n\r\n  /** API resource path */\r\n  public CARTOGRAPHY_AVAILABILITY_API = 'cartography-availabilities';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(CartographyAvailability, \"cartography-availabilities\", injector);\r\n  }\r\n  \r\n  /** remove cartography availability*/\r\n  remove(item: CartographyAvailability) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save cartography availability*/\r\n  save(item: CartographyAvailability): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      result = this.http.put(item._links.self.href, item);\r\n      if (item.cartography !=null){\r\n          item.substituteRelation('cartography',item.cartography).subscribe(result => {\r\n      \r\n      }, error => console.error(error));\r\n      }\r\n      if (item.territory !=null){\r\n          item.substituteRelation('territory',item.territory).subscribe(result => {\r\n      \r\n      }, error => console.error(error));\r\n      }\r\n    } else {\r\n      item.territory = item.territory._links.self.href;\r\n      item.cartography = item.cartography._links.self.href;\r\n  \r\n      result = this.http.post(this.resourceService.getResourceUrl(this.CARTOGRAPHY_AVAILABILITY_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\nimport { TerritoryType } from '../territory/territory-type.model';\r\nimport { Cartography } from './cartography.model';\r\n/**\r\n * Cartography availability model\r\n */\r\nexport class CartographyFilter extends Resource {\r\n \r\n  /** name*/\r\n  public name: string;\r\n\r\n  /** required */\r\n  public required: boolean;\r\n\r\n  /** type*/\r\n  public type: string;\r\n\r\n  /** Territorial level. */\r\n  public territorialLevel: TerritoryType;\r\n  \r\n  /** column */\r\n  public column: string;\r\n\r\n  /** values*/  \r\n  public values: string;\r\n\r\n  /** value*/  \r\n  public valueType: string;\r\n\r\n  /** cartography*/\r\n  public cartography: Cartography;\r\n\r\n\r\n}\r\n","import { CartographyFilter } from './cartography-filter.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n/** CartographyFilter manager service */\r\n@Injectable() \r\nexport class CartographyFilterService extends RestService<CartographyFilter> {\r\n  \r\n\r\n  /** API resource path */\r\n  public CARTOGRAPHY_FILTER_API = 'cartography-filters';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(CartographyFilter, \"cartography-filters\", injector);\r\n  }\r\n  \r\n  /** remove cartography filter*/\r\n  remove(item: CartographyFilter) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save cartography availability*/\r\n  save(item: CartographyFilter): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      result = this.http.put(item._links.self.href, item);\r\n      if (item.cartography !=null){\r\n          item.substituteRelation('cartography',item.cartography).subscribe(result => {\r\n      }, error => console.error(error));\r\n      }\r\n\r\n      if(item.territorialLevel != null && item.territorialLevel != undefined ){\r\n        item.substituteRelation('territorialLevel',item.territorialLevel).subscribe(result => {\r\n        }, error => console.error(error));\r\n      }\r\n     \r\n    } else {\r\n      \r\n      item.cartography = item.cartography._links.self.href;\r\n      item.territorialLevel=item.territorialLevel._links.self.href;\r\n      \r\n      result = this.http.post(this.resourceService.getResourceUrl(this.CARTOGRAPHY_FILTER_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\nimport {Cartography} from './cartography.model'; \r\n/**\r\n * Service parameter model\r\n */\r\nexport class CartographyParameter extends Resource {\r\n  /** name*/\r\n  public name: string;\r\n  \r\n  /** type*/\r\n  public type: string;\r\n    \r\n  /** value*/  \r\n  public value: string;\r\n  \r\n  /** order*/  \r\n  public order: string;\r\n\r\n  /** cartography*/\r\n  public cartography: Cartography;\r\n\r\n}\r\n","import { CartographyParameter } from './cartography-parameter.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n/** Service parameter manager service */\r\n@Injectable() \r\nexport class CartographyParameterService extends RestService<CartographyParameter> {\r\n\r\n  /** API resource path */\r\n  public CARTOGRAPHY_PARAMETER_API = 'cartography-parameters';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(CartographyParameter, \"cartography-parameters\", injector);\r\n  }\r\n  \r\n  /** remove service parameter*/\r\n  remove(item: CartographyParameter) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save service parameter*/\r\n  save(item: CartographyParameter): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      \r\n      \r\n      if (item.cartography !=null){\r\n          let cartography =  item.cartography;\r\n          delete item.cartography;\r\n          item.substituteRelation('cartography',cartography).subscribe(result => {            \r\n          \r\n      }, error => console.error(error));\r\n      }\r\n      result = this.http.put(item._links.self.href, item);\r\n      \r\n      \r\n    } else {\r\n      item.cartography = item.cartography._links.self.href;\r\n  \r\n      result = this.http.post(this.resourceService.getResourceUrl(this.CARTOGRAPHY_PARAMETER_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import { CartographyParameter } from './cartography-parameter.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n/** Service parameter manager service */\r\n@Injectable() \r\nexport class CartographySpatialSelectionParameterService extends RestService<CartographyParameter> {\r\n\r\n  /** API resource path */\r\n  public CARTOGRAPHY_SPATIAL_SELECTION_PARAMETER_API = 'cartography-spatial-selection-parameters';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(CartographyParameter, \"cartography-spatial-selection-parameters\", injector);\r\n  }\r\n  \r\n  /** remove service parameter*/\r\n  remove(item: CartographyParameter) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save service parameter*/\r\n  save(item: CartographyParameter): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      \r\n      \r\n      if (item.cartography !=null){\r\n          let cartography =  item.cartography;\r\n          delete item.cartography;\r\n          item.substituteRelation('cartography',cartography).subscribe(result => {            \r\n          \r\n      }, error => console.error(error));\r\n      }\r\n      result = this.http.put(item._links.self.href, item);\r\n      \r\n      \r\n    } else {\r\n      item.cartography = item.cartography._links.self.href;\r\n  \r\n      result = this.http.post(this.resourceService.getResourceUrl(this.CARTOGRAPHY_SPATIAL_SELECTION_PARAMETER_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\nimport {Cartography} from './cartography.model'; \r\n/**\r\n * Cartography style model\r\n */\r\nexport class CartographyStyle extends Resource {\r\n  /** name*/\r\n  public name: string;\r\n  \r\n  /** title*/\r\n  public title: string;\r\n    \r\n  /** description*/  \r\n  public description: string;\r\n  \r\n  /** format*/  \r\n  public format: string;\r\n  \r\n  /** width*/  \r\n  public width: number;\r\n  \r\n  /** height*/  \r\n  public height: number;\r\n  \r\n  /** url*/  \r\n  public url: string;\r\n\r\n  /** cartography*/\r\n  public cartography: Cartography;\r\n\r\n  public defaultStyle: boolean;\r\n\r\n  public legendURL: any;\r\n  \r\n\r\n}\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\nimport { CartographyStyle } from './cartography-style.model';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CartographyStyleService extends RestService<CartographyStyle> {\r\n\r\n /** API resource path */\r\n  public CARTOGRAPHY_STYLES_API = 'cartography-styles';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(CartographyStyle, \"cartography-styles\", injector);\r\n  }\r\n  \r\n  /** remove service parameter*/\r\n  remove(item: CartographyStyle) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save service parameter*/\r\n  save(item: CartographyStyle): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      \r\n      \r\n      if (item.cartography !=null){\r\n          let cartography =  item.cartography;\r\n          delete item.cartography;\r\n          item.substituteRelation('cartography',cartography).subscribe(result => {            \r\n          \r\n      }, error => console.error(error));\r\n      }\r\n      result = this.http.put(item._links.self.href, item);\r\n      \r\n      \r\n    } else {\r\n      item.cartography = item.cartography._links.self.href;\r\n  \r\n      result = this.http.post(this.resourceService.getResourceUrl(this.CARTOGRAPHY_STYLES_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\nimport {CartographyGroup} from './cartography-group.model';\r\n/**\r\n * Background model\r\n */\r\nexport class Background extends Resource {\r\n  /** id */\r\n  public id: number;  \r\n  \r\n  /** name*/\r\n  public name: string;\r\n\r\n  /** description*/\r\n  public description: string;\r\n\r\n  /** image */\r\n  public image: string;\r\n\r\n  /** whether background is active*/\r\n  public active: Boolean;\r\n  \r\n  /** system created date*/\r\n  public createdDate: any;\r\n\r\n  /** cartography group*/\r\n  public cartographyGroup: CartographyGroup;\r\n}\r\n","import { Background } from './background.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n/** Background manager service */\r\n@Injectable()\r\nexport class BackgroundService extends RestService<Background> {\r\n\r\n  /** API resource path */\r\n  public BACKGROUND_API = 'backgrounds';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(Background, \"backgrounds\", injector);\r\n  }\r\n  \r\n  /** remove background*/\r\n  remove(item: Background) {\r\n    return this.http.delete(item._links.self.href);   \r\n  }\r\n  \r\n  /** save background*/\r\n  save(item: Background): Observable<any> {\r\n    let result: Observable<Object>;\r\n    let backgroundCartographyGroup:any = {}         \r\n    \r\n    backgroundCartographyGroup._links= {};\r\n    backgroundCartographyGroup._links.self = {};\r\n    backgroundCartographyGroup._links.self.href=\"\";\r\n    item.cartographyGroup;\r\n\r\n    if (item.cartographyGroup!=null){\r\n      backgroundCartographyGroup = item.cartographyGroup;\r\n        if (typeof item.cartographyGroup._links!= 'undefined') { \r\n            item.cartographyGroup = item.cartographyGroup._links.self.href;\r\n        }    \r\n     }\r\n\r\n    if (item._links!=null) {\r\n      //update relations\r\n      delete item.cartographyGroup;        \r\n      \r\n      if (backgroundCartographyGroup._links.self.href==''){\r\n         item.deleteRelation('cartographyGroup',backgroundCartographyGroup).subscribe(result => {     \r\n\r\n          \r\n             }, error => console.error(error));\r\n          \r\n      } else {\r\n          item.substituteRelation('cartographyGroup',backgroundCartographyGroup).subscribe(result => {\r\n         \r\n\r\n      \r\n            }, error => console.error(error));           \r\n       } \r\n       \r\n         \r\n      result = this.http.put(item._links.self.href, item);\r\n\r\n           \r\n    } else {\r\n      result = this.http.post(this.resourceService.getResourceUrl(this.BACKGROUND_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\nimport {TreeNode} from './tree-node.model';\r\nimport {Role} from '../role/role.model';    \r\n/**\r\n * Tree model\r\n */\r\nexport class Tree extends Resource {\r\n  /** id */\r\n  public id: number;\r\n  /** name */\r\n  public name: string;\r\n  /** description */\r\n  public description: string;\r\n  /** image */\r\n  public image: string;\r\n  /** nodes */\r\n  public nodes: TreeNode[];\r\n  /** available roles */\r\n  public availableRoles : Role[];\r\n\r\n}\r\n","import { Tree } from './tree.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n/** Tree manager service */\r\n@Injectable()\r\nexport class TreeService extends RestService<Tree> {\r\n  \r\n  /** API resource path */\r\n  public TREE_API = 'trees';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(Tree, \"trees\", injector);\r\n  }\r\n  \r\n  /** remove tree*/\r\n  remove(item: Tree) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save tree*/\r\n  save(item: Tree): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      \r\n      result = this.http.put(item._links.self.href, item);\r\n    } else {\r\n      result = this.http.post(this.resourceService.getResourceUrl(this.TREE_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\nimport {Cartography} from '../cartography/cartography.model';\r\nimport {Tree} from './tree.model';\r\n/**\r\n * Tree node model\r\n */\r\nexport class TreeNode extends Resource {\r\n  /** name */\r\n  public name: string;\r\n  /** tooltip*/\r\n  public tooltip: string;\r\n  /** description*/\r\n  public description: string;\r\n  /** datasetURL*/\r\n  public datasetURL: string;\r\n  /** metadataURL*/\r\n  public metadataURL: string;\r\n  /** order*/\r\n  public order : number;\r\n  /** whether tree node is active*/\r\n  public active: boolean;\r\n  /** parent tree node */\r\n  public radio: boolean;\r\n  /** parent tree node */\r\n  public parent: TreeNode;\r\n  /** displayed cartography */  \r\n  public cartography: Cartography;\r\n  /** tree */  \r\n  public tree: Tree;\r\n  /** filterGetFeatureInfo */  \r\n  public filterGetFeatureInfo: boolean;\r\n  /** filterGetMap */  \r\n  public filterGetMap: boolean;\r\n  /** filterSelectable */  \r\n  public filterSelectable: boolean;\r\n  /** style */  \r\n  public style: string;\r\n  \r\n\r\n}\r\n","import { TreeNode } from './tree-node.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n/** Tree node manager service */\r\n@Injectable() \r\nexport class TreeNodeService extends RestService<TreeNode> {\r\n  \r\n  /** API resource path */\r\n  public TREE_NODE_API = 'tree-nodes';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(TreeNode, \"tree-nodes\", injector);\r\n  }\r\n  \r\n  /** remove tree node*/\r\n  remove(item: TreeNode) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save tree node*/\r\n  save(item: TreeNode): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      const itemTree = item.tree;\r\n      const itemCartography = item.cartography;\r\n      const itemParent = item.parent;\r\n        \r\n      delete item.tree;\r\n      delete item.cartography;\r\n      delete item.parent;\r\n        \r\n      result = this.http.put(item._links.self.href, item);\r\n      if (itemTree !=null){\r\n          item.substituteRelation('tree',itemTree).subscribe(result => {\r\n      \r\n          }, error => console.error(error));\r\n      }\r\n      if (itemCartography !=null){\r\n          item.substituteRelation('cartography',itemCartography).subscribe(result => {\r\n      \r\n          }, error => console.error(error));\r\n      }\r\n      if (itemParent !=null){\r\n          item.substituteRelation('parent',itemParent).subscribe(result => {\r\n      \r\n          }, error => console.error(error));\r\n      }\r\n      else{\r\n          let treeNodeParent:any = {};\r\n          treeNodeParent._links= {};\r\n          treeNodeParent._links.self = {};\r\n          treeNodeParent._links.self.href=\"\";\r\n          item.deleteRelation('parent', treeNodeParent).subscribe(result => {\r\n        }, error => console.error(error));\r\n      }\r\n      \r\n    } else {\r\n      if (item.tree && item.tree._links && item.tree._links.self) {\r\n        item.tree = item.tree._links.self.href;\r\n      }\r\n      if (item.cartography && item.cartography._links && item.cartography._links.self) {\r\n        item.cartography = item.cartography._links.self.href;\r\n      }      \r\n      result = this.http.post(this.resourceService.getResourceUrl(this.TREE_NODE_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\nimport {Tree} from '../tree/tree.model';\r\nimport {Role} from '../role/role.model';\r\nimport {CartographyGroup} from '../cartography/cartography-group.model';\r\nimport {ApplicationParameter} from './application-parameter.model';\r\nimport {ApplicationBackground} from './application-background.model';\r\n\r\n//FIXME ensure application creation in admin app upon initialization (as it is done with Roles and default Users)\r\n/** Territorial appliction name */\r\nexport const TERRITORIAL_APP_NAME:string  = \"Aplicación Territorial\";\r\n\r\n/**\r\n * Application model\r\n */\r\nexport class Application extends Resource {\r\n  /** id */\r\n  public id: number;  \r\n  \r\n  /** name*/\r\n  public name: string;\r\n\r\n  /** type*/\r\n  public type: string;\r\n  \r\n  /** title*/\r\n  public title: string;\r\n  \r\n  /** theme*/\r\n  public theme: string;\r\n\r\n    \r\n  /** urlTemplate*/\r\n  public jspTemplate: string;\r\n  \r\n  \r\n  /** system created date*/\r\n  public createdDate: any;\r\n  \r\n  /** available roles*/\r\n  public availableRoles : Role[];\r\n  \r\n  /** trees*/\r\n  public trees : Tree[];\r\n  \r\n  /** scales (comma-separated values)*/\r\n  public scales: string[];\r\n  \r\n  /** projections(comma-separated EPSG codes)*/\r\n  public srs: string;\r\n  \r\n  /** whether application tree will auto refresh*/  \r\n  public treeAutoRefresh: Boolean;\r\n\r\n  /** backgrounds*/\r\n  public backgrounds: ApplicationBackground[];\r\n\r\n  /** situation map*/\r\n  public situationMap: CartographyGroup;    \r\n  \r\n  /** parameters*/\r\n  public parameters: ApplicationParameter[];\r\n}\r\n","import { Application } from './application.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\nimport { CartographyGroup } from '../cartography/cartography-group.model';\r\n\r\n/** Application manager service */\r\n@Injectable()\r\nexport class ApplicationService extends RestService<Application> {\r\n  \r\n\r\n  /** API resource path */\r\n  public APPLICATION_API = 'applications';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(Application, \"applications\", injector);\r\n  }\r\n  \r\n  /** remove application*/\r\n  remove(item: Application) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save application*/\r\n  save(item: Application): Observable<any> {\r\n    let result: Observable<Object>;\r\n\r\n    let applicationSituationMap:any = {};\r\n    applicationSituationMap._links= {};\r\n    applicationSituationMap._links.self = {};\r\n    applicationSituationMap._links.self.href=\"\";\r\n     \r\n    if (item.situationMap!=null){\r\n        applicationSituationMap=item.situationMap;\r\n        if (typeof item.situationMap._links!= 'undefined') { \r\n            item.situationMap = item.situationMap._links.self.href;\r\n        }       \r\n     }\r\n\r\n    if (item._links!=null) {\r\n      //update relations\r\n      delete item.situationMap;        \r\n      \r\n      if (applicationSituationMap._links.self.href==''){\r\n         item.deleteRelation('situationMap',applicationSituationMap).subscribe(result => {     \r\n             \r\n             }, error => console.error(error));\r\n          \r\n      } else {\r\n          item.substituteRelation('situationMap',applicationSituationMap).subscribe(result => {\r\n         \r\n      \r\n            }, error => console.error(error));           \r\n       } \r\n       \r\n         \r\n      result = this.http.put(item._links.self.href, item);\r\n\r\n           \r\n    } else {\r\n      result = this.http.post(this.resourceService.getResourceUrl(this.APPLICATION_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n    \r\n    \r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\nimport {Background} from '../cartography/background.model';\r\nimport {Application} from './application.model'; \r\n\r\n/**\r\n * Application background model\r\n */\r\nexport class ApplicationBackground extends Resource {\r\n  /** order*/\r\n  public order: Number;\r\n  \r\n  /** background*/\r\n  public background: Background;\r\n  \r\n  /** application*/\r\n  public application: Application;\r\n\r\n}\r\n","import { ApplicationBackground } from './application-background.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n/** Application background manager service */\r\n@Injectable() \r\nexport class ApplicationBackgroundService extends RestService<ApplicationBackground> {\r\n  \r\n\r\n  /** API resource path */\r\n  public APPLICATION_BACKGROUND_API ='application-backgrounds';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(ApplicationBackground, \"application-backgrounds\", injector);\r\n  }\r\n  \r\n  /** remove application background*/\r\n  remove(item: ApplicationBackground) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save application background*/\r\n  save(item: ApplicationBackground): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      result = this.http.put(item._links.self.href, item);\r\n      if (item.application !=null){\r\n          item.substituteRelation('application',item.application).subscribe(result => {\r\n      \r\n      }, error => console.error(error));\r\n      }\r\n      if (item.background !=null){\r\n          item.substituteRelation('background',item.background).subscribe(result => {\r\n      \r\n      }, error => console.error(error));\r\n      }\r\n      \r\n    } else {\r\n      item.application = item.application._links.self.href;\r\n      item.background = item.background._links.self.href;\r\n  \r\n      result = this.http.post(this.resourceService.getResourceUrl(this.APPLICATION_BACKGROUND_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\nimport {Application} from './application.model'; \r\n\r\n/**\r\n * Application parameter model \r\n */\r\nexport class ApplicationParameter extends Resource {\r\n  /** name*/\r\n  public name: string;\r\n  \r\n  /** type*/\r\n  public type: string;\r\n  \r\n  /** value*/    \r\n  public value: string;\r\n  \r\n  /** application*/\r\n  public application: Application;\r\n\r\n}\r\n","import { ApplicationParameter } from './application-parameter.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n/** Application parameter manager service */\r\n@Injectable() \r\nexport class ApplicationParameterService extends RestService<ApplicationParameter> {\r\n  \r\n\r\n  /** API resource path */\r\n  public APPLICATION_PARAMETER_API = 'application-parameters';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(ApplicationParameter, \"application-parameters\", injector);\r\n  }\r\n  \r\n  /** remove application*/\r\n  remove(item: ApplicationParameter) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save application*/\r\n  save(item: ApplicationParameter): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      result = this.http.put(item._links.self.href, item);\r\n      if (item.application !=null){\r\n          item.substituteRelation('application',item.application).subscribe(result => {\r\n      \r\n      }, error => console.error(error));\r\n      }\r\n      \r\n    } else {\r\n      item.application = item.application._links.self.href;\r\n  \r\n      result = this.http.post(this.resourceService.getResourceUrl(this.APPLICATION_PARAMETER_API) , item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import {Resource} from '../angular-hal/src/lib/resource';\r\n/**\r\n * Connection model\r\n */\r\nexport class CodeList extends Resource {\r\n  /** id */\r\n  public id: number;\r\n  /** name*/\r\n  public codeListName: string;\r\n  /** type*/\r\n  public value: string;\r\n  /** user*/\r\n  public description: string;\r\n\r\n\r\n}\r\n","import { CodeList } from './codelist.model';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {RestService} from '../angular-hal/src/lib/rest.service';\r\n\r\n/** Connection manager service */\r\n@Injectable()\r\nexport class CodeListService extends RestService<CodeList> {\r\n  \r\n \r\n  /** API resource path */\r\n  public CODELIST_API = 'codelist-values';\r\n\r\n  /** constructor */\r\n  constructor(injector: Injector,private http: HttpClient) {\r\n    super(CodeList, \"codelist-values\", injector);\r\n  }\r\n  \r\n  /** remove connection*/\r\n  remove(item: CodeList) {\r\n    return this.http.delete(item._links.self.href);\r\n   \r\n  }\r\n  \r\n  /** save connection*/\r\n  save(item: CodeList): Observable<any> {\r\n    let result: Observable<Object>;\r\n    if (item._links!=null) {\r\n      \r\n      result = this.http.put(item._links.self.href, item);\r\n    } else {\r\n      result = this.http.post(this.resourceService.getResourceUrl(this.CODELIST_API ), item);\r\n    }\r\n    return result;\r\n  }\r\n  \r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, Observable, of } from 'rxjs';\r\n\r\n/** Layer model: configure Layer data and displaying configuration */ \r\nexport class Layer {\r\n  // Display data\r\n  /** layer visibility*/  \r\n  visibility: boolean = false;\r\n  /** Transparency (Transparent) 0-1 (Opaque)*/\r\n  opacity: number = 1.0;\r\n\r\n  // Configuration data\r\n  /** title*/\r\n  title: string;\r\n  \r\n  /** Id to index*/\r\n  id: any;\r\n  \r\n  /** Service Name*/\r\n  serverName: string;\r\n\r\n  /** Service attributions*/\r\n  attributions: string = \"\";\r\n\r\n  /** Request format (image/jpg, ...)*/\r\n  format: string;\r\n  \r\n  /** Request service version*/\r\n  version:string;\r\n\r\n  /** Service url*/\r\n  url: string;\r\n\r\n  /** Is base layer?*/\r\n  isBaseLayer: boolean;\r\n\r\n  /** Request layer name*/\r\n  name: string;\r\n\r\n  /** Is tiled?*/\r\n  tiled: boolean;\r\n  \r\n  /** Description*/\r\n  desc: string = \"\";\r\n  \r\n  /**  Transparent request parameter?*/\r\n  url_transparent: string = \"true\";\r\n  \r\n  /** Request Background parameter color (Hexa)*/\r\n  url_bgcolor: string = \"0x000000\";\r\n  \r\n  /** Request Exception URL*/\r\n  url_exception: string;\r\n  \r\n  /** Extent for tiled services*/\r\n  extent: any = null;\r\n\r\n  /** Tile height (if not defined, the default map is taken)*/\r\n  tileHeight?:number;\r\n  \r\n  /** Tile width (if not defined, the default map is taken)*/\r\n  tileWidth?:number;\r\n  \r\n  /** Enabled for GetFeatureInfo requests (enabled to use the viewer features information tool)*/\r\n  queryable?:boolean = false;\r\n  \r\n  /** Minimum scale*/\r\n  minimumScale?:number;\r\n  \r\n  /** Maximum scale*/\r\n  maximumScale?:number;\r\n  \r\n  /** List of available CRS*/\r\n  projections?:string;\r\n  \r\n  /** Features information URL*/\r\n  infoUrl?:string;\r\n  \r\n  /** Metadata information URL*/\r\n  metadataUrl?:string;\r\n  \r\n  /** Legend URL*/\r\n  legendUrl?:string;\r\n  \r\n  /** Array of OptionalParameter object that defines other optional parameter-value pairs for the request (TIME ...)*/\r\n  optionalParameters?:Array<OptionalParameter>;\r\n}\r\n\r\n/** Optional parameter model: configure parameter-value pair to add to the request layer URL */\r\nexport class OptionalParameter {\r\n  /** key*/key:string;\r\n  /** value*/value:string;\r\n}\r\n\r\n/** Layer configuration model: modify the configuration of a layer when interacting with the map (make visible, move the layer ...) */\r\nexport class LayerConfiguration {\r\n  /** Identifier to index*/id: any;\r\n  /** Layer visibility*/visibility: boolean;\r\n  /** Layer transparency (Transparent) 0-1 (Opaque)*/opacity: number;\r\n  /** Layer position*/position: number;\r\n}\r\n\r\n/** Layer group model*/\r\nexport class LayerGroup {\r\n  /** initially activated (all visible layers)*/active?:boolean;\r\n  /** group name*/name?: String;\r\n  /** group id*/id: String;\r\n  /** array of child Layers*/layers: Array<Layer>;\r\n}\r\n\r\n/** Map options configuration model*/\r\nexport class MapOptionsConfiguration {\r\n  /** scales*/scales?: string;\r\n  /** projections*/projections?: string;\r\n  /** minimum scale*/minScale?:number;\r\n  /** maximum scale*/maxScale?:number;\r\n  /** extent*/extent?:any;\r\n  /** maximum extent*/maxExtent?:any;\r\n  /** tile width*/tileWidth?:number;\r\n  /** tile height*/tileHeight?:number;\r\n  /** parameters*/parameters?: Array<OptionalParameter>\r\n}\r\n\r\n/** Map component status model*/\r\nexport class MapComponentStatus {\r\n    /** loaded?*/loaded: boolean = false;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\n/** Map configuration manager service*/\r\nexport class MapConfigurationManagerService {\r\n  private layersSubject = new BehaviorSubject([]);\r\n  private layers: Array<Layer> = null;\r\n\r\n  private baseLayerGroupsSubject = new BehaviorSubject([]);\r\n  private baseLayerGroups: Array<LayerGroup> = null;\r\n\r\n  private layerConfigurationSubject = new BehaviorSubject([]);\r\n\r\n  private addLayersSubject = new BehaviorSubject([]);\r\n  private removeLayersSubject = new BehaviorSubject([]);\r\n\r\n  private situationMapConfigurationSubject = new BehaviorSubject([]);\r\n  private mapOptionsConfigurationSubject = new BehaviorSubject([]);\r\n\r\n  private mapComponentStatusSubject = new BehaviorSubject([]);\r\n\r\n  /** constructor*/\r\n  constructor() { \r\n   //\r\n  }\r\n  \r\n  /** layer count */\r\n  count = 0;\r\n\r\n  /** configure the overlay layers of the map, by passing as a parameter an array of objects of type Layer objects defining the layers to load.*/\r\n  loadLayersConfiguration(configuration) {\r\n    if (this.layers != null) {\r\n      this.clearLayers(false);\r\n    }\r\n    this.setLayers(configuration);\r\n  }\r\n  \r\n  /**configure the base layers of the map by passing as a parameter an array of objects of type LayerGroup each of them with the corresponding Layer objects defining the layers to load.*/\r\n  loadBaseLayersConfiguration(configuration) {\r\n    this.setBaseLayerGroups(configuration);\r\n  }\r\n\r\n  /** get base layer groups*/\r\n  getBaseLayerGroups(): Observable<LayerGroup[]> {\r\n    return this.baseLayerGroupsSubject.asObservable();\r\n  }\r\n\r\n  /** set base layer groups*/\r\n  setBaseLayerGroups(groups:Array<LayerGroup>) {\r\n    this.baseLayerGroups = groups;\r\n    this.refreshBaseLayerGroups();\r\n  }\r\n\r\n  private refreshBaseLayerGroups() {\r\n    // Send the new values so that all subscribers are updated\r\n    this.baseLayerGroupsSubject.next(this.baseLayerGroups);\r\n  }\r\n\r\n  /** get layers*/\r\n  getLayers(): Observable<Layer[]> {\r\n    return this.layersSubject.asObservable();\r\n  }\r\n\r\n  /** remove all layers from map*/\r\n  clearLayers(refresh:boolean) {\r\n    while(this.layers.length) {\r\n      this.layers.pop();\r\n    }\r\n    if (refresh) {\r\n      this.refreshLayers();\r\n    }\r\n  }\r\n\r\n  /** set layers*/\r\n  setLayers(layers:Array<Layer>) {\r\n    this.layers = layers;\r\n    this.refreshLayers();\r\n  }\r\n\r\n  /** add given layer to map*/\r\n  addLayer(layer:Layer) {\r\n    this.layers.push(layer);\r\n    this.refreshAddLayers(layer);\r\n  }\r\n\r\n  /** add given layer to map at given index*/\r\n  addLayerAt(layer:Layer, index:number) {\r\n    if (index == 0) {\r\n      this.layers = [layer].concat(this.layers);\r\n    } else if (index >= this.layers.length) {\r\n      this.layers.push(layer);\r\n    } else {\r\n      this.layers = this.layers.slice(0, index)\r\n                    .concat([layer])\r\n                    .concat(this.layers.slice(index, this.layers.length));\r\n    }\r\n    this.refreshAddLayers(layer);\r\n    this.refreshLayerConfiguration(layer.id, null, null, index);\r\n  }\r\n\r\n  /** remove given layer from map*/\r\n  removeLayer(layer:Layer) {\r\n    var index = this.layers.indexOf(layer);\r\n    this.removeLayerIndex(index);\r\n  }\r\n\r\n  /** remove layer with given id from map */\r\n  removeLayerId(id) {\r\n    var index = -1;\r\n    for (var i = 0, iLen = this.layers.length; i < iLen; i++) {\r\n      if (this.layers[i].id == id) {\r\n        index = i;\r\n        break;\r\n      }\r\n    }\r\n    this.removeLayerIndex(index);\r\n  }\r\n\r\n  /** remove layer at given index from map */\r\n  removeLayerIndex(index:number) {\r\n    var layer = this.layers[index];\r\n    this.layers.splice(index, 1);\r\n    this.refreshRemoveLayers(layer);\r\n  }\r\n\r\n  /** refresh layers */\r\n  private refreshLayers() {\r\n    // Send the new values so that all subscribers are updated\r\n    this.layersSubject.next(this.layers);\r\n  }\r\n\r\n  /** Observable for layers added */\r\n  getLayersAdded(): Observable<Layer[]> {\r\n    return this.addLayersSubject.asObservable();\r\n  }\r\n\r\n  private refreshAddLayers(layer:Layer) {\r\n    // Send the new values so that all subscribers are updated\r\n    this.addLayersSubject.next([layer]);\r\n  }\r\n\r\n  getLayersRemoved(): Observable<Layer[]> {\r\n    return this.removeLayersSubject.asObservable();\r\n  }\r\n\r\n  private refreshRemoveLayers(layer:Layer) {\r\n    // Send the new values so that all subscribers are updated\r\n    this.removeLayersSubject.next([layer]);\r\n  }\r\n\r\n  getLayerConfigurationListener(): Observable<LayerConfiguration[]> {\r\n    return this.layerConfigurationSubject.asObservable();\r\n  }\r\n\r\n  private getLayerIndexById(id:string):number{\r\n    var index = -1;\r\n    for (var i = 0, iLen = this.layers.length; i < iLen; i++) {\r\n      if (this.layers[i].id == id) {\r\n        index = i;\r\n        break;\r\n      }\r\n    }\r\n    return index;\r\n  }\r\n  \r\n  /** move layer with given id to the given index*/\r\n  moveLayer(id, index) {\r\n    var layerIndex = this.getLayerIndexById(id);\r\n    if (layerIndex != -1) {\r\n      var layer = this.layers.splice(layerIndex, 1);\r\n      this.layers = \r\n        this.layers.slice(0, index)\r\n        .concat(layer)\r\n        .concat(this.layers.slice(index, this.layers.length));\r\n    }\r\n    this.refreshLayerConfiguration(id, null, null, index);\r\n  }\r\n\r\n  /** change visibility of layer with given id to the given value*/\r\n  changeLayerVisibility(id, visibility) {\r\n    this.refreshLayerConfiguration(id, null, visibility, null);\r\n  }\r\n\r\n  /** change opacity of layer with given id to the given value*/\r\n  changeLayerOpacity(id, opacity) {\r\n    this.refreshLayerConfiguration(id, opacity, null, null);\r\n  }\r\n\r\n  private refreshLayerConfiguration(id, opacity, visibility, position) {\r\n    // Send the new values so that all subscribers are updated\r\n    var layer = new LayerConfiguration();\r\n    layer.id = id;\r\n    layer.opacity = opacity;\r\n    layer.visibility = visibility;\r\n    layer.position = position;\r\n    this.layerConfigurationSubject.next([layer]);\r\n  }\r\n\r\n  getSituationMapConfigurationListener(): Observable<Layer[]> {\r\n    return this.situationMapConfigurationSubject.asObservable();\r\n  }\r\n\r\n  /** configure the situation map of the map component by passing as a parameter an array of objects of type LayerGroup, each of them with the corresponding Layer objects defining the layers to load as situation map.*/\r\n  loadSituationMapConfiguration(layers:Array<Layer>) {\r\n    // Send the new values so that all subscribers are updated\r\n    this.situationMapConfigurationSubject.next(layers);\r\n  }\r\n\r\n  getMapOptionsConfigurationListener(): Observable<MapOptionsConfiguration[]> {\r\n    return this.mapOptionsConfigurationSubject.asObservable();\r\n  }\r\n\r\n  /** load map options configuration */\r\n  loadMapOptionsConfiguration(configuration:MapOptionsConfiguration) {\r\n    // Send the new values so that all subscribers are updated\r\n    this.mapOptionsConfigurationSubject.next([configuration]);\r\n  }\r\n\r\n  getMapComponentStatusListener(): Observable<MapComponentStatus[]> {\r\n    return this.mapComponentStatusSubject.asObservable();\r\n  }\r\n  \r\n  /** set map component status */\r\n  setMapComponentStatus(status:MapComponentStatus) {\r\n    //Notify the map component status\r\n    this.mapComponentStatusSubject.next([status]);\r\n  }\r\n\r\n}\r\n","import { Directive, Input, TemplateRef, ViewContainerRef } from '@angular/core';\r\nimport { Principal } from './principal.service';\r\n\r\n/**\r\n * @whatItDoes Conditionally includes an HTML element if current user has any\r\n * of the authorities passed as the `expression`.\r\n *\r\n * @howToUse\r\n * ```\r\n *     <some-element *sitmunHasAnyAuthority=\"'ROLE_ADMIN'\">...</some-element>\r\n *\r\n *     <some-element *sitmunHasAnyAuthority=\"['ROLE_ADMIN', 'ROLE_USER']\">...</some-element>\r\n * ```\r\n */\r\n@Directive({\r\n    selector: '[sitmunHasAnyAuthority]'\r\n})\r\nexport class HasAnyAuthorityDirective {\r\n    \r\n    /** authorities to check */\r\n    public authorities: string[]; \r\n    \r\n    /** constructor */\r\n    constructor(private principal: Principal, private templateRef: TemplateRef<any>, private viewContainerRef: ViewContainerRef) {\r\n    }\r\n    \r\n    /** territory to check authorities*/\r\n    @Input() territory: string;\r\n    \r\n    /** Set whether current user has any of the given authorities */\r\n    @Input()\r\n    set sitmunHasAnyAuthority(value: string|string[]) {\r\n        this.authorities = typeof value === 'string' ? [ <string> value ] : <string[]> value;\r\n        this.updateView();\r\n        // Get notified each time authentication state changes.\r\n        this.principal.getAuthenticationState().subscribe((identity) => this.updateView());\r\n    }\r\n    \r\n    /** update view */\r\n    private updateView(): void {\r\n        if (this.territory){\r\n        this.principal.hasAnyAuthorityOnTerritory(this.authorities,this.territory).then((result) => {\r\n            this.viewContainerRef.clear();\r\n            if (result) {\r\n                this.viewContainerRef.createEmbeddedView(this.templateRef);\r\n            }\r\n        });\r\n\r\n        } else {\r\n        this.principal.hasAnyAuthority(this.authorities).then((result) => {\r\n            this.viewContainerRef.clear();\r\n            if (result) {\r\n                this.viewContainerRef.createEmbeddedView(this.templateRef);\r\n            }\r\n        });\r\n        }\r\n    }\r\n}\r\n","import { Directive, Input, TemplateRef, ViewContainerRef } from '@angular/core';\r\nimport { Principal } from './principal.service';\r\n\r\n/**\r\n * @whatItDoes Conditionally includes an HTML element if current user has any\r\n * of the authorities passed as the `expression`.\r\n *\r\n * @howToUse\r\n * ```\r\n *     <some-element *sitmunHasAnyAuthority=\"'ROLE_ADMIN'\">...</some-element>\r\n *\r\n *     <some-element *sitmunHasAnyAuthority=\"['ROLE_ADMIN', 'ROLE_USER']\">...</some-element>\r\n * ```\r\n */\r\n@Directive({\r\n    selector: '[sitmunHasAnyAuthorityOnTerritory]'\r\n})\r\nexport class HasAnyAuthorityOnTerritoryDirective {\r\n\r\n    /** authorities to check */\r\n    public authorities: string[]; \r\n\r\n    /** territory to check authorities*/\r\n    public territory: string; \r\n\r\n    /** constructor */\r\n    constructor(private principal: Principal, private templateRef: TemplateRef<any>, private viewContainerRef: ViewContainerRef) {\r\n    }\r\n    \r\n    /** Set whether current user has any of the given authorities on territory */\r\n    @Input()\r\n    set sitmunHasAnyAuthorityOnTerritory(opts: any) {\r\n\r\n        this.authorities = typeof opts.authorities === 'string' ? [ <string> opts.authorities ] : <string[]> opts.authorities;\r\n        this.territory = opts.territory;\r\n        this.updateView();\r\n        // Get notified each time authentication state changes.\r\n        this.principal.getAuthenticationState().subscribe((identity) => this.updateView());\r\n    }\r\n    \r\n    /** update view */\r\n    private updateView(): void {\r\n        if (this.territory){\r\n        this.principal.hasAnyAuthorityOnTerritory(this.authorities,this.territory).then((result) => {\r\n            this.viewContainerRef.clear();\r\n            if (result) {\r\n                this.viewContainerRef.createEmbeddedView(this.templateRef);\r\n            }\r\n        });\r\n\r\n        } else {\r\n        this.principal.hasAnyAuthority(this.authorities).then((result) => {\r\n            this.viewContainerRef.clear();\r\n            if (result) {\r\n                this.viewContainerRef.createEmbeddedView(this.templateRef);\r\n            }\r\n        });\r\n        }\r\n    }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\n\r\nimport { CommonModule } from '@angular/common';\r\nimport {HttpClientModule, HTTP_INTERCEPTORS, HttpClient} from '@angular/common/http';\r\nimport { RouterModule } from '@angular/router';\r\n//import { AngularHalModule } from '../../lib/angular-hal';\r\nimport {CodeListService} from './codelist/codelist.service';\r\nimport {TerritoryService} from './territory/territory.service';\r\nimport {TerritoryTypeService} from './territory/territory-type.service';\r\nimport {TerritoryGroupTypeService} from './territory/territory-group-type.service';\r\nimport {UserPositionService} from './user/user-position.service';\r\nimport {UserConfigurationService} from './user/user-configuration.service';\r\nimport {RoleService} from './role/role.service';\r\nimport {UserService} from './user/user.service';\r\nimport {ConnectionService} from './connection/connection.service';\r\nimport {TaskService} from './task/task.service';\r\nimport {TaskTypeService} from './task/task-type.service';\r\nimport {TaskGroupService} from './task/task-group.service';\r\nimport {TaskParameterService} from './task/task-parameter.service';\r\nimport {TaskAvailabilityService} from './task/task-availability.service';\r\nimport {TaskUIService} from './task/task-ui.service';\r\nimport {ServiceService} from './service/service.service';\r\nimport {ServiceParameterService} from './service/service-parameter.service';\r\nimport {CartographyService} from './cartography/cartography.service';\r\nimport {CartographyAvailabilityService} from './cartography/cartography-availability.service';\r\nimport {CartographyFilterService} from './cartography/cartography-filter.service';\r\nimport {CartographyGroupService} from './cartography/cartography-group.service';\r\nimport {CartographyParameterService} from './cartography/cartography-parameter.service';\r\nimport {BackgroundService} from './cartography/background.service';\r\nimport {TreeService} from './tree/tree.service';\r\nimport {TreeNodeService} from './tree/tree-node.service';\r\nimport {ApplicationService} from './application/application.service';\r\nimport {ApplicationParameterService} from './application/application-parameter.service';\r\nimport {ApplicationBackgroundService} from './application/application-background.service';\r\nimport { MapConfigurationManagerService } from './map/map-configuration-manager.service';\r\nimport { AuthService } from './auth/auth.service';\r\nimport { Principal } from './auth/principal.service';\r\nimport { AuthInterceptor } from './auth/auth.interceptor';\r\nimport { AuthExpiredInterceptor } from './auth/auth-expired.interceptor';\r\nimport { HasAnyAuthorityDirective } from './auth/has-any-authority.directive';\r\nimport { HasAnyAuthorityOnTerritoryDirective } from './auth/has-any-authority-on-territory.directive';\r\nimport { LoginService } from './auth/login.service';\r\nimport { AccountService } from './account/account.service';\r\nimport {TranslateHttpLoader} from '@ngx-translate/http-loader';\r\nimport {TranslateLoader, TranslateModule} from '@ngx-translate/core';\r\nimport { TranslationService } from './translation/translation.service';\r\nimport { LanguageService } from './translation/language.service';\r\nimport { DashboardService } from './dashboard/dashboard.service';\r\nimport { CapabilitiesService } from './capabilities/capabilities.service';\r\nimport { ConfigurationParametersService } from './configuration/configuration-parameters.service';\r\nimport { CartographyStyleService } from './cartography/cartography-style.service';\r\nimport { CartographySpatialSelectionParameterService } from './cartography/cartography-spatial-selection-parameter.service';\r\nimport { GetInfoService } from './getInfo/getInfo.service';\r\n/** load i18n assets*/\r\nexport function createTranslateLoader(http: HttpClient) {\r\n  return new TranslateHttpLoader(http, './assets/i18n/', '.json');\r\n}\r\n\r\n\r\n/** SITMUN frontend core module */\r\n@NgModule({\r\n  imports: [\r\n    /*RouterModule,\r\n    HttpClientModule,\r\n    CommonModule,\r\n    AngularHalModule,*/\r\n    TranslateModule.forRoot({\r\n      loader: {\r\n        provide: TranslateLoader,\r\n        useFactory: (createTranslateLoader),\r\n        deps: [HttpClient]\r\n      }\r\n    }),\r\n  ],\r\n  declarations: [\r\n    HasAnyAuthorityDirective,\r\n    HasAnyAuthorityOnTerritoryDirective,\r\n  ],\r\n  exports: [\r\n    HasAnyAuthorityDirective,\r\n    HasAnyAuthorityOnTerritoryDirective,\r\n    TranslateModule\r\n  ]\r\n})\r\nexport class SitmunFrontendCoreModule {\r\n  static forRoot(): ModuleWithProviders<SitmunFrontendCoreModule> {\r\n    return {\r\n      ngModule: SitmunFrontendCoreModule,\r\n      providers: [\r\n        CodeListService,\r\n        TerritoryService,\r\n        TerritoryTypeService,\r\n        TerritoryGroupTypeService,\r\n        RoleService,\r\n        AccountService,\r\n        AuthService,\r\n        UserService,\r\n        ConnectionService,\r\n        TaskService,\r\n        TaskTypeService,\r\n        TaskUIService,\r\n        TaskGroupService,\r\n        TaskParameterService,\r\n        TaskAvailabilityService,\r\n        ServiceService,\r\n        ConfigurationParametersService,\r\n        CapabilitiesService,\r\n        GetInfoService,\r\n        ServiceParameterService,\r\n        CartographyService,\r\n        CartographyGroupService,\r\n        CartographyAvailabilityService,\r\n        CartographyParameterService,\r\n        CartographySpatialSelectionParameterService,\r\n        CartographyStyleService,\r\n        CartographyFilterService,\r\n        BackgroundService,\r\n        TreeService,\r\n        TreeNodeService,\r\n        ApplicationService,\r\n        ApplicationParameterService,\r\n        ApplicationBackgroundService,\r\n        AuthInterceptor,\r\n        AuthExpiredInterceptor,\r\n        Principal,\r\n        UserPositionService,\r\n        UserConfigurationService,\r\n        LoginService,\r\n        TranslationService,\r\n        LanguageService,\r\n        DashboardService,\r\n        MapConfigurationManagerService,\r\n        {\r\n          provide: HTTP_INTERCEPTORS,\r\n          useClass: AuthInterceptor,\r\n          multi: true\r\n        }\r\n        , {\r\n          provide: HTTP_INTERCEPTORS,\r\n          useClass: AuthExpiredInterceptor,\r\n          multi: true\r\n        }\r\n      ]\r\n    };\r\n  }\r\n}\r\n\r\n","import {ModuleWithProviders, NgModule} from '@angular/core';\r\nimport {HttpClient, HttpClientModule} from '@angular/common/http';\r\nimport {HalParam, RestService} from './rest.service';\r\nimport {ExternalService} from './external.service';\r\nimport {ResourceService} from './resource.service';\r\nimport {ExternalConfigurationHandlerInterface} from './external-configuration.handler';\r\n\r\nimport 'rxjs';\r\n\r\nimport {SubTypeBuilder} from './subtype-builder';\r\n\r\nexport {ExternalService} from './external.service';\r\nexport {RestService} from './rest.service';\r\nexport {Resource} from './resource';\r\nexport {ResourceArray} from './resource-array';\r\nexport {ResourceService} from './resource.service';\r\nexport {Sort} from './sort';\r\nexport {ResourceHelper} from './resource-helper';\r\nexport {ExternalConfiguration} from './ExternalConfiguration';\r\nexport {ExternalConfigurationHandlerInterface} from './external-configuration.handler';\r\nexport {HalOptions, HalParam} from './rest.service';\r\nexport {SubTypeBuilder} from './subtype-builder';\r\n\r\n\r\n/** Angular HAL module */\r\n@NgModule({\r\n    imports: [HttpClientModule],\r\n    declarations: [],\r\n    exports: [HttpClientModule],\r\n    providers: [\r\n        ExternalService,\r\n        HttpClient,\r\n        {\r\n            provide: ResourceService,\r\n            useClass: ResourceService,\r\n            deps: [ExternalService]\r\n        }]\r\n})\r\nexport class AngularHalModule {\r\n    static forRoot(): ModuleWithProviders<AngularHalModule> {\r\n        return {\r\n            ngModule: AngularHalModule,\r\n            providers: [\r\n                ExternalService,\r\n                HttpClient,\r\n                {\r\n                    provide: ResourceService,\r\n                    useClass: ResourceService,\r\n                    deps: [ExternalService]\r\n                }\r\n            ]\r\n        };\r\n    }\r\n}"]}