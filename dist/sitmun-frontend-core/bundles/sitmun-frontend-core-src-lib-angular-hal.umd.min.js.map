{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/sitmun-frontend-core/src/lib/angular-hal/src/lib/resource-array.ts","../../../projects/sitmun-frontend-core/src/lib/angular-hal/src/lib/resource-helper.ts","../../../projects/sitmun-frontend-core/src/lib/angular-hal/src/lib/external.service.ts","../../../projects/sitmun-frontend-core/src/lib/angular-hal/src/lib/resource.service.ts","../../../projects/sitmun-frontend-core/src/lib/angular-hal/src/lib/rest.service.ts","../../../projects/sitmun-frontend-core/src/lib/angular-hal/src/lib/resource.ts","../../../projects/sitmun-frontend-core/src/lib/angular-hal/src/lib/angular-hal.module.ts"],"names":["Object","create","__values","o","s","Symbol","iterator","m","i","call","length","next","value","done","TypeError","__read","n","r","e","ar","push","error","__spread","arguments","concat","SuppressedError","ResourceArray","_this","this","totalElements","totalPages","pageNumber","result","el","init","type","response","sortInfo","ResourceHelper","createEmptyResult","_embedded","instantiateResourceCollection","next_uri","getHttp","get","getProxy","headers","pipe","map","catchError","observableThrowError","prev","prev_uri","first","first_uri","last","last_uri","page","self_uri","replace","urlParsed","url.parse","query","replaceOrAdd","pageSize","toString","uri","addSortInfo","sortElements","sort","_i","size","prototype","_b","_c","item","path","order","field","idx","indexOf","idxNextAmp","seachValue","substring","optionParams","params","options","_d","param","append","key","_e","_f","sortString","resolveRelations","resource","isNullOrUndefined","className","find","Array","isArray","array","forEach","element","isPrimitive","resourceArray","getClassName","obj","results","exec","constructor","objProto","classNames","getPrototypeOf","payload","builder","embeddedName","keys","embeddedClassName","items","items_1","e_4","items_1_1","instance","searchSubtypes","instantiateResource","number","_links","self","href","undefined","subtypes","from","subtypeKey","toLowerCase","startsWith","subtype","entity","p","setProxyUri","proxy_uri","setRootUri","root_uri","getURL","addSlash","uriParsed","search","url","setHttp","http","getRootUri","HttpHeaders","ExternalService","externalConfigurationService","getProxyUri","updateExternalConfigurationHandlerInterface","getExternalConfiguration","i0","ɵɵinject","factory","ɵfac","ResourceService","externalService","getAll","subType","ignoreProjection","getResourceUrl","HttpParams","setUrls","id","setUrlsResource","data","getBySelfLink","resourceLink","searchSingle","customQuery","getByRelation","getByRelationArray","count","observe","Number","body","selfResource","post","status","update","put","updateCollection","headersReq","set","patch","delete","hasNext","hasPrev","hasFirst","hasLast","apply","endsWith","proxyUrl","rootUrl","RestService","injector","resourceService","handleError","mergeMap","notPaged","observableOf","selfLink","relation","totalElement","Resource","defineProperty","_subtypes","getRelationArray","getRelation","lastIndexOf","realClassName","addRelation","header","updateRelation","substituteRelation","substituteAllRelation","resources","deleteRelation","link","relationId","deleteAllRelation","AngularHalModule","forRoot","ngModule","providers","HttpClient","provide","useClass","deps","imports","HttpClientModule","exports"],"mappings":"ozBAwJ6BA,OAAOC,gBAgBpBC,EAASC,GACrB,IAAIC,EAAsB,mBAAXC,QAAyBA,OAAOC,SAAUC,EAAIH,GAAKD,EAAEC,GAAII,EAAI,EAC5E,GAAID,EAAG,OAAOA,EAAEE,KAAKN,GACrB,GAAIA,GAAyB,iBAAbA,EAAEO,OAAqB,MAAO,CAC1CC,KAAM,WAEF,OADIR,GAAKK,GAAKL,EAAEO,SAAQP,OAAI,GACrB,CAAES,MAAOT,GAAKA,EAAEK,KAAMK,MAAOV,KAG5C,MAAM,IAAIW,UAAUV,EAAI,0BAA4B,4CAGxCW,EAAOZ,EAAGa,GACtB,IAAIT,EAAsB,mBAAXF,QAAyBF,EAAEE,OAAOC,UACjD,IAAKC,EAAG,OAAOJ,EACf,IAAmBc,EAAYC,EAA3BV,EAAID,EAAEE,KAAKN,GAAOgB,EAAK,GAC3B,IACI,WAAc,IAANH,GAAgBA,KAAM,MAAQC,EAAIT,EAAEG,QAAQE,MAAMM,EAAGC,KAAKH,EAAEL,OAExE,MAAOS,GAASH,EAAI,CAAEG,MAAOA,WAEzB,IACQJ,IAAMA,EAAEJ,OAASN,EAAIC,EAAU,SAAID,EAAEE,KAAKD,WAExC,GAAIU,EAAG,MAAMA,EAAEG,OAE7B,OAAOF,WAIKG,IACZ,IAAK,IAAIH,EAAK,GAAIX,EAAI,EAAGA,EAAIe,UAAUb,OAAQF,IAC3CW,EAAKA,EAAGK,OAAOT,EAAOQ,UAAUf,KACpC,OAAOW,EA0DcnB,OAAOC,OA4DkB,mBAApBwB,iBAAiCA,gBA0B/D,iBC7UA,SAAAC,IAAA,IAAAC,EAAAC,KAuBWA,KAAAC,cAAgB,EAEhBD,KAAAE,WAAa,EAGbF,KAAAG,WAAa,EAMbH,KAAAI,OAAc,GAGrBJ,KAAAR,KAAO,SAACa,GACJN,EAAKK,OAAOZ,KAAKa,IAIrBL,KAAAlB,OAAS,WACL,OAAOiB,EAAKK,OAAOtB,QAIfkB,KAAAM,KAAO,SAACC,EAAoBC,EAAeC,GAC/C,IAAML,EAA2BM,EAAeC,kBAAqBZ,EAAKa,WAG1E,OAFAR,EAAOK,SAAWA,EAClBC,EAAeG,8BAA8BN,EAAMC,EAAUJ,GACtDA,GAIXJ,KAAAjB,KAAO,SAACwB,GACJ,OAAIR,EAAKe,SACEJ,EAAeK,UAAUC,IAAIN,EAAeO,SAASlB,EAAKe,UAAW,CAACI,QAASR,EAAeQ,UAAUC,KAC3GC,EAAAA,KAAI,SAAAZ,GAAY,OAAAT,EAAKO,KAAKC,EAAMC,EAAUT,EAAKU,aAC/CY,EAAAA,YAAW,SAAA5B,GAAS,OAAA6B,EAAAA,WAAqB7B,OAE1C6B,EAAAA,WAAqB,oBAIhCtB,KAAAuB,KAAO,SAAChB,GACJ,OAAIR,EAAKyB,SACEd,EAAeK,UAAUC,IAAIN,EAAeO,SAASlB,EAAKyB,UAAW,CAACN,QAASR,EAAeQ,UAAUC,KAC3GC,EAAAA,KAAI,SAAAZ,GAAY,OAAAT,EAAKO,KAAKC,EAAMC,EAAUT,EAAKU,aAC/CY,EAAAA,YAAW,SAAA5B,GAAS,OAAA6B,EAAAA,WAAqB7B,OAE1C6B,EAAAA,WAAqB,oBAIhCtB,KAAAyB,MAAQ,SAAClB,GACL,OAAIR,EAAK2B,UACEhB,EAAeK,UAAUC,IAAIN,EAAeO,SAASlB,EAAK2B,WAAY,CAACR,QAASR,EAAeQ,UAAUC,KAC5GC,EAAAA,KAAI,SAAAZ,GAAY,OAAAT,EAAKO,KAAKC,EAAMC,EAAUT,EAAKU,aAC/CY,EAAAA,YAAW,SAAA5B,GAAS,OAAA6B,EAAAA,WAAqB7B,OAE1C6B,EAAAA,WAAqB,qBAIhCtB,KAAA2B,KAAO,SAACpB,GACJ,OAAIR,EAAK6B,SACElB,EAAeK,UAAUC,IAAIN,EAAeO,SAASlB,EAAK6B,UAAW,CAACV,QAASR,EAAeQ,UAAUC,KAC3GC,EAAAA,KAAI,SAAAZ,GAAY,OAAAT,EAAKO,KAAKC,EAAMC,EAAUT,EAAKU,aAC/CY,EAAAA,YAAW,SAAA5B,GAAS,OAAA6B,EAAAA,WAAqB7B,OAE1C6B,EAAAA,WAAqB,oBAIhCtB,KAAA6B,KAAO,SAACtB,EAAoBJ,GACxBJ,EAAK+B,SAAW/B,EAAK+B,SAASC,QAAQ,oBAAqB,IAC3DhC,EAAK+B,SAAW/B,EAAK+B,SAASC,QAAQ,UAAW,IACjD,IAAIC,EAAYC,EAAAA,MAAUvB,EAAeO,SAASlB,EAAK+B,WACnDI,EAAgBpC,EAAcqC,aAAaH,EAAUE,MAAO,OAAQnC,EAAKqC,SAASC,YACtFH,EAAQpC,EAAcqC,aAAaD,EAAO,OAAQ/B,EAAWkC,YAG7D,IAAIC,EAAMN,EAAUE,MAChBxB,EAAeO,SAASlB,EAAK+B,UAAUC,QAAQC,EAAUE,MAAOA,GAASxB,EAAeO,SAASlB,EAAK+B,UAAUlC,OAAOsC,GAE3H,OADAI,EAAMvC,EAAKwC,YAAYD,GAChB5B,EAAeK,UAAUC,IAAIsB,EAAK,CAACpB,QAASR,EAAeQ,UAAUC,KACxEC,EAAAA,KAAI,SAAAZ,GAAY,OAAAT,EAAKO,KAAKC,EAAMC,EAAUT,EAAKU,aAC/CY,EAAAA,YAAW,SAAA5B,GAAS,OAAA6B,EAAAA,WAAqB7B,QAIjDO,KAAAwC,aAAe,SAACjC,OAAoB,IAAAkC,EAAA,GAAAC,EAAA,EAAAA,EAAA/C,UAAAb,OAAA4D,IAAAD,EAAAC,EAAA,GAAA/C,UAAA+C,GAChC3C,EAAK+B,SAAW/B,EAAK+B,SAASC,QAAQ,oBAAqB,IAC3DhC,EAAK+B,SAAW/B,EAAK+B,SAASC,QAAQ,UAAW,IACjD,IAAIO,EAAM5B,EAAeO,SAASlB,EAAK+B,UAAUlC,OAAO,IAAK,QAASG,EAAKqC,SAASC,WAAY,SAAUtC,EAAKI,WAAWkC,YAE1H,OADAC,EAAMvC,EAAKwC,YAAYD,GAChB5B,EAAeK,UAAUC,IAAIsB,EAAK,CAACpB,QAASR,EAAeQ,UAAUC,KACxEC,EAAAA,KAAI,SAAAZ,GAAY,OAAAT,EAAKO,KAAKC,EAAMC,EAAUiC,MAC1CpB,EAAAA,YAAW,SAAA5B,GAAS,OAAA6B,EAAAA,WAAqB7B,QAIjDO,KAAA2C,KAAO,SAACpC,EAAoBoC,GACxB,IAAIL,EAAM5B,EAAeO,SAASlB,EAAK+B,UAAUlC,OAAO,IAAK,QAAS+C,EAAKN,YAE3E,OADAC,EAAMvC,EAAKwC,YAAYD,GAChB5B,EAAeK,UAAUC,IAAIsB,EAAK,CAACpB,QAASR,EAAeQ,UAAUC,KACxEC,EAAAA,KAAI,SAAAZ,GAAY,OAAAT,EAAKO,KAAKC,EAAMC,EAAUT,EAAKU,aAC/CY,EAAAA,YAAW,SAAA5B,GAAS,OAAA6B,EAAAA,WAAqB7B,eAIzCK,EAAA8C,UAAAL,YAAA,SAAYD,WAChB,GAAItC,KAAKS,aACL,IAAmB,IAAAoC,EAAAvE,EAAA0B,KAAKS,UAAQqC,EAAAD,EAAA9D,QAAA+D,EAAA7D,KAAA6D,EAAAD,EAAA9D,OAAE,CAA7B,IAAMgE,EAAID,EAAA9D,MACXsD,EAAMA,EAAI1C,OAAO,SAAUmD,EAAKC,KAAM,IAAKD,EAAKE,yGAGxD,OAAOX,GAIIxC,EAAAqC,aAAP,SAAoBD,EAAegB,EAAelE,GACtD,GAAIkD,EAAO,CACP,IAAIiB,EAAcjB,EAAMkB,QAAQF,GAC5BG,GAAiD,GAA5BnB,EAAMkB,QAAQ,IAAKD,GAAajB,EAAMkB,QAAQ,IAAKD,GAAOjB,EAAMkB,QAAQ,IAAKD,GAEtG,IAAY,GAARA,EAAW,CACX,IAAIG,EAAapB,EAAMqB,UAAUJ,EAAKE,GACtCnB,EAAQA,EAAMH,QAAQuB,EAAYJ,EAAQ,IAAMlE,QAEhDkD,EAAQA,EAAMtC,OAAO,IAAMsD,EAAQ,IAAMlE,QAG7CkD,EAAQ,IAAMgB,EAAQ,IAAMlE,EAEhC,OAAOkD,qBC/Jf,SAAAxB,YAwBWA,EAAA8C,aAAP,SAAoBC,EAAoBC,eACpC,GAAIA,EAAS,CAET,GAAIA,EAAQD,WACR,IAAoB,IAAAX,EAAAxE,EAAAoF,EAAQD,QAAME,EAAAb,EAAA/D,QAAA4E,EAAA1E,KAAA0E,EAAAb,EAAA/D,OAAE,CAA/B,IAAM6E,EAAKD,EAAA3E,MACZyE,EAASA,EAAOI,OAAOD,EAAME,IAAKF,EAAM5E,MAAMqD,8GAQtD,GAJIqB,EAAQf,OACRc,EAASA,EAAOI,OAAO,OAAQH,EAAQf,KAAKN,aAG5CqB,EAAQjB,SACR,IAAgB,IAAAsB,EAAAzF,EAAAoF,EAAQjB,MAAIuB,EAAAD,EAAAhF,QAAAiF,EAAA/E,KAAA+E,EAAAD,EAAAhF,OAAE,CAAzB,IAAMP,EAACwF,EAAAhF,MACJiF,EAAa,GACjBA,EAAazF,EAAEwE,KAAOiB,EAAWrE,OAAOpB,EAAEwE,MAAQiB,EAClDA,EAAazF,EAAEyE,MAAQgB,EAAWrE,OAAO,KAAKA,OAAOpB,EAAEyE,OAASgB,EAChER,EAASA,EAAOI,OAAO,OAAQI,sGAK3C,OAAOR,GAIJ/C,EAAAwD,iBAAP,SAAwBC,GAAxB,IAAApE,EAAAC,KACUI,EAAc,cACT0D,GACP,IAAKM,EAAAA,kBAAkBD,EAASL,IAC5B,GAAIpD,EAAe2D,UAAUF,EAASL,IACjCQ,MAAK,SAACD,GAAsB,MAAa,YAAbA,KACzBF,EAASL,GAAa,SACtB1D,EAAO0D,GAAOK,EAASL,GAAa,OAAQ,KAAQ,WACrD,GAAIS,MAAMC,QAAQL,EAASL,IAAO,CACrC,IAAIW,EAAeN,EAASL,GACxBW,IACArE,EAAO0D,GAAO,IAAIS,MAClBE,EAAMC,SAAQ,SAACC,GACPC,EAAAA,YAAYD,GACZvE,EAAO0D,GAAKtE,KAAKmF,GAGjBvE,EAAO0D,GAAKtE,KAAKO,EAAKmE,iBAAiBS,aAKnDvE,EAAO0D,GAAOK,EAASL,IApBnC,IAAK,IAAMA,KAAOK,IAAPL,GAwBX,OAAO1D,GAIJM,EAAAC,kBAAP,SAA6CC,GACzC,IAAIiE,EAAkC,IAAI/E,EAE1C,OADA+E,EAAcjE,UAAYA,EACnBiE,GAIJnE,EAAAoE,aAAP,SAAoBC,GAChB,IACIC,EADgB,mBACUC,KAAKF,EAAIG,YAAY7C,YACnD,OAAQ2C,GAAWA,EAAQlG,OAAS,EAAKkG,EAAQ,GAAK,IAKnDtE,EAAA2D,UAAP,SAAiBc,GAKb,IAJA,IAEId,EAFAe,EAAa,GACbL,EAAM3G,OAAOiH,eAAeF,GAG0B,YAAlDd,EAAY3D,EAAeoE,aAAaC,KAC5CK,EAAW5F,KAAK6E,GAChBU,EAAM3G,OAAOiH,eAAeN,GAGhC,OAAOK,GAIJ1E,EAAAG,8BAAP,SAAyDN,EAAoB+E,EACpBlF,EAA0BmF,EAAyBC,mBACxG,IAAgC,IAAA1C,EAAAxE,EAAAF,OAAOqH,KAAKH,EAAQlF,EAAOQ,aAAW+C,EAAAb,EAAA/D,QAAA4E,EAAA1E,KAAA0E,EAAAb,EAAA/D,OAAE,CAAnE,IAAM2G,EAAiB/B,EAAA3E,MACxB,IAAIwG,GAAiBA,GAAgBE,GAAmBF,EAAc,CAClE,IACMG,EADcL,EAAQlF,EAAOQ,WACZ8E,OACvB,IAAiB,IAAAE,GAAAC,OAAA,EAAAvH,EAAAqH,IAAKG,EAAAF,EAAA7G,QAAA+G,EAAA7G,KAAA6G,EAAAF,EAAA7G,OAAE,CAAnB,IAAIgE,EAAI+C,EAAA9G,MACL+G,EAAc,IAAIxF,EACtBwF,EAAW/F,KAAKgG,eAAeT,EAASG,EAAmBK,GAE3D/F,KAAKiG,oBAAoBF,EAAUhD,GACnC3C,EAAOZ,KAAKuG,yMAexB,OAVA3F,EAAOH,cAAgBqF,EAAQzD,KAAOyD,EAAQzD,KAAK5B,cAAgBG,EAAOtB,OAC1EsB,EAAOF,WAAaoF,EAAQzD,KAAOyD,EAAQzD,KAAK3B,WAAa,EAC7DE,EAAOD,WAAamF,EAAQzD,KAAOyD,EAAQzD,KAAKqE,OAAS,EACzD9F,EAAOgC,SAAWkD,EAAQzD,KAAOyD,EAAQzD,KAAKc,KAAO,GAErDvC,EAAO0B,SAAWwD,EAAQa,QAAUb,EAAQa,OAAOC,KAAOd,EAAQa,OAAOC,KAAKC,UAAOC,EACrFlG,EAAOU,SAAWwE,EAAQa,QAAUb,EAAQa,OAAOpH,KAAOuG,EAAQa,OAAOpH,KAAKsH,UAAOC,EACrFlG,EAAOoB,SAAW8D,EAAQa,QAAUb,EAAQa,OAAO5E,KAAO+D,EAAQa,OAAO5E,KAAK8E,UAAOC,EACrFlG,EAAOsB,UAAY4D,EAAQa,QAAUb,EAAQa,OAAO1E,MAAQ6D,EAAQa,OAAO1E,MAAM4E,UAAOC,EACxFlG,EAAOwB,SAAW0D,EAAQa,QAAUb,EAAQa,OAAOxE,KAAO2D,EAAQa,OAAOxE,KAAK0E,UAAOC,EAC9ElG,GAIJM,EAAAsF,eAAP,SAA0CT,EAAyBG,EAA2BK,GAC1F,GAAIR,GAAWA,EAAQgB,SAAU,CAC7B,IAAId,EAAOF,EAAQgB,SAASd,OAC5BlB,MAAMiC,KAAKf,GAAMf,SAAQ,SAAC+B,GACtB,GAAIf,EAAkBgB,cAAcC,WAAWF,EAAWC,eAAgB,CACtE,IAAIE,EAA0BrB,EAAQgB,SAASvF,IAAIyF,GACnDV,EAAW,IAAIa,MAI3B,OAAOb,GAIJrF,EAAAuF,oBAAP,SAA+CY,EAAWvB,GACtD,IAAK,IAAMwB,KAAKxB,EAKZuB,EAAOC,GAAKxB,EAAQwB,GAExB,OAAOD,GAIJnG,EAAAqG,YAAP,SAAmBC,GACftG,EAAesG,UAAYA,GAIxBtG,EAAAuG,WAAP,SAAkBC,GACdxG,EAAewG,SAAWA,GAIhBxG,EAAAyG,OAAP,WACH,OAAOzG,EAAesG,WAAyC,IAA5BtG,EAAesG,UAC9CtG,EAAe0G,SAAS1G,EAAesG,WACvCtG,EAAe0G,SAAS1G,EAAewG,WAIhCxG,EAAA0G,SAAP,SAAgB9E,GACpB,IAAI+E,EAAYpF,EAAAA,MAAUK,GAC1B,OAAI8B,EAAAA,kBAAkBiD,EAAUC,SAAWhF,GAA8B,KAAvBA,EAAIA,EAAIxD,OAAS,GACxDwD,EAAM,IACVA,GAIG5B,EAAAO,SAAP,SAAgBsG,GACnB,OAAK7G,EAAesG,WAAyC,IAA5BtG,EAAesG,UAEzCtG,EAAe0G,SAASG,EAAIxF,QAAQrB,EAAewG,SAAUxG,EAAesG,YADxEO,GAKD7G,EAAA8G,QAAP,SAAeC,GAClB/G,EAAe+G,KAAOA,GAIZ/G,EAAAK,QAAP,WACH,OAAOL,EAAe+G,MAInB/G,EAAAgH,WAAP,WACI,OAAOhH,EAAewG,eA9MZxG,EAAAQ,QAAuB,IAAIyG,EAAAA,YAE1BjH,EAAAsG,UAAoB,KAEpBtG,EAAAwG,SAAmB,KAEnBxG,EAAA+G,KAAmB,sBCNlC,SAAAG,EAA4DC,GAAA7H,KAAA6H,6BAAAA,EACxDnH,EAAeqG,YAAYc,EAA6BC,eACxDpH,EAAeuG,WAAWY,EAA6BH,cACvDhH,EAAe8G,QAAQK,EAA6B9G,kBAIjD6G,EAAAhF,UAAAmF,4CAAA,SAA4CF,GACtD7H,KAAK6H,6BAA+BA,EAE7BnH,EAAeqG,YAAYc,EAA6BC,eACxDpH,EAAeuG,WAAWY,EAA6BH,cACvDhH,EAAe8G,QAAQK,EAA6B9G,YAIjD6G,EAAAhF,UAAAoF,yBAAA,WACH,OAAOhI,KAAK6H,6BAA6BG,4BAItCJ,EAAAhF,UAAAkF,YAAA,WACH,OAAO9H,KAAK6H,6BAA6BC,eAItCF,EAAAhF,UAAA8E,WAAA,WACH,OAAO1H,KAAK6H,6BAA6BH,cAItCE,EAAAhF,UAAAuE,OAAA,WACH,OAAOzG,EAAeyG,UAInBS,EAAAhF,UAAA7B,QAAA,WACH,OAAOL,EAAeK,iDAxCjB6G,GAAeK,EAAAC,SAGJ,sEAHXN,EAAeO,QAAfP,EAAeQ,wBCYxB,SAAAC,EAAoBC,GAAAtI,KAAAsI,gBAAAA,SAILD,EAAAlB,OAAP,WACJ,OAAOzG,EAAeyG,UAInBkB,EAAAzF,UAAA2F,OAAA,SAA2BhI,EAAoB4D,EAAkBvD,EAAmB8C,EAAsB8E,EAA0BhD,EAAsBiD,GAC7J,IAAInG,EAAMtC,KAAK0I,eAAevE,GAC1BsE,IACAnG,EAAMA,EAAI1C,OAAO,qBAErB,IAAM6D,EAAS/C,EAAe8C,aAAa,IAAImF,EAAAA,WAAcjF,GACvDtD,EAA2BM,EAAeC,kBAAqBC,GAKrE,OAHAZ,KAAK4I,QAAQxI,GACbA,EAAOK,SAAWiD,EAAUA,EAAQjB,UAAO6D,EAC1B5F,EAAeK,UAAUC,IAAIsB,EAAK,CAAEpB,QAASR,EAAeQ,QAASuC,OAAQA,IAC5EtC,KAAKC,EAAAA,KAAI,SAAAZ,GAAY,OAAAE,EAAeG,8BAA8BN,EAAMC,EAAUJ,EAAQoI,EAAQhD,MAChHnE,EAAAA,YAAW,SAAA5B,GAAS,OAAA6B,EAAAA,WAAqB7B,QAI1C4I,EAAAzF,UAAA5B,IAAA,SAAwBT,EAAoB4D,EAAkB0E,GACjE,IAAMvG,EAAMtC,KAAK0I,eAAevE,GAAUvE,OAAO,IAAKiJ,EAAI,oBACpDzI,EAAY,IAAIG,EAItB,OAFAP,KAAK8I,gBAAgB1I,GACJM,EAAeK,UAAUC,IAAIsB,EAAK,CAAEpB,QAASR,EAAeQ,UAC3DC,KAAKC,EAAAA,KAAI,SAAA2H,GAAQ,OAAArI,EAAeuF,oBAAoB7F,EAAQ2I,MAC1E1H,EAAAA,YAAW,SAAA5B,GAAS,OAAA6B,EAAAA,WAAqB7B,QAI1C4I,EAAAzF,UAAAoG,cAAA,SAAkCzI,EAAoB0I,GACzD,IAAM7I,EAAY,IAAIG,EAItB,OAFAP,KAAK8I,gBAAgB1I,GACJM,EAAeK,UAAUC,IAAIN,EAAeO,SAASgI,GAAe,CAAE/H,QAASR,EAAeQ,UAC7FC,KAAKC,EAAAA,KAAI,SAAA2H,GAAQ,OAAArI,EAAeuF,oBAAoB7F,EAAQ2I,MAC1E1H,EAAAA,YAAW,SAAA5B,GAAS,OAAA6B,EAAAA,WAAqB7B,QAI1C4I,EAAAzF,UAAA0E,OAAA,SAA2B/G,EAAoB2B,EAAeiC,EAAkBvD,EAAmB8C,GACtG,IAAMpB,EAAMtC,KAAK0I,eAAevE,GAAUvE,OAAO,WAAYsC,GACvDuB,EAAS/C,EAAe8C,aAAa,IAAImF,EAAAA,WAAcjF,GACvDtD,EAA2BM,EAAeC,kBAAqBC,GAIrE,OAFAZ,KAAK4I,QAAQxI,GACIM,EAAeK,UAAUC,IAAIsB,EAAK,CAAEpB,QAASR,EAAeQ,QAASuC,OAAQA,IAC5EtC,KAAKC,EAAAA,KAAI,SAAAZ,GAAY,OAAAE,EAAeG,8BAA8BN,EAAMC,EAAUJ,MAChGiB,EAAAA,YAAW,SAAA5B,GAAS,OAAA6B,EAAAA,WAAqB7B,QAI1C4I,EAAAzF,UAAAsG,aAAA,SAAiC3I,EAAoB2B,EAAeiC,EAAkBT,GACzF,IAAMpB,EAAMtC,KAAK0I,eAAevE,GAAUvE,OAAO,WAAYsC,GACvDuB,EAAS/C,EAAe8C,aAAa,IAAImF,EAAAA,WAAcjF,GACvDtD,EAAY,IAAIG,EAItB,OAFAP,KAAK8I,gBAAgB1I,GACJM,EAAeK,UAAUC,IAAIsB,EAAK,CAAEpB,QAASR,EAAeQ,QAASuC,OAAQA,IAC5EtC,KAAKC,EAAAA,KAAI,SAAAZ,GAAY,OAAAE,EAAeuF,oBAAoB7F,EAAQI,MAC9Ea,EAAAA,YAAW,SAAA5B,GAAS,OAAA6B,EAAAA,WAAqB7B,QAI1C4I,EAAAzF,UAAAuG,YAAA,SAAgC5I,EAAoB2B,EAAeiC,EAAkBvD,EAAmB8C,GAC3G,IAAMpB,EAAMtC,KAAK0I,eAAevE,EAAWjC,GACrCuB,EAAS/C,EAAe8C,aAAa,IAAImF,EAAAA,WAAcjF,GACvDtD,EAA2BM,EAAeC,kBAAqBC,GAIrE,OAFAZ,KAAK4I,QAAQxI,GACIM,EAAeK,UAAUC,IAAIsB,EAAK,CAAEpB,QAASR,EAAeQ,QAASuC,OAAQA,IAC5EtC,KAAKC,EAAAA,KAAI,SAAAZ,GAAY,OAAAE,EAAeG,8BAA8BN,EAAMC,EAAUJ,MAChGiB,EAAAA,YAAW,SAAA5B,GAAS,OAAA6B,EAAAA,WAAqB7B,QAI1C4I,EAAAzF,UAAAwG,cAAA,SAAkC7I,EAAoB0I,GACzD,IAAI7I,EAAY,IAAIG,EAIpB,OAFAP,KAAK8I,gBAAgB1I,GACJM,EAAeK,UAAUC,IAAIiI,EAAc,CAAE/H,QAASR,EAAeQ,UACpEC,KAAKC,EAAAA,KAAI,SAAA2H,GAAQ,OAAArI,EAAeuF,oBAAoB7F,EAAQ2I,MAC1E1H,EAAAA,YAAW,SAAA5B,GAAS,OAAA6B,EAAAA,WAAqB7B,QAI1C4I,EAAAzF,UAAAyG,mBAAA,SAAuC9I,EAAoB0I,EAAsBrI,EAAmB2E,GACvG,IAAMnF,EAA2BM,EAAeC,kBAAqBC,GAIrE,OAFAZ,KAAK4I,QAAQxI,GACIM,EAAeK,UAAUC,IAAIiI,EAAc,CAAE/H,QAASR,EAAeQ,UACpEC,KAAKC,EAAAA,KAAI,SAAAZ,GAAY,OAAAE,EAAeG,8BAA8BN,EAAMC,EAAUJ,EAAQmF,MACxGlE,EAAAA,YAAW,SAAA5B,GAAS,OAAA6B,EAAAA,WAAqB7B,QAI1C4I,EAAAzF,UAAA0G,MAAA,SAAMnF,GACT,IAAM7B,EAAMtC,KAAK0I,eAAevE,GAAUvE,OAAO,oBAEjD,OAAOc,EAAeK,UAAUC,IAAIsB,EAAK,CAAEpB,QAASR,EAAeQ,QAASqI,QAAS,SAAUpI,KAC3FC,EAAAA,KAAI,SAACZ,GAAuB,OAAAgJ,OAAOhJ,EAASiJ,SAC5CpI,EAAAA,YAAW,SAAA5B,GAAS,OAAA6B,EAAAA,WAAqB7B,QAI1C4I,EAAAzF,UAAAvE,OAAA,SAA2BqL,EAAsB7C,GACpD,IAAMvE,EAAM5B,EAAeyG,SAAWuC,EAChCpE,EAAU5E,EAAewD,iBAAiB2C,GAIhD,OAFA7G,KAAK8I,gBAAgBjC,GACJnG,EAAeK,UAAU4I,KAAKrH,EAAKgD,EAAS,CAAEpE,QAASR,EAAeQ,QAASqI,QAAS,aACvFpI,KAAKC,EAAAA,KAAI,SAACZ,GACxB,GAAIA,EAASoJ,QAAU,KAAOpJ,EAASoJ,QAAU,IAC7C,OAAOlJ,EAAeuF,oBAAoBY,EAAQrG,EAASiJ,MAC1D,GAAuB,KAAnBjJ,EAASoJ,OAAe,CAC7B,IAAIH,EAAYjJ,EAASiJ,KACzB,OAAOnI,EAAAA,WAAqBmI,EAAKhK,WAErC4B,EAAAA,YAAW,SAAA5B,GAAS,OAAA6B,EAAAA,WAAqB7B,QAI1C4I,EAAAzF,UAAAiH,OAAA,SAA2BhD,GAC9B,IAAMvE,EAAM5B,EAAeO,SAAS4F,EAAOV,OAAOC,KAAKC,MACjDf,EAAU5E,EAAewD,iBAAiB2C,GAGhD,OAFA7G,KAAK8I,gBAAgBjC,GACJnG,EAAeK,UAAU+I,IAAIxH,EAAKgD,EAAS,CAAEpE,QAASR,EAAeQ,QAASqI,QAAS,aACtFpI,KAAKC,EAAAA,KAAI,SAACZ,GACxB,GAAIA,EAASoJ,QAAU,KAAOpJ,EAASoJ,QAAU,IAC7C,OAAOlJ,EAAeuF,oBAAoBY,EAAQrG,EAASiJ,MAC1D,GAAuB,KAAnBjJ,EAASoJ,OAAe,CAC7B,IAAIH,EAAYjJ,EAASiJ,KACzB,OAAOnI,EAAAA,WAAqBmI,EAAKhK,WAErC4B,EAAAA,YAAW,SAAA5B,GAAS,OAAA6B,EAAAA,WAAqB7B,QAI1C4I,EAAAzF,UAAAmH,iBAAA,SAAqClF,EAAiCoE,GACzE,IAAM3G,EAAM5B,EAAeO,SAASgI,GAGhCe,EAAatJ,EAAeQ,QAGhC,OAFA8I,EAAWC,IAAI,eAAgB,iBACdvJ,EAAeK,UAAU+I,IAAIxH,EAAKuC,EAAe,CAAE3D,QAAS8I,EAAYT,QAAS,aAChFpI,KAAKC,EAAAA,KAAI,SAACZ,GACxB,GAAIA,EAASoJ,QAAU,KAAOpJ,EAASoJ,QAAU,IAC7C,MAAO,GACN,GAAuB,KAAnBpJ,EAASoJ,OAAe,CAC7B,IAAIH,EAAYjJ,EAASiJ,KACzB,OAAOnI,EAAAA,WAAqBmI,EAAKhK,WAErC4B,EAAAA,YAAW,SAAA5B,GAAS,OAAA6B,EAAAA,WAAqB7B,QAI1C4I,EAAAzF,UAAAsH,MAAA,SAA0BrD,GAC7B,IAAMvE,EAAM5B,EAAeO,SAAS4F,EAAOV,OAAOC,KAAKC,MACjDf,EAAU5E,EAAewD,iBAAiB2C,GAGhD,OAFA7G,KAAK8I,gBAAgBjC,GACJnG,EAAeK,UAAUmJ,MAAM5H,EAAKgD,EAAS,CAAEpE,QAASR,EAAeQ,QAASqI,QAAS,aACxFpI,KAAKC,EAAAA,KAAI,SAACZ,GACxB,GAAIA,EAASoJ,QAAU,KAAOpJ,EAASoJ,QAAU,IAC7C,OAAOlJ,EAAeuF,oBAAoBY,EAAQrG,EAASiJ,MAC1D,GAAuB,KAAnBjJ,EAASoJ,OAAe,CAC7B,IAAIH,EAAYjJ,EAASiJ,KACzB,OAAOnI,EAAAA,WAAqBmI,EAAKhK,WAErC4B,EAAAA,YAAW,SAAA5B,GAAS,OAAA6B,EAAAA,WAAqB7B,QAI1C4I,EAAAzF,UAAAuH,OAAA,SAA2BtD,GAC9B,IAAMvE,EAAM5B,EAAeO,SAAS4F,EAAOV,OAAOC,KAAKC,MACvD,OAAO3F,EAAeK,UAAUoJ,OAAO7H,EAAK,CAAEpB,QAASR,EAAeQ,UAAWC,KAAKE,EAAAA,YAAW,SAAA5B,GAAS,OAAA6B,EAAAA,WAAqB7B,QAI5H4I,EAAAzF,UAAAwH,QAAA,SAA4BvF,GAC/B,OAAiCyB,MAA1BzB,EAAc/D,UAIlBuH,EAAAzF,UAAAyH,QAAA,SAA4BxF,GAC/B,OAAiCyB,MAA1BzB,EAAcrD,UAIlB6G,EAAAzF,UAAA0H,SAAA,SAA6BzF,GAChC,OAAkCyB,MAA3BzB,EAAcnD,WAIlB2G,EAAAzF,UAAA2H,QAAA,SAA4B1F,GAC/B,OAAiCyB,MAA1BzB,EAAcjD,UAIlByG,EAAAzF,UAAA7D,KAAA,SAAyB8F,EAAiCtE,GAC7D,OAAOsE,EAAc9F,KAAKwB,IAIvB8H,EAAAzF,UAAArB,KAAA,SAAyBsD,EAAiCtE,GAC7D,OAAOsE,EAActD,KAAKhB,IAIvB8H,EAAAzF,UAAAnB,MAAA,SAA0BoD,EAAiCtE,GAC9D,OAAOsE,EAAcpD,MAAMlB,IAIxB8H,EAAAzF,UAAAjB,KAAA,SAAyBkD,EAAiCtE,GAC7D,OAAOsE,EAAclD,KAAKpB,IAIvB8H,EAAAzF,UAAAf,KAAA,SAAyBgD,EAAiCtE,EAAoBsI,GACjF,OAAOhE,EAAchD,KAAKtB,EAAMsI,IAI7BR,EAAAzF,UAAAJ,aAAA,SAAiCqC,EAAiCtE,OAAoB,IAAAkC,EAAA,GAAAC,EAAA,EAAAA,EAAA/C,UAAAb,OAAA4D,IAAAD,EAAAC,EAAA,GAAA/C,UAAA+C,GACzF,OAAOmC,EAAcrC,aAAYgI,MAA1B3F,EAAanF,EAAA,CAAca,GAASkC,KAIxC4F,EAAAzF,UAAAD,KAAA,SAAyBkC,EAAiCtE,EAAoBoC,GACjF,OAAOkC,EAAclC,KAAKpC,EAAMoC,IAI7B0F,EAAAzF,UAAA8F,eAAA,SAAevE,GAClB,IAAIoD,EAAMc,EAAgBlB,SAI1B,OAHKI,EAAIkD,SAAS,OACdlD,EAAMA,EAAI3H,OAAO,MAEjBuE,EACOoD,EAAI3H,OAAOuE,GAEfoD,GAIHc,EAAAzF,UAAAgG,QAAA,SAA4BxI,GAChCA,EAAOsK,SAAW1K,KAAKsI,gBAAgBR,cACvC1H,EAAOuK,QAAU3K,KAAKsI,gBAAgBZ,cAIlCW,EAAAzF,UAAAkG,gBAAA,SAAoC1I,GACxCA,EAAOsK,SAAW1K,KAAKsI,gBAAgBR,cACvC1H,EAAOuK,QAAU3K,KAAKsI,gBAAgBZ,oDAvQjCW,GAAeJ,EAAAC,SAAAN,yCAAfS,EAAeF,QAAfE,EAAeD,wBCaxB,SAAAwC,EAAYrK,EACA4D,EACQ0G,EACRjK,GADQZ,KAAA6K,SAAAA,EALZ7K,KAAAY,UAAoB,YAOxBZ,KAAKO,KAAOA,EACZP,KAAKmE,SAAWA,EAChBnE,KAAK8K,gBAAkBD,EAAS7J,IAAIqH,GAC/BjE,EAAAA,kBAAkBxD,KACnBZ,KAAKY,UAAYA,UAIfgK,EAAAhI,UAAAmI,YAAA,SAAYtL,GAClB,OAAOmL,EAAYG,YAAYtL,IAIlBmL,EAAAG,YAAP,SAAmBtL,GACzB,OAAO6B,EAAAA,WAAqB7B,IAIzBmL,EAAAhI,UAAA2F,OAAA,SAAO7E,EAAsB8E,EAA0BhD,EAAsBiD,GAA7E,IAAA1I,EAAAC,KACH,OAAOA,KAAK8K,gBAAgBvC,OAAOvI,KAAKO,KAAMP,KAAKmE,SAAUnE,KAAKY,UAAW8C,EAAS8E,EAAQhD,EAAciD,GAAkBtH,KAC1H6J,EAAAA,UAAS,SAACnG,GACN,OAAInB,GAAWA,EAAQuH,WAAa7G,EAAAA,kBAAkBS,EAAcnD,YAChEgC,EAAQuH,UAAW,EACnBvH,EAAQf,KAAOkC,EAAc5E,cACtBF,EAAKwI,OAAO7E,KAEnB3D,EAAK8E,cAAgBA,EACdqG,EAAAA,GAAarG,EAAczE,cAM3CwK,EAAAhI,UAAA5B,IAAA,SAAI6H,GACP,OAAO7I,KAAK8K,gBAAgB9J,IAAIhB,KAAKO,KAAMP,KAAKmE,SAAU0E,IAIvD+B,EAAAhI,UAAAoG,cAAA,SAAcmC,GACjB,OAAOnL,KAAK8K,gBAAgB9B,cAAchJ,KAAKO,KAAM4K,IAIlDP,EAAAhI,UAAA0E,OAAA,SAAOpF,EAAewB,GAAtB,IAAA3D,EAAAC,KACH,OAAOA,KAAK8K,gBAAgBxD,OAAOtH,KAAKO,KAAM2B,EAAOlC,KAAKmE,SAAUnE,KAAKY,UAAW8C,GAASvC,KACzF6J,EAAAA,UAAS,SAACnG,GACN,OAAInB,GAAWA,EAAQuH,WAAa7G,EAAAA,kBAAkBS,EAAcnD,YAChEgC,EAAQuH,UAAW,EACnBvH,EAAQf,KAAOkC,EAAc5E,cACtBF,EAAKuH,OAAOpF,EAAOwB,KAE1B3D,EAAK8E,cAAgBA,EACdqG,EAAAA,GAAarG,EAAczE,cAM3CwK,EAAAhI,UAAAsG,aAAA,SAAahH,EAAewB,GAC/B,OAAO1D,KAAK8K,gBAAgB5B,aAAalJ,KAAKO,KAAM2B,EAAOlC,KAAKmE,SAAUT,IAIvEkH,EAAAhI,UAAAuG,YAAA,SAAYjH,EAAewB,GAA3B,IAAA3D,EAAAC,KACH,OAAOA,KAAK8K,gBAAgB3B,YAAYnJ,KAAKO,KAAM2B,EAAOlC,KAAKmE,SAAUnE,KAAKY,UAAW8C,GAASvC,KAC9F6J,EAAAA,UAAS,SAACnG,GACN,OAAInB,GAAWA,EAAQuH,WAAa7G,EAAAA,kBAAkBS,EAAcnD,YAChEgC,EAAQuH,UAAW,EACnBvH,EAAQf,KAAOkC,EAAc5E,cACtBF,EAAKoJ,YAAYjH,EAAOwB,KAE/B3D,EAAK8E,cAAgBA,EACdqG,EAAAA,GAAarG,EAAczE,cAO3CwK,EAAAhI,UAAAyG,mBAAA,SAAmB+B,EAAkB7F,GAArC,IAAAxF,EAAAC,KACH,OAAOA,KAAK8K,gBAAgBzB,mBAAmBrJ,KAAKO,KAAM6K,EAAUpL,KAAKY,UAAW2E,GAASpE,KACzFC,EAAAA,KAAI,SAACyD,GAED,OADA9E,EAAK8E,cAAgBA,EACdA,EAAczE,YAK1BwK,EAAAhI,UAAAwG,cAAA,SAAcgC,GACjB,OAAOpL,KAAK8K,gBAAgB1B,cAAcpJ,KAAKO,KAAM6K,IAIlDR,EAAAhI,UAAA0G,MAAA,WACH,OAAOtJ,KAAK8K,gBAAgBxB,MAAMtJ,KAAKmE,WAIpCyG,EAAAhI,UAAAvE,OAAA,SAAOwI,GACV,OAAO7G,KAAK8K,gBAAgBzM,OAAO2B,KAAKmE,SAAU0C,IAI/C+D,EAAAhI,UAAAiH,OAAA,SAAOhD,GACV,OAAO7G,KAAK8K,gBAAgBjB,OAAOhD,IAIhC+D,EAAAhI,UAAAsH,MAAA,SAAMrD,GACT,OAAO7G,KAAK8K,gBAAgBZ,MAAMrD,IAI/B+D,EAAAhI,UAAAuH,OAAA,SAAOtD,GACV,OAAO7G,KAAK8K,gBAAgBX,OAAOtD,IAIhC+D,EAAAhI,UAAAyI,aAAA,WACH,OAAIrL,KAAK6E,eAAiB7E,KAAK6E,cAAc5E,cAClCD,KAAK6E,cAAc5E,cACvB,GAIJ2K,EAAAhI,UAAA0H,SAAA,WACH,QAAItK,KAAK6E,eACE7E,KAAK8K,gBAAgBR,SAAStK,KAAK6E,gBAK3C+F,EAAAhI,UAAAwH,QAAA,WACH,QAAIpK,KAAK6E,eACE7E,KAAK8K,gBAAgBV,QAAQpK,KAAK6E,gBAK1C+F,EAAAhI,UAAAyH,QAAA,WACH,QAAIrK,KAAK6E,eACE7E,KAAK8K,gBAAgBT,QAAQrK,KAAK6E,gBAK1C+F,EAAAhI,UAAA2H,QAAA,WACH,QAAIvK,KAAK6E,eACE7E,KAAK8K,gBAAgBP,QAAQvK,KAAK6E,gBAK1C+F,EAAAhI,UAAA7D,KAAA,WAAA,IAAAgB,EAAAC,KACH,GAAIA,KAAK6E,cACL,OAAO7E,KAAK8K,gBAAgB/L,KAAKiB,KAAK6E,cAAe7E,KAAKO,MAAMY,KAC5DC,EAAAA,KAAI,SAACyD,GAED,OADA9E,EAAK8E,cAAgBA,EACdA,EAAczE,WAG7BkB,EAAAA,WAAqB,2BAItBsJ,EAAAhI,UAAArB,KAAA,WAAA,IAAAxB,EAAAC,KACH,GAAIA,KAAK6E,cACL,OAAO7E,KAAK8K,gBAAgBvJ,KAAKvB,KAAK6E,cAAe7E,KAAKO,MAAMY,KAC5DC,EAAAA,KAAI,SAACyD,GAED,OADA9E,EAAK8E,cAAgBA,EACdA,EAAczE,WAG7BkB,EAAAA,WAAqB,2BAItBsJ,EAAAhI,UAAAnB,MAAA,WAAA,IAAA1B,EAAAC,KACH,GAAIA,KAAK6E,cACL,OAAO7E,KAAK8K,gBAAgBrJ,MAAMzB,KAAK6E,cAAe7E,KAAKO,MACtDY,KACGC,EAAAA,KAAI,SAACyD,GAED,OADA9E,EAAK8E,cAAgBA,EACdA,EAAczE,WAIjCkB,EAAAA,WAAqB,2BAItBsJ,EAAAhI,UAAAjB,KAAA,WAAA,IAAA5B,EAAAC,KACH,GAAIA,KAAK6E,cACL,OAAO7E,KAAK8K,gBAAgBnJ,KAAK3B,KAAK6E,cAAe7E,KAAKO,MACrDY,KACGC,EAAAA,KAAI,SAACyD,GAED,OADA9E,EAAK8E,cAAgBA,EACdA,EAAczE,WAIjCkB,EAAAA,WAAqB,2BAItBsJ,EAAAhI,UAAAf,KAAA,SAAK1B,GAAL,IAAAJ,EAAAC,KACH,GAAIA,KAAK6E,cACL,OAAO7E,KAAK8K,gBAAgBjJ,KAAK7B,KAAK6E,cAAe7E,KAAKO,KAAMJ,GAAYgB,KACxEC,EAAAA,KAAI,SAACyD,GAED,OADA9E,EAAK8E,cAAgBA,EACdA,EAAczE,WAG7BkB,EAAAA,WAAqB,6CC7M7B,SAAAgK,YAVAlN,OAAAmN,eAAWD,EAAA1I,UAAA,WAAQ,KAAnB,WACI,OAAO5C,KAAKwL,eAIhB,SAAoBA,GAChBxL,KAAKwL,UAAYA,mCAQdF,EAAA1I,UAAA6I,iBAAA,SAAqClL,EAAoB6K,EAAkBxK,EAAoB8C,EAAsB6B,GAExH,IAAM9B,EAAS/C,EAAe8C,aAAa,IAAImF,EAAAA,WAAcjF,GACvDtD,EAA2BM,EAAeC,kBAAqByD,EAAAA,kBAAkBxD,GAAa,YAAcA,GAClH,OAAKwD,EAAAA,kBAAkBpE,KAAKmG,SAAY/B,EAAAA,kBAAkBpE,KAAKmG,OAAOiF,IAQ3DF,EAAAA,GAAa,IAPHxK,EAAeK,UAAUC,IAAIN,EAAeO,SAASjB,KAAKmG,OAAOiF,GAAU/E,MAAO,CAC/FnF,QAASR,EAAeQ,QACxBuC,OAAQA,IAEMtC,KAAKC,EAAAA,KAAI,SAAAZ,GAAY,OAAAE,EAAeG,8BAAiCN,EAAMC,EAAUJ,EAAQmF,MAC3GnE,EAAAA,KAAI,SAACqD,GAA4B,OAAAA,EAAMrE,YAO5CkL,EAAA1I,UAAA8I,YAAA,SAAgCnL,EAAoB6K,EAAkB7F,GACzE,IAAInF,EAAY,IAAIG,EACpB,OAAK6D,EAAAA,kBAAkBpE,KAAKmG,SAAY/B,EAAAA,kBAAkBpE,KAAKmG,OAAOiF,IAiB3DF,EAAAA,GAAa,MAhBHxK,EAAeK,UAAUC,IAAIN,EAAeO,SAASjB,KAAKmG,OAAOiF,GAAU/E,MAAO,CAACnF,QAASR,EAAeQ,UAC1GC,KAAKC,EAAAA,KAAI,SAAC2H,WACxB,GAAIxD,MACA,IAAgC,IAAA1C,EAAAvE,EAAAF,OAAOqH,KAAKsD,EAAa,SAAEjG,EAAAD,EAAA9D,QAAA+D,EAAA7D,KAAA6D,EAAAD,EAAA9D,OAAE,CAAxD,IAAM2G,EAAiB5C,EAAA9D,MACxB,GAAyB,QAArB0G,EAA6B,CAC7B,IAAIW,EAAe0C,EAAK5C,OAAOT,GAAmBW,KAC9ClD,EAAckD,EAAKsF,YAAY,KAC/BC,EAAgBvF,EAAKtE,QAAQrB,EAAegH,aAAc,IAAInE,UAAU,EAAGJ,GAC/E/C,EAASM,EAAesF,eAAeT,EAASqG,EAAexL,GAC/D,yGAIZ,OAAOM,EAAeuF,oBAAoB7F,EAAQ2I,QAQvDuC,EAAA1I,UAAAiJ,YAAA,SAAgCT,EAAkBjH,GACrD,GAAKC,EAAAA,kBAAkBpE,KAAKmG,SAAY/B,EAAAA,kBAAkBpE,KAAKmG,OAAOiF,IAIlE,OAAO9J,EAAAA,WAAqB,qBAH5B,IAAIwK,EAASpL,EAAeQ,QAAQ2C,OAAO,eAAgB,iBAC3D,OAAOnD,EAAeK,UAAU4I,KAAKjJ,EAAeO,SAASjB,KAAKmG,OAAOiF,GAAU/E,MAAOlC,EAASgC,OAAOC,KAAKC,KAAM,CAACnF,QAAS4K,KAOhIR,EAAA1I,UAAAmJ,eAAA,SAAmCX,EAAkBjH,GACxD,GAAKC,EAAAA,kBAAkBpE,KAAKmG,SAAY/B,EAAAA,kBAAkBpE,KAAKmG,OAAOiF,IAIlE,OAAO9J,EAAAA,WAAqB,qBAH5B,IAAIwK,EAASpL,EAAeQ,QAAQ2C,OAAO,eAAgB,iBAC3D,OAAOnD,EAAeK,UAAUmJ,MAAMxJ,EAAeO,SAASjB,KAAKmG,OAAOiF,GAAU/E,MAAOlC,EAASgC,OAAOC,KAAKC,KAAM,CAACnF,QAAS4K,KAOjIR,EAAA1I,UAAAoJ,mBAAA,SAAuCZ,EAAkBjH,GAC5D,GAAKC,EAAAA,kBAAkBpE,KAAKmG,SAAY/B,EAAAA,kBAAkBpE,KAAKmG,OAAOiF,IAIlE,OAAO9J,EAAAA,WAAqB,qBAH5B,IAAIwK,EAASpL,EAAeQ,QAAQ2C,OAAO,eAAgB,iBAC3D,OAAOnD,EAAeK,UAAU+I,IAAIpJ,EAAeO,SAASjB,KAAKmG,OAAOiF,GAAU/E,MAAOlC,EAASgC,OAAOC,KAAKC,KAAM,CAACnF,QAAS4K,KAQ/HR,EAAA1I,UAAAqJ,sBAAA,SAA0Cb,EAAkBc,GAC/D,GAAK9H,EAAAA,kBAAkBpE,KAAKmG,SAAY/B,EAAAA,kBAAkBpE,KAAKmG,OAAOiF,IAIlE,OAAO9J,EAAAA,WAAqB,qBAH5B,IAAIwK,EAASpL,EAAeQ,QAAQ2C,OAAO,eAAgB,iBAC3D,OAAOnD,EAAeK,UAAU+I,IAAIpJ,EAAeO,SAASjB,KAAKmG,OAAOiF,GAAU/E,MAAO6F,EAAU9K,KAAI,SAAC+C,GAAa,OAAAA,EAASgC,OAAOC,KAAKC,QAAO,CAACnF,QAAS4K,KAS5JR,EAAA1I,UAAAuJ,eAAA,SAAmCf,EAAkBjH,GACxD,GAAKC,EAAAA,kBAAkBpE,KAAKmG,SAAY/B,EAAAA,kBAAkBD,EAASgC,QAU/D,OAAO7E,EAAAA,WAAqB,qBAT5B,IAAI8K,EAAejI,EAASgC,OAAa,KAAEE,KACvClD,EAAciJ,EAAKT,YAAY,KAAO,EAE1C,IAAY,GAARxI,EACA,OAAO7B,EAAAA,WAAqB,qBAEhC,IAAI+K,EAAqBD,EAAK7I,UAAUJ,GACxC,OAAOzC,EAAeK,UAAUoJ,OAAOzJ,EAAeO,SAASjB,KAAKmG,OAAOiF,GAAU/E,KAAO,IAAMgG,GAAa,CAACnL,QAASR,EAAeQ,WAOzIoK,EAAA1I,UAAA0J,kBAAA,SAAsClB,GACzC,OAAO1K,EAAeK,UAAUoJ,OAAOzJ,EAAeO,SAASjB,KAAKmG,OAAOiF,GAAU/E,MAAQ,CAACnF,QAASR,EAAeQ,iDAjIxGoK,wCAAAA,EAAQnD,QAARmD,EAAQlD,wBCoB9B,SAAAmE,YACWA,EAAAC,QAAP,WACI,MAAO,CACHC,SAAUF,EACVG,UAAW,CACP9E,EACA+E,EAAAA,WACA,CACIC,QAASvE,EACTwE,SAAUxE,EACVyE,KAAM,CAAClF,4CAVd2E,iEAAAA,IAAgBG,UATd,CACP9E,EACA+E,EAAAA,WACA,CACIC,QAASvE,EACTwE,SAAUxE,EACVyE,KAAM,CAAClF,KACTmF,QAAA,CAVG,CAACC,EAAAA,kBAEAA,EAAAA,qFAUDT,EAAgB,CAAAQ,QAAA,CAZfC,EAAAA,kBAAgBC,QAAA,CAEhBD,EAAAA","sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    function next() {\r\n        while (env.stack.length) {\r\n            var rec = env.stack.pop();\r\n            try {\r\n                var result = rec.dispose && rec.dispose.call(rec.value);\r\n                if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n};\r\n","\r\nimport {throwError as observableThrowError} from 'rxjs';\r\n\r\nimport {catchError, map} from 'rxjs/operators';\r\nimport {Sort} from './sort';\r\nimport {ArrayInterface} from './array-interface';\r\nimport {ResourceHelper} from './resource-helper';\r\nimport {Resource} from './resource';\r\nimport * as url from 'url';\r\nimport {Observable} from 'rxjs';\r\n\r\n/** REST array of resource implementation */\r\nexport class ResourceArray<T extends Resource> implements ArrayInterface<T> {\r\n    /** sorting info */\r\n    public sortInfo: Sort[];\r\n    /** proxy url */\r\n    public proxyUrl: string;\r\n    /** root url */\r\n    public rootUrl: string;\r\n\r\n    /** self url */\r\n    public self_uri: string;\r\n    /** next resource url */\r\n    public next_uri: string;\r\n    /** previous resource url */\r\n    public prev_uri: string;\r\n    /** first resource url */\r\n    public first_uri: string;\r\n    /** last resource url */\r\n    public last_uri: string;\r\n\r\n    /** embedded array list */\r\n    public _embedded;\r\n\r\n    /** total number of elements in this array */\r\n    public totalElements = 0;\r\n    /** total number of pages in the response */\r\n    public totalPages = 1;\r\n    \r\n    /** page number in the response */\r\n    public pageNumber = 1;\r\n    \r\n    /** page size */\r\n    public pageSize: number;\r\n\r\n    /** array components */\r\n    public result: T[] = [];\r\n\r\n    /** push a new resource to the array */\r\n    push = (el: T) => {\r\n        this.result.push(el);\r\n    };\r\n\r\n    /** length of the array */\r\n    length = (): number => {\r\n        return this.result.length;\r\n    };\r\n\r\n    /** load array data from REST request */\r\n    private init = (type: { new(): T }, response: any, sortInfo: Sort[]): ResourceArray<T> => {\r\n        const result: ResourceArray<T> = ResourceHelper.createEmptyResult<T>(this._embedded);\r\n        result.sortInfo = sortInfo;\r\n        ResourceHelper.instantiateResourceCollection(type, response, result);\r\n        return result;\r\n    };\r\n\r\n    /** Load next page */\r\n    next = (type: { new(): T }): Observable<ResourceArray<T>> => {\r\n        if (this.next_uri) {\r\n            return ResourceHelper.getHttp().get(ResourceHelper.getProxy(this.next_uri), {headers: ResourceHelper.headers}).pipe(\r\n                map(response => this.init(type, response, this.sortInfo)),\r\n                catchError(error => observableThrowError(error)),);\r\n        }\r\n        return observableThrowError('no next defined');\r\n    };\r\n\r\n    /** Load previous page */\r\n    prev = (type: { new(): T }): Observable<ResourceArray<T>> => {\r\n        if (this.prev_uri) {\r\n            return ResourceHelper.getHttp().get(ResourceHelper.getProxy(this.prev_uri), {headers: ResourceHelper.headers}).pipe(\r\n                map(response => this.init(type, response, this.sortInfo)),\r\n                catchError(error => observableThrowError(error)),);\r\n        }\r\n        return observableThrowError('no prev defined');\r\n    };\r\n\r\n    /** Load first page */\r\n    first = (type: { new(): T }): Observable<ResourceArray<T>> => {\r\n        if (this.first_uri) {\r\n            return ResourceHelper.getHttp().get(ResourceHelper.getProxy(this.first_uri), {headers: ResourceHelper.headers}).pipe(\r\n                map(response => this.init(type, response, this.sortInfo)),\r\n                catchError(error => observableThrowError(error)),);\r\n        }\r\n        return observableThrowError('no first defined');\r\n    };\r\n\r\n    /** Load last page */\r\n    last = (type: { new(): T }): Observable<ResourceArray<T>> => {\r\n        if (this.last_uri) {\r\n            return ResourceHelper.getHttp().get(ResourceHelper.getProxy(this.last_uri), {headers: ResourceHelper.headers}).pipe(\r\n                map(response => this.init(type, response, this.sortInfo)),\r\n                catchError(error => observableThrowError(error)),);\r\n        }\r\n        return observableThrowError('no last defined');\r\n    };\r\n\r\n    /** Load page with given pageNumber*/\r\n    page = (type: { new(): T }, pageNumber: number): Observable<ResourceArray<T>> => {\r\n        this.self_uri = this.self_uri.replace('{?page,size,sort}', '');\r\n        this.self_uri = this.self_uri.replace('{&sort}', '');\r\n        let urlParsed = url.parse(ResourceHelper.getProxy(this.self_uri));\r\n        let query: string = ResourceArray.replaceOrAdd(urlParsed.query, 'size', this.pageSize.toString());\r\n        query = ResourceArray.replaceOrAdd(query, 'page', pageNumber.toString());\r\n\r\n\r\n        let uri = urlParsed.query ?\r\n            ResourceHelper.getProxy(this.self_uri).replace(urlParsed.query, query) : ResourceHelper.getProxy(this.self_uri).concat(query);\r\n        uri = this.addSortInfo(uri);\r\n        return ResourceHelper.getHttp().get(uri, {headers: ResourceHelper.headers}).pipe(\r\n            map(response => this.init(type, response, this.sortInfo)),\r\n            catchError(error => observableThrowError(error)),);\r\n    };\r\n\r\n    /** Sort collection based on given sort attribute */\r\n    sortElements = (type: { new(): T }, ...sort: Sort[]): Observable<ResourceArray<T>> => {\r\n        this.self_uri = this.self_uri.replace('{?page,size,sort}', '');\r\n        this.self_uri = this.self_uri.replace('{&sort}', '');\r\n        let uri = ResourceHelper.getProxy(this.self_uri).concat('?', 'size=', this.pageSize.toString(), '&page=', this.pageNumber.toString());\r\n        uri = this.addSortInfo(uri);\r\n        return ResourceHelper.getHttp().get(uri, {headers: ResourceHelper.headers}).pipe(\r\n            map(response => this.init(type, response, sort)),\r\n            catchError(error => observableThrowError(error)),);\r\n    };\r\n\r\n    /** Load page with given size */\r\n    size = (type: { new(): T }, size: number): Observable<ResourceArray<T>> => {\r\n        let uri = ResourceHelper.getProxy(this.self_uri).concat('?', 'size=', size.toString());\r\n        uri = this.addSortInfo(uri);\r\n        return ResourceHelper.getHttp().get(uri, {headers: ResourceHelper.headers}).pipe(\r\n            map(response => this.init(type, response, this.sortInfo)),\r\n            catchError(error => observableThrowError(error)),);\r\n    };\r\n\r\n    /** Add sort info to given URI */\r\n    private addSortInfo(uri: string) {\r\n        if (this.sortInfo) {\r\n            for (const item of this.sortInfo) {\r\n                uri = uri.concat('&sort=', item.path, ',', item.order);\r\n            }\r\n        }\r\n        return uri;\r\n    }\r\n\r\n    /** Add replace or add param value to query string */\r\n    private static replaceOrAdd(query: string, field: string, value: string): string {\r\n        if (query) {\r\n            let idx: number = query.indexOf(field);\r\n            let idxNextAmp: number = query.indexOf('&', idx) == -1 ? query.indexOf('/', idx) : query.indexOf('&', idx);\r\n\r\n            if (idx != -1) {\r\n                let seachValue = query.substring(idx, idxNextAmp);\r\n                query = query.replace(seachValue, field + '=' + value);\r\n            } else {\r\n                query = query.concat(\"&\" + field + '=' + value);\r\n            }\r\n        } else {\r\n            query = \"?\" + field + '=' + value;\r\n        }\r\n        return query;\r\n    }\r\n}\r\n","import {HttpClient, HttpHeaders, HttpParams} from '@angular/common/http';\r\nimport {Resource} from './resource';\r\nimport {ResourceArray} from './resource-array';\r\nimport {HalOptions} from './rest.service';\r\nimport {SubTypeBuilder} from './subtype-builder';\r\nimport {isNullOrUndefined, isPrimitive} from 'util';\r\nimport * as url from 'url';\r\n\r\n/** REST API access helper */\r\nexport class ResourceHelper {\r\n\r\n    /** HttpHeaders */\r\n    public static headers: HttpHeaders = new HttpHeaders();\r\n    /** Proxy URL */\r\n    private static proxy_uri: string = null;\r\n    /** Root URL */\r\n    private static root_uri: string = null;\r\n    /** HttpClient */\r\n    private static http: HttpClient = null;\r\n\r\n    /** get request headers */\r\n    /*public static get headers(): HttpHeaders {\r\n        if (isNullOrUndefined(this._headers))\r\n          ResourceHelper._headers = new HttpHeaders();\r\n        return ResourceHelper._headers;\r\n    }*/\r\n\r\n    /** set request headers */\r\n    /*public static set headers(headers: HttpHeaders) {\r\n      ResourceHelper._headers = headers;\r\n    }*/\r\n\r\n    /** get request option params */\r\n    static optionParams(params: HttpParams, options?: HalOptions): HttpParams {\r\n        if (options) {\r\n\r\n            if (options.params) {\r\n                for (const param of options.params) {\r\n                    params = params.append(param.key, param.value.toString());\r\n                }\r\n            }\r\n\r\n            if (options.size) {\r\n                params = params.append('size', options.size.toString());\r\n            }\r\n\r\n            if (options.sort) {\r\n                for (const s of options.sort) {\r\n                    let sortString = '';\r\n                    sortString = s.path ? sortString.concat(s.path) : sortString;\r\n                    sortString = s.order ? sortString.concat(',').concat(s.order) : sortString;\r\n                    params = params.append('sort', sortString);\r\n                }\r\n            }\r\n\r\n        }\r\n        return params;\r\n    }\r\n\r\n    /** resolve resource relations */\r\n    static resolveRelations(resource: Resource): Object {\r\n        const result: any = {};\r\n        for (const key in resource) {\r\n            if (!isNullOrUndefined(resource[key])) {\r\n                if (ResourceHelper.className(resource[key])\r\n                    .find((className: string) => className == 'Resource')) {\r\n                    if (resource[key]['_links'])\r\n                        result[key] = resource[key]['_links']['self']['href'];\r\n                } else if (Array.isArray(resource[key])) {\r\n                    let array: any[] = resource[key];\r\n                    if (array) {\r\n                        result[key] = new Array();\r\n                        array.forEach((element) => {\r\n                            if (isPrimitive(element)) {\r\n                                result[key].push(element);\r\n                            }\r\n                            else {\r\n                                result[key].push(this.resolveRelations(element));\r\n                            }\r\n                        });\r\n                    }\r\n                } else {\r\n                    result[key] = resource[key];\r\n                }\r\n            }\r\n        }\r\n        return result as Object;\r\n    }\r\n\r\n    /** create an empty resource from embedded data*/\r\n    static createEmptyResult<T extends Resource>(_embedded: string): ResourceArray<T> {\r\n        let resourceArray: ResourceArray<T> = new ResourceArray<T>();\r\n        resourceArray._embedded = _embedded;\r\n        return resourceArray;\r\n    }\r\n\r\n    /** get resource class name*/\r\n    static getClassName(obj: any): string {\r\n        var funcNameRegex = /function (.+?)\\(/;\r\n        var results = (funcNameRegex).exec(obj.constructor.toString());\r\n        return (results && results.length > 1) ? results[1] : '';\r\n    }\r\n\r\n    \r\n    /** get resource class name from a prototype object*/\r\n    static className(objProto: any): string[] {\r\n        let classNames = [];\r\n        let obj = Object.getPrototypeOf(objProto);\r\n        let className: string;\r\n\r\n        while ((className = ResourceHelper.getClassName(obj)) !== 'Object') {\r\n            classNames.push(className);\r\n            obj = Object.getPrototypeOf(obj);\r\n        }\r\n\r\n        return classNames;\r\n    }\r\n\r\n    /** instantiate a ResourceCollection from response embedded data*/\r\n    static instantiateResourceCollection<T extends Resource>(type: { new(): T }, payload: any,\r\n                                                             result: ResourceArray<T>, builder?: SubTypeBuilder,embeddedName?:String): ResourceArray<T> {\r\n        for (const embeddedClassName of Object.keys(payload[result._embedded])) {\r\n            if(!embeddedName || (embeddedName && embeddedClassName==embeddedName)){\r\n                let embedded: any = payload[result._embedded];\r\n                const items = embedded[embeddedClassName];\r\n                for (let item of items) {\r\n                    let instance: T = new type();\r\n                    instance = this.searchSubtypes(builder, embeddedClassName, instance);\r\n\r\n                    this.instantiateResource(instance, item);\r\n                    result.push(instance);\r\n                }\r\n            }\r\n        }\r\n\r\n        result.totalElements = payload.page ? payload.page.totalElements : result.length;\r\n        result.totalPages = payload.page ? payload.page.totalPages : 1;\r\n        result.pageNumber = payload.page ? payload.page.number : 1;\r\n        result.pageSize = payload.page ? payload.page.size : 20;\r\n\r\n        result.self_uri = payload._links && payload._links.self ? payload._links.self.href : undefined;\r\n        result.next_uri = payload._links && payload._links.next ? payload._links.next.href : undefined;\r\n        result.prev_uri = payload._links && payload._links.prev ? payload._links.prev.href : undefined;\r\n        result.first_uri = payload._links && payload._links.first ? payload._links.first.href : undefined;\r\n        result.last_uri = payload._links && payload._links.last ? payload._links.last.href : undefined;\r\n        return result;\r\n    }\r\n\r\n    /** search subtypes*/\r\n    static searchSubtypes<T extends Resource>(builder: SubTypeBuilder, embeddedClassName: string, instance: T) {\r\n        if (builder && builder.subtypes) {\r\n            let keys = builder.subtypes.keys();\r\n            Array.from(keys).forEach((subtypeKey: string) => {\r\n                if (embeddedClassName.toLowerCase().startsWith(subtypeKey.toLowerCase())) {\r\n                    let subtype: { new(): any } = builder.subtypes.get(subtypeKey);\r\n                    instance = new subtype();\r\n                }\r\n            });\r\n        }\r\n        return instance;\r\n    }\r\n\r\n    /** instantiate a Resource from response */\r\n    static instantiateResource<T extends Resource>(entity: T, payload: Object): T {\r\n        for (const p in payload) {\r\n            //TODO array init\r\n            /* if(entity[p].constructor === Array && isNullOrUndefined(payload[p]))\r\n                 entity[p] = [];\r\n             else*/\r\n            entity[p] = payload[p];\r\n        }\r\n        return entity;\r\n    }\r\n\r\n    /** set proxy URL */\r\n    static setProxyUri(proxy_uri: string) {\r\n        ResourceHelper.proxy_uri = proxy_uri;\r\n    }\r\n\r\n    /** set Root URI */\r\n    static setRootUri(root_uri: string) {\r\n        ResourceHelper.root_uri = root_uri;\r\n    }\r\n\r\n    /** get proxy URL */\r\n    public static getURL(): string {\r\n        return ResourceHelper.proxy_uri && ResourceHelper.proxy_uri != '' ?\r\n            ResourceHelper.addSlash(ResourceHelper.proxy_uri) :\r\n            ResourceHelper.addSlash(ResourceHelper.root_uri);\r\n    }\r\n\r\n    /** add slash to URI */\r\n    private static addSlash(uri: string): string {\r\n        let uriParsed = url.parse(uri);\r\n        if (isNullOrUndefined(uriParsed.search) && uri && uri[uri.length - 1] != '/')\r\n            return uri + '/';\r\n        return uri;\r\n    }\r\n\r\n    /** get proxy from URL */\r\n    public static getProxy(url: string): string {\r\n        if (!ResourceHelper.proxy_uri || ResourceHelper.proxy_uri == '')\r\n            return url;\r\n        return ResourceHelper.addSlash(url.replace(ResourceHelper.root_uri, ResourceHelper.proxy_uri));\r\n    }\r\n\r\n    /** set HttpClient*/\r\n    public static setHttp(http: HttpClient) {\r\n        ResourceHelper.http = http;\r\n    }\r\n\r\n    /** get HttpClient*/\r\n    public static getHttp(): HttpClient {\r\n        return ResourceHelper.http;\r\n    }\r\n\r\n    /** get root URI*/\r\n    static getRootUri() {\r\n        return ResourceHelper.root_uri;\r\n    }\r\n}\r\n","import {HttpClient} from '@angular/common/http';\r\nimport {Inject, Injectable} from '@angular/core';\r\nimport {ResourceHelper} from './resource-helper';\r\nimport {ExternalConfigurationHandlerInterface} from './external-configuration.handler';\r\nimport {ExternalConfiguration} from './ExternalConfiguration';\r\n\r\n\r\n/** ExternalService */\r\n@Injectable()\r\nexport class ExternalService {\r\n\r\n    /** constructor */\r\n    constructor(@Inject('ExternalConfigurationService') private externalConfigurationService: ExternalConfigurationHandlerInterface) {\r\n        ResourceHelper.setProxyUri(externalConfigurationService.getProxyUri());\r\n        ResourceHelper.setRootUri(externalConfigurationService.getRootUri());\r\n        ResourceHelper.setHttp(externalConfigurationService.getHttp());\r\n    }\r\n\r\n    /** update ExternalConfigurationHandler */\r\n    public updateExternalConfigurationHandlerInterface(externalConfigurationService: ExternalConfigurationHandlerInterface) {\r\n\tthis.externalConfigurationService = externalConfigurationService;\r\n\r\n        ResourceHelper.setProxyUri(externalConfigurationService.getProxyUri());\r\n        ResourceHelper.setRootUri(externalConfigurationService.getRootUri());\r\n        ResourceHelper.setHttp(externalConfigurationService.getHttp());\r\n    }\r\n\r\n    /** get ExternalConfiguration */\r\n    public getExternalConfiguration(): ExternalConfiguration {\r\n        return this.externalConfigurationService.getExternalConfiguration();\r\n    }\r\n\r\n    /** get proxy URL */\r\n    public getProxyUri(): string {\r\n        return this.externalConfigurationService.getProxyUri();\r\n    }\r\n\r\n    /** get Root URI */\r\n    public getRootUri(): string {\r\n        return this.externalConfigurationService.getRootUri();\r\n    }\r\n\r\n    /** get URL */\r\n    public getURL(): string {\r\n        return ResourceHelper.getURL();\r\n    }\r\n\r\n    /** get HttpClient */\r\n    public getHttp(): HttpClient {\r\n        return ResourceHelper.getHttp();\r\n    }\r\n}\r\n","\r\nimport { throwError as observableThrowError } from 'rxjs';\r\n\r\nimport { catchError, map } from 'rxjs/operators';\r\nimport { Resource } from './resource';\r\nimport { ResourceHelper } from './resource-helper';\r\nimport { Injectable } from '@angular/core';\r\nimport { HttpParams, HttpResponse } from '@angular/common/http';\r\nimport { Sort } from './sort';\r\nimport { ResourceArray } from './resource-array';\r\nimport { ExternalService } from './external.service';\r\nimport { HalOptions } from './rest.service';\r\nimport { SubTypeBuilder } from './subtype-builder';\r\nimport { Observable } from 'rxjs';\r\n\r\n/** ResourceService */\r\n@Injectable()\r\nexport class ResourceService {\r\n\r\n\r\n    /** constructor */\r\n    constructor(private externalService: ExternalService) { }\r\n\r\n\r\n    /** get URL */\r\n    private static getURL(): string {\r\n        return ResourceHelper.getURL();\r\n    }\r\n\r\n    /** get all resources from a base URI of a given type */\r\n    public getAll<T extends Resource>(type: { new(): T }, resource: string, _embedded: string, options?: HalOptions, subType?: SubTypeBuilder, embeddedName?:String, ignoreProjection?:boolean): Observable<ResourceArray<T>> {\r\n        let uri = this.getResourceUrl(resource);\r\n        if(!ignoreProjection){\r\n            uri = uri.concat('?projection=view');\r\n        }\r\n        const params = ResourceHelper.optionParams(new HttpParams(), options);\r\n        const result: ResourceArray<T> = ResourceHelper.createEmptyResult<T>(_embedded);\r\n\r\n        this.setUrls(result);\r\n        result.sortInfo = options ? options.sort : undefined;\r\n        let observable = ResourceHelper.getHttp().get(uri, { headers: ResourceHelper.headers, params: params });\r\n        return observable.pipe(map(response => ResourceHelper.instantiateResourceCollection(type, response, result, subType,embeddedName)),\r\n            catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** get resource from a base URI and a given id */\r\n    public get<T extends Resource>(type: { new(): T }, resource: string, id: any): Observable<T> {\r\n        const uri = this.getResourceUrl(resource).concat('/', id, '?projection=view');\r\n        const result: T = new type();\r\n\r\n        this.setUrlsResource(result);\r\n        let observable = ResourceHelper.getHttp().get(uri, { headers: ResourceHelper.headers });\r\n        return observable.pipe(map(data => ResourceHelper.instantiateResource(result, data)),\r\n            catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** get resource from its selflink */\r\n    public getBySelfLink<T extends Resource>(type: { new(): T }, resourceLink: string): Observable<T> {\r\n        const result: T = new type();\r\n\r\n        this.setUrlsResource(result);\r\n        let observable = ResourceHelper.getHttp().get(ResourceHelper.getProxy(resourceLink), { headers: ResourceHelper.headers });\r\n        return observable.pipe(map(data => ResourceHelper.instantiateResource(result, data)),\r\n            catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** search resources from a given base path, query and options */\r\n    public search<T extends Resource>(type: { new(): T }, query: string, resource: string, _embedded: string, options?: HalOptions): Observable<ResourceArray<T>> {\r\n        const uri = this.getResourceUrl(resource).concat('/search/', query);\r\n        const params = ResourceHelper.optionParams(new HttpParams(), options);\r\n        const result: ResourceArray<T> = ResourceHelper.createEmptyResult<T>(_embedded);\r\n\r\n        this.setUrls(result);\r\n        let observable = ResourceHelper.getHttp().get(uri, { headers: ResourceHelper.headers, params: params });\r\n        return observable.pipe(map(response => ResourceHelper.instantiateResourceCollection(type, response, result)),\r\n            catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** search a single resource from a given base path, query and options */\r\n    public searchSingle<T extends Resource>(type: { new(): T }, query: string, resource: string, options?: HalOptions): Observable<T> {\r\n        const uri = this.getResourceUrl(resource).concat('/search/', query);\r\n        const params = ResourceHelper.optionParams(new HttpParams(), options);\r\n        const result: T = new type();\r\n\r\n        this.setUrlsResource(result);\r\n        let observable = ResourceHelper.getHttp().get(uri, { headers: ResourceHelper.headers, params: params });\r\n        return observable.pipe(map(response => ResourceHelper.instantiateResource(result, response)),\r\n            catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** search resources from a given base path, custom query and options */\r\n    public customQuery<T extends Resource>(type: { new(): T }, query: string, resource: string, _embedded: string, options?: HalOptions): Observable<ResourceArray<T>> {\r\n        const uri = this.getResourceUrl(resource + query);\r\n        const params = ResourceHelper.optionParams(new HttpParams(), options);\r\n        const result: ResourceArray<T> = ResourceHelper.createEmptyResult<T>(_embedded);\r\n\r\n        this.setUrls(result);\r\n        let observable = ResourceHelper.getHttp().get(uri, { headers: ResourceHelper.headers, params: params });\r\n        return observable.pipe(map(response => ResourceHelper.instantiateResourceCollection(type, response, result)),\r\n            catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** get resource given a relation link */\r\n    public getByRelation<T extends Resource>(type: { new(): T }, resourceLink: string): Observable<T> {\r\n        let result: T = new type();\r\n\r\n        this.setUrlsResource(result);\r\n        let observable = ResourceHelper.getHttp().get(resourceLink, { headers: ResourceHelper.headers });\r\n        return observable.pipe(map(data => ResourceHelper.instantiateResource(result, data)),\r\n            catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** get resource array given a relation link */\r\n    public getByRelationArray<T extends Resource>(type: { new(): T }, resourceLink: string, _embedded: string, builder?: SubTypeBuilder): Observable<ResourceArray<T>> {\r\n        const result: ResourceArray<T> = ResourceHelper.createEmptyResult<T>(_embedded);\r\n\r\n        this.setUrls(result);\r\n        let observable = ResourceHelper.getHttp().get(resourceLink, { headers: ResourceHelper.headers });\r\n        return observable.pipe(map(response => ResourceHelper.instantiateResourceCollection(type, response, result, builder)),\r\n            catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** count resources given a path */\r\n    public count(resource: string): Observable<number> {\r\n        const uri = this.getResourceUrl(resource).concat('/search/countAll');\r\n\r\n        return ResourceHelper.getHttp().get(uri, { headers: ResourceHelper.headers, observe: 'body' }).pipe(\r\n            map((response: Response) => Number(response.body)),\r\n            catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** create resource from self link and entity data*/\r\n    public create<T extends Resource>(selfResource: string, entity: T) {\r\n        const uri = ResourceHelper.getURL() + selfResource;\r\n        const payload = ResourceHelper.resolveRelations(entity);\r\n\r\n        this.setUrlsResource(entity);\r\n        let observable = ResourceHelper.getHttp().post(uri, payload, { headers: ResourceHelper.headers, observe: 'response' });\r\n        return observable.pipe(map((response: HttpResponse<string>) => {\r\n            if (response.status >= 200 && response.status <= 207)\r\n                return ResourceHelper.instantiateResource(entity, response.body);\r\n            else if (response.status == 500) {\r\n                let body: any = response.body;\r\n                return observableThrowError(body.error);\r\n            }\r\n        }), catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** update resource from a given entity data*/\r\n    public update<T extends Resource>(entity: T) {\r\n        const uri = ResourceHelper.getProxy(entity._links.self.href);\r\n        const payload = ResourceHelper.resolveRelations(entity);\r\n        this.setUrlsResource(entity);\r\n        let observable = ResourceHelper.getHttp().put(uri, payload, { headers: ResourceHelper.headers, observe: 'response' });\r\n        return observable.pipe(map((response: HttpResponse<string>) => {\r\n            if (response.status >= 200 && response.status <= 207)\r\n                return ResourceHelper.instantiateResource(entity, response.body);\r\n            else if (response.status == 500) {\r\n                let body: any = response.body;\r\n                return observableThrowError(body.error);\r\n            }\r\n        }), catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** update resource from a given entity data*/\r\n    public updateCollection<T extends Resource>(resourceArray: ResourceArray<T>, resourceLink: string) {\r\n        const uri = ResourceHelper.getProxy(resourceLink);\r\n        //const payload = ResourceHelper.resolveRelations(entity);\r\n        //this.setUrlsResource(entity);\r\n        var headersReq = ResourceHelper.headers;\r\n        headersReq.set(\"Content-Type\", \"text/uri-list\");\r\n        let observable = ResourceHelper.getHttp().put(uri, resourceArray, { headers: headersReq, observe: 'response' });\r\n        return observable.pipe(map((response: HttpResponse<string>) => {\r\n            if (response.status >= 200 && response.status <= 207)\r\n                return \"\";\r\n            else if (response.status == 500) {\r\n                let body: any = response.body;\r\n                return observableThrowError(body.error);\r\n            }\r\n        }), catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** patch resource from a given entity data*/\r\n    public patch<T extends Resource>(entity: T) {\r\n        const uri = ResourceHelper.getProxy(entity._links.self.href);\r\n        const payload = ResourceHelper.resolveRelations(entity);\r\n        this.setUrlsResource(entity);\r\n        let observable = ResourceHelper.getHttp().patch(uri, payload, { headers: ResourceHelper.headers, observe: 'response' });\r\n        return observable.pipe(map((response: HttpResponse<string>) => {\r\n            if (response.status >= 200 && response.status <= 207)\r\n                return ResourceHelper.instantiateResource(entity, response.body);\r\n            else if (response.status == 500) {\r\n                let body: any = response.body;\r\n                return observableThrowError(body.error);\r\n            }\r\n        }), catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** delete resource from a given entity data*/\r\n    public delete<T extends Resource>(entity: T): Observable<Object> {\r\n        const uri = ResourceHelper.getProxy(entity._links.self.href);\r\n        return ResourceHelper.getHttp().delete(uri, { headers: ResourceHelper.headers }).pipe(catchError(error => observableThrowError(error)));\r\n    }\r\n\r\n    /** whether a resource array has next page of results*/\r\n    public hasNext<T extends Resource>(resourceArray: ResourceArray<T>): boolean {\r\n        return resourceArray.next_uri != undefined;\r\n    }\r\n\r\n    /** whether a resource array has previous page of results*/\r\n    public hasPrev<T extends Resource>(resourceArray: ResourceArray<T>): boolean {\r\n        return resourceArray.prev_uri != undefined;\r\n    }\r\n\r\n    /** whether a resource array has first page of results*/\r\n    public hasFirst<T extends Resource>(resourceArray: ResourceArray<T>): boolean {\r\n        return resourceArray.first_uri != undefined;\r\n    }\r\n\r\n    /** whether a resource array has last page of results*/\r\n    public hasLast<T extends Resource>(resourceArray: ResourceArray<T>): boolean {\r\n        return resourceArray.last_uri != undefined;\r\n    }\r\n\r\n    /** get resource array next page of results*/\r\n    public next<T extends Resource>(resourceArray: ResourceArray<T>, type: { new(): T }): Observable<ResourceArray<T>> {\r\n        return resourceArray.next(type);\r\n    }\r\n\r\n    /** get resource array previous page of results*/\r\n    public prev<T extends Resource>(resourceArray: ResourceArray<T>, type: { new(): T }): Observable<ResourceArray<T>> {\r\n        return resourceArray.prev(type);\r\n    }\r\n\r\n    /** get resource array first page of results*/\r\n    public first<T extends Resource>(resourceArray: ResourceArray<T>, type: { new(): T }): Observable<ResourceArray<T>> {\r\n        return resourceArray.first(type);\r\n    }\r\n\r\n    /** get resource array last page of results*/\r\n    public last<T extends Resource>(resourceArray: ResourceArray<T>, type: { new(): T }): Observable<ResourceArray<T>> {\r\n        return resourceArray.last(type);\r\n    }\r\n\r\n    /** get resource array page of results given a page number*/\r\n    public page<T extends Resource>(resourceArray: ResourceArray<T>, type: { new(): T }, id: number): Observable<ResourceArray<T>> {\r\n        return resourceArray.page(type, id);\r\n    }\r\n\r\n    /** sort resource array with a given sorting params */\r\n    public sortElements<T extends Resource>(resourceArray: ResourceArray<T>, type: { new(): T }, ...sort: Sort[]): Observable<ResourceArray<T>> {\r\n        return resourceArray.sortElements(type, ...sort);\r\n    }\r\n\r\n    /** get resource array size*/\r\n    public size<T extends Resource>(resourceArray: ResourceArray<T>, type: { new(): T }, size: number): Observable<ResourceArray<T>> {\r\n        return resourceArray.size(type, size);\r\n    }\r\n\r\n    /** get resource URL from a given path*/\r\n    public getResourceUrl(resource?: string): string {\r\n        let url = ResourceService.getURL();\r\n        if (!url.endsWith('/')) {\r\n            url = url.concat('/');\r\n        }\r\n        if (resource) {\r\n            return url.concat(resource);\r\n        }\r\n        return url;\r\n    }\r\n\r\n    /** set proxy and root urls of given resource array */\r\n    private setUrls<T extends Resource>(result: ResourceArray<T>) {\r\n        result.proxyUrl = this.externalService.getProxyUri();\r\n        result.rootUrl = this.externalService.getRootUri();\r\n    }\r\n\r\n    /** set proxy and root urls of given resource */\r\n    private setUrlsResource<T extends Resource>(result: T) {\r\n        result.proxyUrl = this.externalService.getProxyUri();\r\n        result.rootUrl = this.externalService.getRootUri();\r\n    }\r\n}","import {of as observableOf, throwError as observableThrowError} from 'rxjs';\r\nimport {map, mergeMap} from 'rxjs/operators';\r\nimport {Resource} from './resource';\r\nimport {ResourceArray} from './resource-array';\r\nimport {Sort} from './sort';\r\nimport {ResourceService} from './resource.service';\r\nimport {SubTypeBuilder} from './subtype-builder';\r\nimport {isNullOrUndefined} from 'util';\r\nimport {Observable} from 'rxjs';\r\nimport {Injector} from \"@angular/core\";\r\n\r\n/** HAL param data model */\r\nexport type HalParam = { key: string, value: string | number | boolean };\r\n/** HAL option data model */\r\nexport type HalOptions = { notPaged?: boolean, size?: number, sort?: Sort[], params?: HalParam[] };\r\n\r\n/** REST API access interface */\r\nexport class RestService<T extends Resource> {\r\n    /** resource type */\r\n    private type: any;\r\n    /** resource path */\r\n    private resource: string;\r\n    /** resource array */\r\n    public resourceArray: ResourceArray<T>;\r\n    /** resource service */\r\n    public resourceService: ResourceService;\r\n    /** _embedded field name */\r\n    private _embedded: string = '_embedded';\r\n\r\n    /** constructor */\r\n    constructor(type: { new(): T },\r\n                resource: string,\r\n                private injector: Injector,\r\n                _embedded?: string) {\r\n        this.type = type;\r\n        this.resource = resource;\r\n        this.resourceService = injector.get(ResourceService);\r\n        if (!isNullOrUndefined(_embedded))\r\n            this._embedded = _embedded;\r\n    }\r\n\r\n    /** error handler */\r\n    protected handleError(error: any):Observable<never> {\r\n        return RestService.handleError(error);\r\n    }\r\n\r\n    /** error handler */\r\n    protected static handleError(error: any):Observable<never> {\r\n        return observableThrowError(error);\r\n    }\r\n\r\n    /** get all resources with optional options an subType params */\r\n    public getAll(options?: HalOptions, subType?: SubTypeBuilder, embeddedName?:String, ignoreProjection?:boolean): Observable<T[]> {\r\n        return this.resourceService.getAll(this.type, this.resource, this._embedded, options, subType,embeddedName, ignoreProjection).pipe(\r\n            mergeMap((resourceArray: ResourceArray<T>) => {\r\n                if (options && options.notPaged && !isNullOrUndefined(resourceArray.first_uri)) {\r\n                    options.notPaged = false;\r\n                    options.size = resourceArray.totalElements;\r\n                    return this.getAll(options);\r\n                } else {\r\n                    this.resourceArray = resourceArray;\r\n                    return observableOf(resourceArray.result);\r\n                }\r\n            }));\r\n    }\r\n\r\n    /** get resource from a given id */\r\n    public get(id: any): Observable<T> {\r\n        return this.resourceService.get(this.type, this.resource, id);\r\n    }\r\n\r\n    /** get resource from self link */\r\n    public getBySelfLink(selfLink: string): Observable<T> {\r\n        return this.resourceService.getBySelfLink(this.type, selfLink);\r\n    }\r\n\r\n    /** search resources from a given query string and optional options params */\r\n    public search(query: string, options?: HalOptions): Observable<T[]> {\r\n        return this.resourceService.search(this.type, query, this.resource, this._embedded, options).pipe(\r\n            mergeMap((resourceArray: ResourceArray<T>) => {\r\n                if (options && options.notPaged && !isNullOrUndefined(resourceArray.first_uri)) {\r\n                    options.notPaged = false;\r\n                    options.size = resourceArray.totalElements;\r\n                    return this.search(query, options);\r\n                } else {\r\n                    this.resourceArray = resourceArray;\r\n                    return observableOf(resourceArray.result);\r\n                }\r\n            }));\r\n    }\r\n\r\n    /** search resource from a given query string and optional options params */\r\n    public searchSingle(query: string, options?: HalOptions): Observable<T> {\r\n        return this.resourceService.searchSingle(this.type, query, this.resource, options);\r\n    }\r\n\r\n    /** search resources from a given custom query string and optional options params */\r\n    public customQuery(query: string, options?: HalOptions): Observable<T[]> {\r\n        return this.resourceService.customQuery(this.type, query, this.resource, this._embedded, options).pipe(\r\n            mergeMap((resourceArray: ResourceArray<T>) => {\r\n                if (options && options.notPaged && !isNullOrUndefined(resourceArray.first_uri)) {\r\n                    options.notPaged = false;\r\n                    options.size = resourceArray.totalElements;\r\n                    return this.customQuery(query, options);\r\n                } else {\r\n                    this.resourceArray = resourceArray;\r\n                    return observableOf(resourceArray.result);\r\n                }\r\n            }));\r\n    }\r\n\r\n\r\n    /** get resource array given a relation link */\r\n    public getByRelationArray(relation: string, builder?: SubTypeBuilder): Observable<T[]> {\r\n        return this.resourceService.getByRelationArray(this.type, relation, this._embedded, builder).pipe(\r\n            map((resourceArray: ResourceArray<T>) => {\r\n                this.resourceArray = resourceArray;\r\n                return resourceArray.result;\r\n            }));\r\n    }\r\n\r\n    /** get resource given a relation link */\r\n    public getByRelation(relation: string): Observable<T> {\r\n        return this.resourceService.getByRelation(this.type, relation);\r\n    }\r\n\r\n    /** count resources given a path */\r\n    public count(): Observable<number> {\r\n        return this.resourceService.count(this.resource);\r\n    }\r\n\r\n    /** create resource from self link and entity data*/\r\n    public create(entity: T) {\r\n        return this.resourceService.create(this.resource, entity);\r\n    }\r\n\r\n    /** update resource from a given entity data*/\r\n    public update(entity: T) {\r\n        return this.resourceService.update(entity);\r\n    }\r\n\r\n    /** patch resource from a given entity data*/\r\n    public patch(entity: T) {\r\n        return this.resourceService.patch(entity);\r\n    }\r\n\r\n    /** delete resource from a given entity data*/\r\n    public delete(entity: T): Observable<Object> {\r\n        return this.resourceService.delete(entity);\r\n    }\r\n\r\n    /** get total number of elements of resource array */\r\n    public totalElement(): number {\r\n        if (this.resourceArray && this.resourceArray.totalElements)\r\n            return this.resourceArray.totalElements;\r\n        return 0;\r\n    }\r\n\r\n    /** whether a resource array has first page of results*/\r\n    public hasFirst(): boolean {\r\n        if (this.resourceArray)\r\n            return this.resourceService.hasFirst(this.resourceArray);\r\n        return false;\r\n    }\r\n\r\n    /** whether a resource array has next page of results*/\r\n    public hasNext(): boolean {\r\n        if (this.resourceArray)\r\n            return this.resourceService.hasNext(this.resourceArray);\r\n        return false;\r\n    }\r\n\r\n    /** whether a resource array has previous page of results*/\r\n    public hasPrev(): boolean {\r\n        if (this.resourceArray)\r\n            return this.resourceService.hasPrev(this.resourceArray);\r\n        return false;\r\n    }\r\n\r\n    /** whether a resource array has last page of results*/\r\n    public hasLast(): boolean {\r\n        if (this.resourceArray)\r\n            return this.resourceService.hasLast(this.resourceArray);\r\n        return false;\r\n    }\r\n\r\n    /** get resource array next page of results*/\r\n    public next(): Observable<T[]> {\r\n        if (this.resourceArray)\r\n            return this.resourceService.next(this.resourceArray, this.type).pipe(\r\n                map((resourceArray: ResourceArray<T>) => {\r\n                    this.resourceArray = resourceArray;\r\n                    return resourceArray.result;\r\n                }));\r\n        else\r\n            observableThrowError('no resourceArray found');\r\n    }\r\n\r\n    /** get resource array previous page of results*/\r\n    public prev(): Observable<T[]> {\r\n        if (this.resourceArray)\r\n            return this.resourceService.prev(this.resourceArray, this.type).pipe(\r\n                map((resourceArray: ResourceArray<T>) => {\r\n                    this.resourceArray = resourceArray;\r\n                    return resourceArray.result;\r\n                }));\r\n        else\r\n            observableThrowError('no resourceArray found');\r\n    }\r\n\r\n    /** get resource array first page of results*/\r\n    public first(): Observable<T[]> {\r\n        if (this.resourceArray)\r\n            return this.resourceService.first(this.resourceArray, this.type)\r\n                .pipe(\r\n                    map((resourceArray: ResourceArray<T>) => {\r\n                        this.resourceArray = resourceArray;\r\n                        return resourceArray.result;\r\n                    })\r\n                );\r\n        else\r\n            observableThrowError('no resourceArray found');\r\n    }\r\n\r\n    /** get resource array last page of results*/\r\n    public last(): Observable<T[]> {\r\n        if (this.resourceArray)\r\n            return this.resourceService.last(this.resourceArray, this.type)\r\n                .pipe(\r\n                    map((resourceArray: ResourceArray<T>) => {\r\n                        this.resourceArray = resourceArray;\r\n                        return resourceArray.result;\r\n                    })\r\n                );\r\n        else\r\n            observableThrowError('no resourceArray found');\r\n    }\r\n\r\n    /** get resource array page of results given a page number*/\r\n    public page(pageNumber: number): Observable<T[]> {\r\n        if (this.resourceArray)\r\n            return this.resourceService.page(this.resourceArray, this.type, pageNumber).pipe(\r\n                map((resourceArray: ResourceArray<T>) => {\r\n                    this.resourceArray = resourceArray;\r\n                    return resourceArray.result;\r\n                }));\r\n        else\r\n            observableThrowError('no resourceArray found');\r\n    }\r\n}\r\n","\r\nimport {throwError as observableThrowError, of as observableOf} from 'rxjs';\r\n\r\nimport {map} from 'rxjs/operators';\r\n\r\n\r\nimport {HttpParams} from '@angular/common/http';\r\nimport {ResourceHelper} from './resource-helper';\r\nimport {ResourceArray} from './resource-array';\r\nimport {isNullOrUndefined} from 'util';\r\n\r\nimport {HalOptions} from './rest.service';\r\nimport {SubTypeBuilder} from './subtype-builder';\r\nimport {Injectable} from '@angular/core';\r\nimport {Observable} from 'rxjs';\r\n\r\n/** Abstract resource class*/\r\n@Injectable()\r\nexport abstract class Resource {\r\n\r\n    /** proxy URL */\r\n    public proxyUrl: string;\r\n    /** root URL */\r\n    public rootUrl: string;\r\n\r\n    /** links */\r\n    public _links: any;\r\n    /** subtypes */\r\n    public _subtypes: Map<string, any>;\r\n\r\n    \r\n    /** get subtypes */    \r\n    public get subtypes(): Map<string, any> {\r\n        return this._subtypes;\r\n    }\r\n\r\n    /** set subtypes */\r\n    public set subtypes(_subtypes: Map<string, any>) {\r\n        this._subtypes = _subtypes;\r\n    }\r\n\r\n    /** constructor*/\r\n    constructor() {\r\n    }\r\n\r\n    /** Get collection of related resources */\r\n    public getRelationArray<T extends Resource>(type: { new(): T }, relation: string, _embedded?: string, options?: HalOptions, builder?: SubTypeBuilder): Observable<T[]> {\r\n\r\n        const params = ResourceHelper.optionParams(new HttpParams(), options);\r\n        const result: ResourceArray<T> = ResourceHelper.createEmptyResult<T>(isNullOrUndefined(_embedded) ? \"_embedded\" : _embedded);\r\n        if (!isNullOrUndefined(this._links) && !isNullOrUndefined(this._links[relation])) {\r\n            let observable = ResourceHelper.getHttp().get(ResourceHelper.getProxy(this._links[relation].href), {\r\n                headers: ResourceHelper.headers,\r\n                params: params\r\n            });\r\n            return observable.pipe(map(response => ResourceHelper.instantiateResourceCollection<T>(type, response, result, builder)),\r\n                map((array: ResourceArray<T>) => array.result),);\r\n        } else {\r\n            return observableOf([]);\r\n        }\r\n    }\r\n\r\n    /** Get related resource */\r\n    public getRelation<T extends Resource>(type: { new(): T }, relation: string, builder?: SubTypeBuilder): Observable<T> {\r\n        let result: T = new type();\r\n        if (!isNullOrUndefined(this._links) && !isNullOrUndefined(this._links[relation])) {\r\n            let observable = ResourceHelper.getHttp().get(ResourceHelper.getProxy(this._links[relation].href), {headers: ResourceHelper.headers});\r\n            return observable.pipe(map((data: any) => {\r\n                if (builder) {\r\n                    for (const embeddedClassName of Object.keys(data['_links'])) {\r\n                        if (embeddedClassName == 'self') {\r\n                            let href: string = data._links[embeddedClassName].href;\r\n                            let idx: number = href.lastIndexOf('/');\r\n                            let realClassName = href.replace(ResourceHelper.getRootUri(), \"\").substring(0, idx);\r\n                            result = ResourceHelper.searchSubtypes(builder, realClassName, result);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                return ResourceHelper.instantiateResource(result, data);\r\n            }));\r\n        } else {\r\n            return observableOf(null);\r\n        }\r\n    }\r\n\r\n    /** Adds the given resource to the bound collection by the relation */\r\n    public addRelation<T extends Resource>(relation: string, resource: T): Observable<any> {\r\n        if (!isNullOrUndefined(this._links) && !isNullOrUndefined(this._links[relation])) {\r\n            let header = ResourceHelper.headers.append('Content-Type', 'text/uri-list');\r\n            return ResourceHelper.getHttp().post(ResourceHelper.getProxy(this._links[relation].href), resource._links.self.href, {headers: header});\r\n        } else {\r\n            return observableThrowError('no relation found');\r\n        }\r\n    }\r\n\r\n    /** Bind the given resource to this resource by the given relation*/\r\n    public updateRelation<T extends Resource>(relation: string, resource: T): Observable<any> {\r\n        if (!isNullOrUndefined(this._links) && !isNullOrUndefined(this._links[relation])) {\r\n            let header = ResourceHelper.headers.append('Content-Type', 'text/uri-list');\r\n            return ResourceHelper.getHttp().patch(ResourceHelper.getProxy(this._links[relation].href), resource._links.self.href, {headers: header});\r\n        } else {\r\n            return observableThrowError('no relation found');\r\n        }\r\n    }\r\n\r\n    /** Bind the given resource to this resource by the given relation*/\r\n    public substituteRelation<T extends Resource>(relation: string, resource: T): Observable<any> {\r\n        if (!isNullOrUndefined(this._links) && !isNullOrUndefined(this._links[relation])) {\r\n            let header = ResourceHelper.headers.append('Content-Type', 'text/uri-list');\r\n            return ResourceHelper.getHttp().put(ResourceHelper.getProxy(this._links[relation].href), resource._links.self.href, {headers: header});\r\n        } else {\r\n            return observableThrowError('no relation found');\r\n        }\r\n    }\r\n    \r\n    \r\n    /** Bind the given resource to this resource by the given relation*/\r\n    public substituteAllRelation<T extends Resource>(relation: string, resources: Resource[]): Observable<any> {\r\n        if (!isNullOrUndefined(this._links) && !isNullOrUndefined(this._links[relation])) {\r\n            let header = ResourceHelper.headers.append('Content-Type', 'text/uri-list');\r\n            return ResourceHelper.getHttp().put(ResourceHelper.getProxy(this._links[relation].href), resources.map((resource) => resource._links.self.href), {headers: header});\r\n        } else {\r\n            return observableThrowError('no relation found');\r\n        }\r\n    }\r\n\r\n\r\n\r\n    /** Unbind the resource with the given relation from this resource*/\r\n    public deleteRelation<T extends Resource>(relation: string, resource: T): Observable<any> {\r\n        if (!isNullOrUndefined(this._links) && !isNullOrUndefined(resource._links)) {\r\n            let link: string = resource._links['self'].href;\r\n            let idx: number = link.lastIndexOf('/') + 1;\r\n\r\n            if (idx == -1)\r\n                return observableThrowError('no relation found');\r\n\r\n            let relationId: string = link.substring(idx);\r\n            return ResourceHelper.getHttp().delete(ResourceHelper.getProxy(this._links[relation].href + '/' + relationId), {headers: ResourceHelper.headers});\r\n        } else {\r\n            return observableThrowError('no relation found');\r\n        }\r\n    }\r\n    \r\n    /** Unbind the resource with the given relation from this resource*/\r\n    public deleteAllRelation<T extends Resource>(relation: string): Observable<any> {\r\n        return ResourceHelper.getHttp().delete(ResourceHelper.getProxy(this._links[relation].href ), {headers: ResourceHelper.headers});\r\n        \r\n    }\r\n\r\n}","import {ModuleWithProviders, NgModule} from '@angular/core';\r\nimport {HttpClient, HttpClientModule} from '@angular/common/http';\r\nimport {HalParam, RestService} from './rest.service';\r\nimport {ExternalService} from './external.service';\r\nimport {ResourceService} from './resource.service';\r\nimport {ExternalConfigurationHandlerInterface} from './external-configuration.handler';\r\n\r\nimport 'rxjs';\r\n\r\nimport {SubTypeBuilder} from './subtype-builder';\r\n\r\nexport {ExternalService} from './external.service';\r\nexport {RestService} from './rest.service';\r\nexport {Resource} from './resource';\r\nexport {ResourceArray} from './resource-array';\r\nexport {ResourceService} from './resource.service';\r\nexport {Sort} from './sort';\r\nexport {ResourceHelper} from './resource-helper';\r\nexport {ExternalConfiguration} from './ExternalConfiguration';\r\nexport {ExternalConfigurationHandlerInterface} from './external-configuration.handler';\r\nexport {HalOptions, HalParam} from './rest.service';\r\nexport {SubTypeBuilder} from './subtype-builder';\r\n\r\n\r\n/** Angular HAL module */\r\n@NgModule({\r\n    imports: [HttpClientModule],\r\n    declarations: [],\r\n    exports: [HttpClientModule],\r\n    providers: [\r\n        ExternalService,\r\n        HttpClient,\r\n        {\r\n            provide: ResourceService,\r\n            useClass: ResourceService,\r\n            deps: [ExternalService]\r\n        }]\r\n})\r\nexport class AngularHalModule {\r\n    static forRoot(): ModuleWithProviders<AngularHalModule> {\r\n        return {\r\n            ngModule: AngularHalModule,\r\n            providers: [\r\n                ExternalService,\r\n                HttpClient,\r\n                {\r\n                    provide: ResourceService,\r\n                    useClass: ResourceService,\r\n                    deps: [ExternalService]\r\n                }\r\n            ]\r\n        };\r\n    }\r\n}"]}