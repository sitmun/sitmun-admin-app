<app-form-toolbar
  icon="menu_capes"
  entityType="entity.cartography.layers"
  [itemName]="itemName('name')"
  [isNew]="isNewOrDuplicated()"
  (save)="onSaveButtonClicked()"
  (back)="utils.navigateBack()">
</app-form-toolbar>
<mat-tab-group
  mat-stretch-tabs="false"
  mat-align-tabs="end"
  [dynamicHeight]="true"
  preserveContent="true">
  >
  <form [formGroup]='entityForm' *ngIf="dataLoaded">
    <mat-tab label="{{ 'common.form.details' | translate }}">
      <mat-card class="sitmun-mat-card-margin" appearance="outlined">
        <mat-card-content>
          <mat-form-field appearance="outline" class="full">
            <mat-label>{{ 'common.form.name' | translate }}</mat-label>
            <input matInput type="text" formControlName="name" required>
          </mat-form-field>
          <mat-form-field appearance="outline" class="full">
            <mat-label>{{ 'common.form.description' | translate }}</mat-label>
            <textarea matInput type="text" formControlName="description"> </textarea>
            <mat-icon matSuffix class="iconTranslate"
                      (click)="onTranslated('description')"
                      onKeyDown="onTranslated('description')"
                      svgIcon="ic_translate"></mat-icon>
          </mat-form-field>
          <mat-checkbox formControlName="blocked">
            {{ 'entity.cartography.available' | translate }}
          </mat-checkbox>
          <div class="break"></div>
          <mat-form-field appearance="outline" class="half">
            <mat-label>{{ 'entity.cartography.serviceName' | translate }}</mat-label>
            <mat-select formControlName="serviceId" [placeholder]="'entity.cartography.serviceName.select' | translate">
              <mat-option [value]="null">{{ 'common.form.none' | translate }}</mat-option>
              <mat-option [value]="service.id" *ngFor="let service of services">
                {{ service.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="outline" class="full">
            <mat-label>{{ 'entity.cartography.layerSet' | translate }}</mat-label>
            <input matInput type="text" formControlName="joinedLayers" required>
          </mat-form-field>
        </mat-card-content>
      </mat-card>
      <mat-card appearance="outlined" class="sitmun-mat-card-margin">
        <mat-card-content>
          <mat-form-field appearance="outline" class="quarter add-gap">
            <mat-label>{{ 'entity.cartography.minimumScale' | translate }}</mat-label>
            <input matInput type="number" formControlName="minimumScale">
          </mat-form-field>
          <mat-form-field appearance="outline" class="quarter add-gap">
            <mat-label>{{ 'entity.cartography.maximumScale' | translate }}</mat-label>
            <input matInput type="number" formControlName="maximumScale">
          </mat-form-field>
          <div class="break"></div>
          <mat-form-field appearance="outline" class="quarter add-gap">
            <mat-label>{{ 'entity.cartography.order' | translate }}</mat-label>
            <input matInput type="number" formControlName="order">
          </mat-form-field>
          <mat-form-field appearance="outline" class="quarter add-gap">
            <mat-label>{{ 'entity.cartography.transparency' | translate }}</mat-label>
            <input matInput type="number" formControlName="transparency">
          </mat-form-field>
          <ng-container *featureFlag="'LAYERS_SOURCE_FEATURE'">
            <mat-form-field appearance="outline" class="quarter">
              <mat-label>{{ 'entity.cartography.source' | translate | featureFlag:'LAYERS_SOURCE_FEATURE'}}</mat-label>
              <input matInput type="text" formControlName="source">
            </mat-form-field>
          </ng-container>
          <div class="break"></div>
          <mat-form-field appearance="outline" class="full">
            <mat-label>{{ 'entity.cartography.datasetURL' | translate }}</mat-label>
            <input matInput type="text" formControlName="datasetURL">
          </mat-form-field>
          <mat-form-field appearance="outline" class="full">
            <mat-label>{{ 'entity.cartography.metadataURL' | translate }}</mat-label>
            <input matInput type="text" formControlName="metadataURL">
          </mat-form-field>
        </mat-card-content>
      </mat-card>
    </mat-tab>
    <ng-container *featureFlag="'LAYERS_QUERYABLE_FEATURE'">
      <mat-tab label="{{ 'entity.cartography.parameters.header' | translate | featureFlag:'LAYERS_QUERYABLE_FEATURE'}}">
      <mat-card appearance="outlined">
        <mat-card-content>
          <app-data-grid [changeHeightButton]="true"
                         [allNewElements]="isNewOrDuplicated()"
                         [columnDefs]="parametersTable.relationsColumnsDefs"
                         [getAll]='parametersTable.relationsFetchFn'
                         [eventAddItemsSubscription]='parametersTable.addCommandEvent$.asObservable()'
                         [eventGetAllRowsSubscription]='parametersTable.saveCommandEvent$.asObservable()'
                         [eventRefreshSubscription]='parametersTable.refreshCommandEvent$.asObservable()'
                         [discardChangesButton]=true
                         [redoButton]=true
                         [undoButton]=true
                         [deleteButton]=true
                         [addButton]=true
                         [hideDuplicateButton]=true
                         [hideReplaceButton]=true
                         [defaultColumnSorting]='parametersTable.defaultRelationsSorting()'
                         (getAllRows)="parametersTable.handleSaveRelations($event)"
                         [actionButton]=true
                         (add)="parametersTable.openTemplateDialog('newParameterDialog')"
                         *ngIf="dataLoaded"
          >
          </app-data-grid>
        </mat-card-content>
      </mat-card>
    </mat-tab>
      <mat-tab label="{{ 'entity.cartography.featureInformation.header' | translate }}">
        <mat-card appearance="outlined" class="sitmun-mat-card-margin">
          <mat-card-content>
            <mat-checkbox formControlName="queryableFeatureEnabled">
              {{ 'entity.cartography.featureInformation.queryable' | translate }}
            </mat-checkbox>
          </mat-card-content>
        </mat-card>
        <mat-card appearance="outlined" *ngIf="entityForm.get('queryableFeatureEnabled').value"
                  class="sitmun-mat-card-margin">
          <mat-card-content>
            <mat-checkbox formControlName="queryableFeatureAvailable">
              {{ 'entity.cartography.featureInformation.layerAll' | translate }}
            </mat-checkbox>
            <div class="break"></div>
            <mat-form-field appearance="outline" class="half and-gap"
                            *ngIf="entityForm.get('queryableFeatureAvailable').value !== true">
              <mat-label>{{ 'entity.cartography.featureInformation.layerFilter' | translate }}</mat-label>
              <input matInput type="text" formControlName="joinedQueryableLayers">
              <mat-error *ngIf="entityForm.get('joinedQueryableLayers').errors?.['invalidLayers']">
                {{ 'entity.cartography.featureInformation.invalidLayers' | translate }}
                : {{ entityForm.get('joinedQueryableLayers').errors?.['invalidLayers'].join(', ') }}
              </mat-error>
              <mat-error *ngIf="entityForm.get('joinedQueryableLayers').errors?.['duplicateLayers']">
                {{ 'entity.cartography.featureInformation.duplicateLayers' | translate }}
                : {{ entityForm.get('joinedQueryableLayers').errors?.['duplicateLayers'].join(', ') }}
              </mat-error>
              <mat-hint *ngIf="!entityForm.get('joinedQueryableLayers').value || getAvailableLayers()">
                {{ 'entity.cartography.featureInformation.availableLayers' | translate }}: {{ getAvailableLayers() }}
              </mat-hint>
            </mat-form-field>
          </mat-card-content>
        </mat-card>
      </mat-tab>
    </ng-container>
    <mat-tab label="{{ 'entity.cartography.filters.header' | translate }}">
      <mat-card appearance="outlined" class="sitmun-mat-card-margin">
        <mat-card-content>
          <mat-checkbox formControlName="applyFilterToGetMap">
            {{ 'entity.cartography.filters.applyFilterToGetMap' | translate }}
          </mat-checkbox>
          <mat-checkbox formControlName="applyFilterToSpatialSelection">
            {{ 'entity.cartography.filters.applyFilterToSpatialSelection' | translate }}
          </mat-checkbox>
          <mat-checkbox formControlName="applyFilterToGetFeatureInfo">
            {{ 'entity.cartography.filters.applyFilterToGetFeatureInfo' | translate }}
          </mat-checkbox>
        </mat-card-content>
      </mat-card>
      <mat-card appearance="outlined" class="sitmun-mat-card-margin">
        <mat-card-content>
          <app-data-grid [changeHeightButton]="true"
                         [allNewElements]="isNewOrDuplicated()"
                         [columnDefs]="territorialFiltersTable.relationsColumnsDefs"
                         [getAll]='territorialFiltersTable.relationsFetchFn'
                         [eventAddItemsSubscription]='territorialFiltersTable.addCommandEvent$.asObservable()'
                         [eventGetAllRowsSubscription]='territorialFiltersTable.saveCommandEvent$.asObservable()'
                         [eventRefreshSubscription]='territorialFiltersTable.refreshCommandEvent$.asObservable()'
                         [discardChangesButton]=true
                         [redoButton]=true
                         [undoButton]=true
                         [deleteButton]=true
                         [addButton]=true
                         [hideDuplicateButton]=true
                         [hideReplaceButton]=true
                         [defaultColumnSorting]='territorialFiltersTable.defaultRelationsSorting()'
                         (getAllRows)="territorialFiltersTable.handleSaveRelations($event)"
                         [actionButton]=true
                         (add)="territorialFiltersTable.openTemplateDialog('newTerritorialFilterDialog')"
                         *ngIf="dataLoaded"
          >
          </app-data-grid>
        </mat-card-content>
      </mat-card>
    </mat-tab>
    <mat-tab label="{{ 'entity.cartography.styles.header' | translate }}">
      <mat-card appearance="outlined" class="sitmun-mat-card-margin">
        <mat-card-content>
          <mat-form-field appearance="outline" class="half">
            <mat-label>{{ 'entity.cartography.styles.legendType' | translate }}</mat-label>
            <mat-select formControlName="legendType" [placeholder]="'common.form.none' | translate">
              <mat-option [value]="null">{{ 'common.form.none' | translate }}</mat-option>
              <mat-option [value]="legendType.value" *ngFor="let legendType of this.codeList('cartography.legendType')">
                {{ legendType.description }}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <div class="break"></div>
          <mat-form-field appearance="outline" class="full">
            <mat-label>{{ 'entity.cartography.styles.legendURL' | translate }}</mat-label>
            <input matInput type="text" formControlName="legendURL">
          </mat-form-field>
          <mat-checkbox formControlName="useAllStyles">
            {{ 'entity.cartography.styles.useAllStyles' | translate }}
          </mat-checkbox>
        </mat-card-content>
      </mat-card>
      <mat-card appearance="outlined">
        <mat-card-content>
          <app-data-grid [changeHeightButton]="true"
                         [allNewElements]="isNewOrDuplicated()"
                         [columnDefs]="stylesTable.relationsColumnsDefs"
                         [getAll]='stylesTable.relationsFetchFn'
                         [eventAddItemsSubscription]='stylesTable.addCommandEvent$.asObservable()'
                         [eventGetAllRowsSubscription]='stylesTable.saveCommandEvent$.asObservable()'
                         [eventRefreshSubscription]='stylesTable.refreshCommandEvent$.asObservable()'
                         [discardChangesButton]=true
                         [redoButton]=true
                         [undoButton]=true
                         [deleteButton]=true
                         [addButton]=true
                         [hideDuplicateButton]=true
                         [hideReplaceButton]=true
                         [defaultColumnSorting]='stylesTable.defaultRelationsSorting()'
                         (getAllRows)="stylesTable.handleSaveRelations($event)"
                         [actionButton]=true
                         (add)="stylesTable.openTemplateDialog('newStyleDialog')"
                         *ngIf="dataLoaded"
          >
          </app-data-grid>
        </mat-card-content>
      </mat-card>
    </mat-tab>
    <mat-tab label="{{ 'entity.cartography.territories.header' | translate }}">
      <mat-card appearance="outlined">
        <mat-card-content>
          <app-data-grid [changeHeightButton]="true"
                         [allNewElements]="isNewOrDuplicated()"
                         [columnDefs]="territoryAvailabilitiesTable.relationsColumnsDefs"
                         [getAll]='territoryAvailabilitiesTable.relationsFetchFn'
                         [eventAddItemsSubscription]='territoryAvailabilitiesTable.addCommandEvent$.asObservable()'
                         [eventGetAllRowsSubscription]='territoryAvailabilitiesTable.saveCommandEvent$.asObservable()'
                         [eventRefreshSubscription]='territoryAvailabilitiesTable.refreshCommandEvent$.asObservable()'
                         [discardChangesButton]=true
                         [redoButton]=true
                         [undoButton]=true
                         [deleteButton]=true
                         [addButton]=true
                         [hideDuplicateButton]=true
                         [hideReplaceButton]=true
                         [defaultColumnSorting]='territoryAvailabilitiesTable.defaultRelationsSorting()'
                         (getAllRows)="territoryAvailabilitiesTable.handleSaveRelations($event)"
                         [actionButton]=true
                         (add)="territoryAvailabilitiesTable.openDialog($event)"
                         *ngIf="dataLoaded"
          >
          </app-data-grid>
        </mat-card-content>
      </mat-card>
    </mat-tab>
    <mat-tab label="{{ 'entity.cartography.permissions.header' | translate }}">
      <mat-card appearance="outlined">
        <mat-card-content>
          <app-data-grid [changeHeightButton]="true"
                         [allNewElements]="isNewOrDuplicated()"
                         [columnDefs]="cartographyPermissionsTable.relationsColumnsDefs"
                         [getAll]='cartographyPermissionsTable.relationsFetchFn'
                         [eventAddItemsSubscription]='cartographyPermissionsTable.addCommandEvent$.asObservable()'
                         [eventGetAllRowsSubscription]='cartographyPermissionsTable.saveCommandEvent$.asObservable()'
                         [eventRefreshSubscription]='cartographyPermissionsTable.refreshCommandEvent$.asObservable()'
                         [discardChangesButton]=true
                         [redoButton]=true
                         [undoButton]=true
                         [deleteButton]=true
                         [addButton]=true
                         [hideDuplicateButton]=true
                         [hideReplaceButton]=true
                         [defaultColumnSorting]='cartographyPermissionsTable.defaultRelationsSorting()'
                         (getAllRows)="cartographyPermissionsTable.handleSaveRelations($event)"
                         [actionButton]=true
                         (add)="cartographyPermissionsTable.openDialog($event)"
                         *ngIf="dataLoaded"
          >
          </app-data-grid>
        </mat-card-content>
      </mat-card>
    </mat-tab>
    <mat-tab label="{{ 'entity.cartography.trees.header' | translate }}">
      <mat-card appearance="outlined">
        <mat-card-content>
          <app-data-grid [changeHeightButton]="true"
                         [allNewElements]="isNewOrDuplicated()"
                         [columnDefs]="treesNodesTable.relationsColumnsDefs"
                         [getAll]='treesNodesTable.relationsFetchFn'
                         [eventAddItemsSubscription]='treesNodesTable.addCommandEvent$.asObservable()'
                         [eventGetAllRowsSubscription]='treesNodesTable.saveCommandEvent$.asObservable()'
                         [eventRefreshSubscription]='treesNodesTable.refreshCommandEvent$.asObservable()'
                         [discardChangesButton]=false
                         [redoButton]=true
                         [undoButton]=true
                         [addButton]=false
                         [hideDuplicateButton]=true
                         [hideReplaceButton]=true
                         [defaultColumnSorting]='treesNodesTable.defaultRelationsSorting()'
                         (getAllRows)="treesNodesTable.handleSaveRelations($event)"
                         [actionButton]=false
                         *ngIf="dataLoaded"
          >
          </app-data-grid>
        </mat-card-content>
      </mat-card>
    </mat-tab>
  </form>
</mat-tab-group>


<ng-template #newParameterDialog>
  <form [formGroup]="parametersTable.templateDialog('newParameterDialog').form">
    <mat-form-field appearance="outline" class="full">
      <mat-label>{{ 'entity.cartography.parameters.name' | translate }}</mat-label>
      <input matInput type="text" formControlName="name" required>
    </mat-form-field>
    <mat-form-field appearance="outline" class="full">
      <mat-label>{{ 'entity.cartography.parameters.type' | translate }}</mat-label>
      <mat-select formControlName="type">
        <mat-option [value]="type.value" *ngFor="let type of codeList('cartographyParameter.type')">
          {{ type.description }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field appearance="outline" class="full">
      <mat-label>{{ 'entity.cartography.parameters.value' | translate }}</mat-label>
      <input matInput type="text" formControlName="value" required>
    </mat-form-field>
    <mat-form-field appearance="outline" class="full">
      <mat-label>{{ 'entity.cartography.parameters.format' | translate }}</mat-label>
      <mat-select formControlName="format">
        <mat-option [value]="formatType.value" *ngFor="let formatType of codeList('cartographyParameter.format')">
          {{ formatType.description }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field appearance="outline" class="full">
      <mat-label>{{ 'entity.cartography.parameters.order' | translate }}</mat-label>
      <input matInput type="number" formControlName="order">
    </mat-form-field>

  </form>
</ng-template>


<ng-template #newStyleDialog>
  <form [formGroup]="stylesTable.templateDialog('newStyleDialog').form">
    <mat-form-field appearance="outline" class="full">
      <mat-label>{{ 'entity.cartography.styles.parameters.name' | translate }}</mat-label>
      <input matInput type="text" formControlName="name" required>
    </mat-form-field>
    <mat-form-field appearance="outline" class="full">
      <mat-label>{{ 'entity.cartography.styles.parameters.title' | translate }}</mat-label>
      <input matInput type="text" formControlName="title" required>
    </mat-form-field>
    <mat-form-field appearance="outline" class="full">
      <mat-label>{{ 'entity.cartography.styles.parameters.description' | translate }}</mat-label>
      <input matInput type="text" formControlName="description">
    </mat-form-field>
    <mat-form-field appearance="outline" class="full">
      <mat-label>{{ 'entity.cartography.styles.parameters.format' | translate }}</mat-label>
      <input matInput type="text" formControlName="format">
    </mat-form-field>
    <mat-form-field appearance="outline" class="full">
      <mat-label>{{ 'entity.cartography.styles.parameters.width' | translate }}</mat-label>
      <input matInput type="number" formControlName="width">
    </mat-form-field>
    <mat-form-field appearance="outline" class="full">
      <mat-label>{{ 'entity.cartography.styles.parameters.height' | translate }}</mat-label>
      <input matInput type="number" formControlName="height">
    </mat-form-field>
    <mat-form-field appearance="outline" class="full">
      <mat-label>{{ 'entity.cartography.styles.parameters.url' | translate }}</mat-label>
      <input matInput type="text" formControlName="url">
    </mat-form-field>
  </form>
</ng-template>

<ng-template #newTerritorialFilterDialog>
  <form [formGroup]="territorialFiltersTable.templateDialog('newTerritorialFilterDialog').form">
    <mat-form-field appearance="outline" class="full">
      <mat-label>{{ 'entity.cartography.filters.parameters.name' | translate }}</mat-label>
      <input matInput type="text" formControlName="name" required>
    </mat-form-field>
    <mat-form-field appearance="outline" class="full">
      <mat-label>{{ 'entity.cartography.filters.parameters.type' | translate }}</mat-label>
      <mat-select formControlName="type">
        <mat-option [value]="filterType.value" *ngFor="let filterType of codeList('cartographyFilter.type')">
          {{ filterType.description }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-checkbox formControlName="required">
      {{ 'entity.cartography.filters.parameters.required' | translate }}
    </mat-checkbox>
    <mat-form-field appearance="outline" class="full">
      <mat-label>{{ 'entity.cartography.filters.parameters.column' | translate }}</mat-label>
      <input matInput type="text" formControlName="column">
    </mat-form-field>
    <mat-form-field appearance="outline" class="full">
      <mat-label>{{ 'entity.cartography.filters.parameters.values' | translate }}</mat-label>
      <input matInput type="text" formControlName="values">
    </mat-form-field>
    <mat-form-field appearance="outline" class="full">
      <mat-label>{{ 'entity.cartography.filters.parameters.valueType' | translate }}</mat-label>
      <mat-select formControlName="valueType">
        <mat-option [value]="valueType.value" *ngFor="let valueType of codeList('cartographyFilter.valueType')">
          {{ valueType.description }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field appearance="outline" class="full">
      <mat-label>{{ 'entity.cartography.filters.parameters.territorialLevel' | translate }}</mat-label>
      <mat-select formControlName="territorialLevelId">
        <mat-option [value]="typeId.id" *ngFor="let typeId of territorialTypes">
          {{ typeId.name }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </form>
</ng-template>


<!-- CODE THAT COULD BE REMOVED -->

<!--
<ng-template #newSpatialConfigurationDialog>
  <form [formGroup]='parameterForm'>
    <mat-form-field appearance="outline" class="full">
      <mat-label>{{ 'entity.cartography.spatialSelection.parameters.name' | translate }}</mat-label>
      <input matInput type="text" formControlName="name" required>
    </mat-form-field>
    <mat-form-field appearance="outline" class="full">
      <mat-label>{{ 'entity.cartography.spatialSelection.parameters.value' | translate }}</mat-label>
      <input matInput type="text" formControlName="value" required>
    </mat-form-field>
    <mat-form-field appearance="outline" class="full">
      <mat-label>{{ 'entity.cartography.spatialSelection.parameters.format' | translate }}</mat-label>
      <mat-select formControlName="format" required>
        <mat-option [value]="formatType.value" *ngFor="let formatType of spatialSelectionParameterFormatTypes">
          {{ formatType.description }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field appearance="outline" class="full">
      <mat-label>{{ 'entity.cartography.spatialSelection.parameters.type' | translate }}</mat-label>
      <mat-select formControlName="type" required>
        <mat-option [value]="type.value" *ngFor="let type of spatialSelectionParameterTypes">
          {{ type.description }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </form>
</ng-template>


    <mat-tab label="{{ 'entity.cartography.spatialSelection.header' | translate }}">
      <mat-card appearance="outlined" class="sitmun-mat-card-margin">
        <mat-card-content>
          <mat-checkbox formControlName="selectableFeatureEnabled" (change)="onSelectableFeatureEnabledChange($event)">
            {{ 'entity.cartography.spatialSelection.selectable' | translate }}
          </mat-checkbox>
        </mat-card-content>
      </mat-card>
      <mat-card appearance="outlined" *ngIf="entityForm.get('selectableFeatureEnabled').value"
                class="sitmun-mat-card-margin">
        <mat-card-content>
          <mat-form-field appearance="outline" class="half add-gap">
            <mat-label>{{ 'entity.cartography.serviceName' | translate }}</mat-label>
            <mat-select formControlName="spatialSelectionServiceId" (selectionChange)="loadButtonDisabled()"
            >
              <mat-option [value]="service.id" *ngFor="let service of spatialConfigurationServices">
                {{ service.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="outline" class="half">
            <mat-label>{{ 'entity.cartography.label' | translate }}</mat-label>
            <input matInput type="text" formControlName="joinedSelectableLayers" (keyup)="loadButtonDisabled()" required>
          </mat-form-field>
          <div class="break"></div>
          <button
            mat-raised-button
            class="sitmun-action-button"
            type="button"
            (click)="onLoadButtonClicked()"
          >
            {{ "entity.cartography.button.loadSpatialParameters" | translate }}
          </button>
          <div class="break"></div>
          <mat-card appearance="outlined" *ngIf="entityForm.get('selectableFeatureEnabled').value"
                    class="sitmun-mat-card-margin">
            <mat-card-content>
              <mat-checkbox
                formControlName="thematic"
                (change)="onSelectionThematicChanged($event)">
                {{ 'entity.cartography.featureInformation.geometryAll' | translate }}
              </mat-checkbox>
              <div class="break"></div>
              <mat-form-field appearance="outline" class="half">
                <mat-label>{{ 'entity.cartography.featureInformation.geometryFilter' | translate }}</mat-label>
                <mat-select formControlName="geometryType">
                  <mat-option [value]="geometryType.value" *ngFor="let geometryType of geometryTypes">
                    {{ geometryType.description }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </mat-card-content>
          </mat-card>
        </mat-card-content>
      </mat-card>

      <mat-card appearance="outlined" *ngIf="entityForm.get('selectableFeatureEnabled').value"
                class="sitmun-mat-card-margin">
        <mat-card-content>
          <app-data-grid [changeHeightButton]="true"
                         [allNewElements]="isNewOrDuplicated()"
                         [columnDefs]="columnDefsSpatialConfigurations"
                         [getAll]='getAllSpatialConfigurations' [defaultColumnSorting]="['name']"
                         [eventAddItemsSubscription]='addElementsEventSpatialConfigurations.asObservable()'
                         [eventGetAllRowsSubscription]='getAllElementsEventSpatialConfigurations.asObservable()'
                         [eventRefreshSubscription]='dataUpdatedEventSpatialConfigurations.asObservable()'
                         [eventReplaceAllItemsSubscription]='replaceAllElementsEventSpatialConfigurations.asObservable()'
                         [discardChangesButton]=true
                         [redoButton]=true
                         [undoButton]=true
                         [deleteButton]=true
                         [newButton]=true
                         (getAllRows)="getAllRowsParameters($event, true)"
                         [actionButton]=true
                         addFieldRestriction="name"
                         (duplicate)='duplicateParameters($event, true)'
                         (new)="openSpatialSelectionDialog($event)"
                         *ngIf="dataLoaded"
          >
          </app-data-grid>
        </mat-card-content>
      </mat-card>
    </mat-tab>
-->
